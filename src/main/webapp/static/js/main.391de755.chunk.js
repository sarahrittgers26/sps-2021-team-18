(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{118:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(12),r=a.n(c),s=a(10),i=a(33),o=a(71),l=(a(99),a(5)),u=a(4),j=a(8),d=a(87),b=a(86),m=a(180),p=a(85),O=a(6),f=a.n(O),h=a(15),v=a(3),_=a(74),N=a.n(_).a.create({baseURL:"https://spring21-sps-18.appspot.com"}),x={PROTOCOL:"https:"===window.location.protocol?"wss://":"ws://",HOST:"spring21-sps-18.appspot.com"},g=function(){var e;return{getInstance:function(){return e||(e=new WebSocket(x.PROTOCOL+x.HOST+x.PORT)),e}}}(),y={SIGN_IN:"SIGN_IN",SIGN_OUT:"SIGN_OUT",CAN_EDIT:"CAN_EDIT",CHANGE_PASSWORD:"CHANGE_PASSWORD",CHANGE_VISIBILITY:"CHANGE_VISIBILITY",CHANGE_AVATAR:"CHANGE_AVATAR",CHANGE_NAME:"CHANGE_NAME",CHOOSE_PROJECT:"CHANGE_PROJECT",CHOOSE_USER:"CHOOSE_USER",UPDATE_PROJECTS:"UPDATE_PROJECTS",UPDATE_USERS:"UPDATE_USERS",CLEAR_REDUCER:"CLEAR_REDUCER",CLEAR_PROJECT:"CLEAR_PROJECT",LOAD_INIT_PROJECTS:"LOAD_INIT_PROJECTS",CREATE_PROJECT:"CREATE_PROJECT",SEND_HTML:"SEND_HTML",SEND_CSS:"SEND_CSS",SEND_JS:"SEND_JS",SEND_TITLE:"SEND_TITLE",REC_HTML:"REC_HTML",REC_CSS:"REC_CSS",REC_JS:"REC_JS",REC_TITLE:"REC_TITLE",PING_USER:"PING_USER",REC_CREATE_PING:"REC_CREATE_PING",REC_CONTINUE_PING:"REC_CONTINUE_PING",SEND_LEFT:"SEND_LEFT",REC_LEFT:"REC_LEFT",SELECT_COLLAB:"SELECT_COLLAB"},C=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.bothActive===e){var r={collaborator:c.collaborator,collaboratorName:c.collaboratorName,projectid:c.projectid,title:c.title,html:c.html,css:c.css,js:c.js,collaboratorAvatar:c.collaboratorAvatar,image:c.image};a.push(r)}}return a},E=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.isContact===e){var r={username:c.username,name:c.name,isActive:c.isActive,avatar:c.avatar};a.push(r)}}return a},S=function(e){return{type:y.SIGN_IN,payload:e}},A=function(e){return{type:y.CHOOSE_PROJECT,payload:e}},P=function(e){return{type:y.SELECT_COLLAB,payload:e}},R=function(){return{type:y.CLEAR_PROJECT,payload:null}},w=function(e){return{type:y.CHANGE_VISIBILITY,payload:e}},I=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/get-users?username=".concat(e),t.next=4,N.get(n);case 4:c=t.sent,a({type:y.UPDATE_USERS,payload:{contacts:E(!0,c.data),activeUsers:E(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/load?username=".concat(e),t.next=4,N.get(n);case 4:c=t.sent,a({type:y.UPDATE_PROJECTS,payload:{onlineProjects:C(!0,c.data),offlineProjects:C(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/load?username=".concat(e),t.next=4,N.get(n);case 4:c=t.sent,a({type:y.LOAD_INIT_PROJECTS,payload:{onlineProjects:C(!0,c.data),offlineProjects:C(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=(a(118),a(0)),U=function(e){var t=e.history,a=Object(s.b)(),c=Object(n.useState)(""),r=Object(v.a)(c,2),i=r[0],o=r[1],l=Object(n.useState)(!1),u=Object(v.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(""),m=Object(v.a)(b,2),p=m[0],O=m[1],_=Object(n.useState)(""),x=Object(v.a)(_,2),g=x[0],y=x[1],C=Object(n.useState)(!1),E=Object(v.a)(C,2),A=E[0],P=E[1],R=Object(n.useState)(""),w=Object(v.a)(R,2),T=w[0],U=w[1],D=Object(n.useState)(""),J=Object(v.a)(D,2),G=J[0],H=J[1],V=Object(n.useState)(!1),B=Object(v.a)(V,2),q=B[0],z=B[1],F=Object(n.useState)(""),M=Object(v.a)(F,2),W=M[0],Y=M[1],K=Object(n.useState)(""),Z=Object(v.a)(K,2),$=Z[0],Q=Z[1],X=Object(n.useState)(!1),ee=Object(v.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(v.a)(ne,2),re=ce[0],se=ce[1],ie=Object(n.useState)(!0),oe=Object(v.a)(ie,2),le=oe[0],ue=oe[1],je=Object(n.useState)(!1),de=Object(v.a)(je,2),be=de[0],me=de[1],pe=Object(n.useRef)(),Oe=Object(n.useRef)(),fe=function(e,t){"Enter"===e.key&&t()},he=function(e,t,a,n,c){var r=!1;""===e?(d(!0),O("Username cannot be empty"),r=!0):(d(!1),O("")),t.length<8||t.length>60?(P(!0),U("Password must be greater than 8 characters and less than 60 characters"),r=!0):(P(!1),U("")),""!==a&&function(e){return new RegExp(['^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s','@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]',"{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"]).test(String(e).toLowerCase())}(a)?(z(!1),Y("")):(z(!0),Y("Please enter a valid email address format"),r=!0),""===n?(ae(!0),se("Name cannot be empty"),r=!0):(ae(!1),se("")),r||c()},ve=function(e,t,a){var n=!1;""===e?(d(!0),O("Username cannot be empty"),n=!0):(d(!1),O("")),""===t?(P(!0),U("Password cannot be empty"),n=!0):(P(!1),U("")),n||a()},_e=function(){var e=Object(h.a)(f.a.mark((function e(n,c,r,s){var i,o,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=encodeURIComponent(n),c=encodeURIComponent(c),r=encodeURIComponent(r),s=encodeURIComponent(s),e.next=7,N.post("/sign-up?username=".concat(n,"\n              &password=").concat(c,"&email=").concat(r,"&name=").concat(s));case 7:if(200===(i=e.sent).status){e.next=18;break}return d(!0),O("Unable to sign up at this time please try again"),P(!0),U("Unable to sign up at this time please try again"),z(!0),Y("Unable to sign up at this time please try again"),ae(!0),se("Unable to sign up at this time please try again"),e.abrupt("return");case 18:if(o=i.data,l=o[0],u=o[1],l&&(d(!0),O("Username is already taken")),u&&(z(!0),Y("Email address has already been used")),!l&&!u){e.next=25;break}return e.abrupt("return");case 25:a(S({username:n,email:r,name:s,avatar:"0"})),a(I(n)),a(L(n)),t.push("/projects"),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(0),e.t0&&(d(!0),O(e.t0.message),P(!0),U(e.t0.message));case 35:case 36:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,a,n,c){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(h.a)(f.a.mark((function e(n,c){var r,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(n),c=encodeURIComponent(c),e.prev=2,e.next=5,N.post("/sign-in?username=".concat(n,"\n              &password=").concat(c));case 5:200===(r=e.sent).status?(s=r.data,"true"===s[0]?(i="true"===s[3],a(S({username:n,email:s[1],name:s[2],isVisible:i,avatar:s[4]})),a(I(n)),a(L(n)),t.push("/projects")):(d(!0),O("Username or password entered incorrectly"),P(!0),U("Username or password entered incorrectly"))):(d(!0),O("Unable to sign in at this time please try again"),P(!0),U("Unable to sign in at this time please try again")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0&&(d(!0),O(e.t0.message),P(!0),U(e.t0.message));case 13:case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"Auth_container",children:[Object(k.jsx)("div",{className:"Auth_header",children:Object(k.jsx)("div",{className:"nine",children:Object(k.jsxs)("h1",{children:["COLLABCODE",Object(k.jsx)("span",{children:" code, create, and collaborate"})]})})}),Object(k.jsx)("div",{className:"Auth_main",children:Object(k.jsxs)("div",{className:"Auth_content card",children:[Object(k.jsx)("div",{className:"Auth_buttons_container",children:le?Object(k.jsx)("span",{className:"Auth_button left_button",children:"SIGN IN"}):Object(k.jsx)("span",{className:"Auth_button left_button ",children:"SIGN UP"})}),Object(k.jsxs)("div",{className:"Signin_signup",children:[Object(k.jsx)("div",{className:"dummy_sign_in visible_sign_in",ref:pe,children:Object(k.jsxs)("div",{className:"user_details",children:[Object(k.jsxs)("div",{className:"input",children:[Object(k.jsx)("input",{type:"text",name:"username_input",className:"Auth_input",required:"required",onChange:function(e){return o(e.target.value)},value:i,autoComplete:"off",onKeyPress:function(e){return fe(e,(function(){return ve(i,g,(function(){return Ne(i,g)}))}))}}),Object(k.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(k.jsx)("span",{className:"error",children:p}),Object(k.jsxs)("div",{className:"input",children:[Object(k.jsx)("input",{type:"password",required:"required",name:"password_input",className:"Auth_input",onChange:function(e){return y(e.target.value)},value:g,autoComplete:"off",onKeyPress:function(e){return fe(e,(function(){return ve(i,g,(function(){return Ne(i,g)}))}))}}),Object(k.jsx)("span",{className:"placeholder",children:"Password"})]}),A&&Object(k.jsx)("span",{className:"error",children:T}),Object(k.jsx)("div",{className:"Sign_in_button_container",children:Object(k.jsx)("button",{className:"Sign_up_button",onClick:function(){return ve(i,g,(function(){return Ne(i,g)}))},children:"Log In"})})]})}),Object(k.jsx)("div",{className:"dummy_sign_up hidden_sign_up",ref:Oe,children:Object(k.jsxs)("div",{className:"user_details",children:[Object(k.jsxs)("div",{className:"input",children:[Object(k.jsx)("input",{type:"text",id:"name_input",required:"required",label:"name_input",className:"Auth_input",onChange:function(e){return Q(e.target.value)},value:$,autoComplete:"off",onKeyPress:function(e){return fe(e,(function(){return he(i,g,G,$,(function(){return _e(i,g,G,$)}))}))}}),Object(k.jsx)("span",{className:"placeholder",children:"Name"})]}),te&&Object(k.jsx)("span",{className:"error",children:re}),Object(k.jsxs)("div",{className:"input",children:[Object(k.jsx)("input",{type:"text",label:"username_input",required:"required",className:"Auth_input",value:i,onChange:function(e){return o(e.target.value)},autoComplete:"off",onKeyPress:function(e){return fe(e,(function(){return ve(i,g,(function(){return Ne(i,g)}))}))}}),Object(k.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(k.jsx)("span",{className:"error",children:p}),Object(k.jsxs)("div",{className:"input",children:[Object(k.jsx)("input",{type:"password",required:"required",label:"password_input",className:"Auth_input",value:g,onChange:function(e){return y(e.target.value)},autoComplete:"off",onKeyPress:function(e){return fe(e,(function(){return ve(i,g,(function(){return Ne(i,g)}))}))}}),Object(k.jsx)("span",{className:"placeholder",children:"Password"})]}),A&&Object(k.jsx)("span",{className:"error",children:T}),Object(k.jsxs)("div",{className:"input",children:[Object(k.jsx)("input",{type:"text",required:"required",label:"email_input",className:"Auth_input",value:G,onChange:function(e){return H(e.target.value)},autoComplete:"off",onKeyPress:function(e){return fe(e,(function(){return he(i,g,G,$,(function(){return _e(i,g,G,$)}))}))}}),Object(k.jsx)("span",{className:"placeholder",children:"Email"})]}),q&&Object(k.jsx)("span",{className:"error",children:W}),Object(k.jsx)("div",{className:"Sign_up_button_container",children:Object(k.jsx)("button",{className:"Sign_up_button",onClick:function(){return he(i,g,G,$,(function(){return _e(i,g,G,$)}))},children:"Sign Up"})})]})})]}),le?Object(k.jsx)("h5",{children:Object(k.jsx)("span",{children:"New to CollabCode?"})}):Object(k.jsx)("h5",{children:Object(k.jsx)("span",{children:"Already have an account?"})}),le?Object(k.jsx)("button",{className:"Auth_button right_button ",onClick:function(){be||(ue(!1),me(!0),z(!1),ae(!1),P(!1),d(!1),pe.current.classList.remove("visible_sign_in"),pe.current.classList.add("hidden_sign_in"),Oe.current.classList.add("visible_sign_up"),Oe.current.classList.remove("hidden_sign_up"))},children:"SIGN UP"}):Object(k.jsx)("button",{className:"Auth_button right_button",onClick:function(){le||(ue(!0),me(!1),z(!1),ae(!1),P(!1),d(!1),pe.current.classList.add("visible_sign_in"),pe.current.classList.remove("hidden_sign_in"),Oe.current.classList.remove("visible_sign_up"),Oe.current.classList.add("hidden_sign_up"))},children:"SIGN IN"})]})})]})},D=a(75),J=(a(120),a(121),a(122),a(123),a(124),a(125),function(e){var t=e.language,a=e.displayName,n=e.value,c=e.socket,r=e.projectid;return Object(k.jsxs)("div",{className:"Pane_container",children:[Object(k.jsx)("div",{className:"Pane_title",children:a}),Object(k.jsx)(D.Controlled,{onBeforeChange:function(e,t,n){var s="SEND_"+a,i=JSON.stringify({id:r,type:s,data:n});c.send(i)},value:n,className:"Pane_code_mirror_wrapper",options:{lineWrapping:!0,lint:!0,mode:t,lineNumbers:!0,theme:"material"}})]})}),G=(a(126),a(47)),H=a.n(G),V=a(21),B=a.n(V),q=a(77),z=a.n(q),F=(a(127),a.p+"static/media/avatar-1.206df2ea.png"),M=a.p+"static/media/avatar-2.ce1e904e.png",W=a.p+"static/media/avatar-3.ba79463c.png",Y=a.p+"static/media/avatar-4.607dde39.png",K=a.p+"static/media/avatar-5.1cc5e5b8.png",Z=a.p+"static/media/avatar-6.af51b5dd.png",$=a.p+"static/media/avatar-7.61998959.png",Q=a.p+"static/media/avatar-8.d272d87a.png",X=function(e){var t=e.name,a=e.avatar,c=e.email,r=e.side,s=e.active,i=e.isUser,o=e.handleSave,l=e.handleReturn,u=Object(n.useState)(!1),j=Object(v.a)(u,2),d=j[0],b=j[1],m=Object(n.useRef)(),p=Object(n.useRef)(),O=function(e){b((function(e){return!e})),e()};return Object(n.useEffect)((function(){m.current.style.display=d?"flex":"none";var e=function(e){m.current&&!m.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&d&&b((function(e){return!e}))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[d]),Object(k.jsxs)("div",{className:"Profile_container ".concat("R"===r?"Profile_flipped":""),children:[Object(k.jsxs)("div",{className:"Profile_image ".concat(i?"":"other_user"),ref:p,onClick:function(){return b((function(e){return!e}))},children:["0"!==a?Object(k.jsx)("img",{src:function(){switch(a){case"1":return F;case"2":return M;case"3":return W;case"4":return Y;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"Profile_icon",alt:"avatar"}):Object(k.jsx)(B.a,{style:{fontSize:40}}),Object(k.jsx)("div",{className:"Profile_activity ".concat(s?"active_user":"inactive_user"," ").concat("R"===r?"right":"left")}),"      "]}),Object(k.jsxs)("div",{className:"Profile_details  ".concat("R"===r?"details_right":"details_left"),children:[Object(k.jsx)("span",{className:"Profile_name",children:t}),Object(k.jsx)("span",{className:"Profile_email",children:c})]}),i?Object(k.jsxs)("div",{className:"Editor_profile_menu",ref:m,children:[Object(k.jsx)("span",{className:"Editor_options",children:"Options"}),Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{onClick:function(){return O(o)},children:[Object(k.jsx)(z.a,{className:"Editor_profile_menu_icon"}),Object(k.jsx)("span",{children:"Save project"})]}),Object(k.jsxs)("li",{onClick:function(){return O(l)},children:[Object(k.jsx)(H.a,{className:"Editor_profile_menu_icon"}),Object(k.jsx)("span",{children:"Return to projects page"})]})]})]}):Object(k.jsx)("div",{ref:m})]})},ee=function(e){var t=e.title,a=e.projectName,n=e.handleSave,c=e.history,r=e.socket,i=e.projectid,o=e.collaborator,l=e.collaboratorName,u=e.collaboratorAvatar,j=Object(s.c)((function(e){return e.userReducer})),d=Object(s.b)(),b=function(){d(R());var e=JSON.stringify({id:o,type:y.SEND_LEFT,data:l});r.send(e),c.push("/projects")};return Object(k.jsxs)("div",{className:"Navbar_container",children:[Object(k.jsx)(X,{name:l,avatar:u,email:"",side:"L",active:!0,isUser:!1,handleReturn:b,handleSave:n}),Object(k.jsx)("div",{className:"Navbar_title_container",children:Object(k.jsx)("input",{type:"text",className:"Navbar_title",placeholder:t,name:"title_input",autoComplete:"off",id:"title_input",value:a,onChange:function(e){var t=JSON.stringify({type:y.SEND_TITLE,id:i,data:e.target.value});r.send(t)}})}),Object(k.jsx)(X,{name:j.name,avatar:j.avatar,side:"R",active:!0,isUser:!0,handleReturn:b,handleSave:n})]})},te=(a(129),a(181)),ae=a(179);a(130),a(131);var ne=function(){return Object(k.jsx)("div",{className:"StaticProgress_container",children:Object(k.jsx)("div",{className:"static_line"})})},ce=a(48),re=a.n(ce);var se=function(e){var t=e.collaboratorName,a=e.open;return Object(k.jsx)(te.a,{open:a,children:Object(k.jsx)(ae.a,{children:Object(k.jsxs)("div",{className:"StopCollab_container",children:[Object(k.jsx)("div",{className:"dialog_icon",children:Object(k.jsx)(re.a,{style:{fontSize:40}})}),Object(k.jsxs)("span",{className:"StopCollab_header",children:[t," has stopped  editing. Your work is being saved now..."]}),Object(k.jsx)(ne,{})]})})})},ie=a(78),oe=a.n(ie),le=a(79),ue=a.n(le),je=function(e){var t=e.history,a=Object(s.b)(),c=Object(s.c)((function(e){return e.projectReducer})),r=c.html,i=c.css,o=c.js,l=c.title,u=c.activeProject,j=c.collaboratorId,d=c.collaboratorName,b=c.collaboratorAvatar,m=Object(n.useState)(r),p=Object(v.a)(m,2),O=p[0],_=p[1],x=Object(n.useState)(i),C=Object(v.a)(x,2),E=C[0],S=C[1],A=Object(n.useState)(o),P=Object(v.a)(A,2),w=P[0],I=P[1],T=Object(n.useState)(""),L=Object(v.a)(T,2),U=L[0],D=L[1],G=Object(n.useState)(l),H=Object(v.a)(G,2),V=H[0],B=H[1],q=g.getInstance(),z=Object(n.useState)(!1),F=Object(v.a)(z,2),M=F[0],W=F[1];window.onpopstate=function(e){a(R());var n=JSON.stringify({id:j,type:y.SEND_LEFT,data:d});q.send(n),t.push("/projects")},q.onmessage=function(e){var a=JSON.parse(e.data);switch(a.type){case y.SEND_HTML:_(a.data);break;case y.SEND_CSS:S(a.data);break;case y.SEND_JS:I(a.data);break;case y.SEND_TITLE:B(a.data);break;case y.SEND_LEFT:W(!0),Y();var n=setTimeout((function(){t.push("/projects")}),4e3);return function(){return clearTimeout(n)}}};var Y=function(){oe()(document.querySelector("#render_pane")).then((function(e){e.toBlob((function(e){var t,n=new ue.a;n.append("image",e),a((t={html:O,css:E,js:w,projectid:u,title:V,image:n},function(){var e=Object(h.a)(f.a.mark((function e(a){var n,c,r,s,i,o,l,u,j,d,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(t.html),c=encodeURIComponent(t.css),r=encodeURIComponent(t.js),s=encodeURIComponent(t.title),i=t.projectid,o=t.image,l="/save-html?projectid=".concat(i,"&html=").concat(n),u="/save-css?projectid=".concat(i,"&css=").concat(c),j="/save-js?projectid=".concat(i,"&js=").concat(r),d="/update-title?projectid=".concat(i,"&title=").concat(s),b="/save-image?projectid=".concat(i),e.next=13,N.get(l);case 13:return e.next=15,N.get(u);case 15:return e.next=17,N.get(j);case 17:return e.next=19,N.get(d);case 19:return e.next=21,N.post(b,o,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data"}});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}))}))};return Object(n.useEffect)((function(){var e=setTimeout((function(){D("\n      <html>\n        <body>".concat(O,"</body>\n        <style>").concat(E,"</style>\n        <script>").concat(w,"<\/script>\n      </html>\n      "))}),250);return function(){return clearTimeout(e)}}),[O,E,w]),Object(k.jsxs)("div",{className:"Editor_container",children:[Object(k.jsx)(ee,{history:t,projectName:V,socket:q,title:l,collaborator:j,collaboratorName:d,collaboratorAvatar:b,projectid:u,handleSave:Y}),Object(k.jsxs)("div",{className:"Editor_pane Editor_top_pane",id:"render_pane",children:[Object(k.jsx)(J,{language:"xml",displayName:"HTML",value:O,socket:q,projectid:u}),Object(k.jsx)(J,{language:"css",displayName:"CSS",value:E,socket:q,projectid:u}),Object(k.jsx)(J,{language:"javascript",displayName:"JS",value:w,socket:q,projectid:u})]}),Object(k.jsx)("div",{id:"render_pane",className:"Editor_pane Editor_bottom_pane",children:Object(k.jsx)("iframe",{title:"output",srcDoc:U,sandbox:"allow-scripts allow-same-origin",width:"100%",height:"100%"})}),Object(k.jsx)(se,{collaboratorName:d,open:M})]})},de=a(49),be=a(28),me=a(80),pe=(a(132),a(133),a(134),function(e){var t=e.name,a=e.isActive,c=e.onClick,r=e.avatar,s=Object(n.useRef)();Object(n.useEffect)((function(){var e;(e=s.current).offsetWidth<e.scrollWidth&&s.current.classList.add("marquee")}));return Object(k.jsxs)("div",{className:"User_container",onClick:c,children:[Object(k.jsx)("div",{className:"User_image_container",children:Object(k.jsxs)("div",{className:"User_image",children:["0"!==r?Object(k.jsx)("img",{src:function(){switch(r){case"1":return F;case"2":return M;case"3":return W;case"4":return Y;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(k.jsx)(B.a,{style:{fontSize:40}}),Object(k.jsx)("div",{className:"User_activity",children:a?Object(k.jsx)("div",{className:"active"}):Object(k.jsx)("div",{className:"inactive"})})]})}),Object(k.jsx)("span",{className:"User_name",ref:s,children:t})]})}),Oe=function(e){var t=e.activeUsers,a=e.contacts,n=e.onActiveUserClick,c=e.onRecentUserClick,r=e.isVisible,s=t.map((function(e){return Object(k.jsx)(pe,{name:e.name,isActive:e.isActive,onClick:function(){return n(e.name,e.username,e.avatar)},avatar:e.avatar},e.username)})),i=a.map((function(e){return Object(k.jsx)(pe,{name:e.name,isActive:e.isActive,onClick:function(){return c(e.username,e.name,e.isActive,e.avatar)},avatar:e.avatar},e.username)}));return Object(k.jsxs)("div",{className:"ConnectedUsers_container card",children:[Object(k.jsx)("span",{className:"ConnectedUsers_label",children:"Recent contacts"}),i.length>0&&r?i:Object(k.jsx)("span",{className:"no_users",children:"No recent contacts"}),Object(k.jsx)("span",{className:"ConnectedUsers_label top",children:"Active users"}),s.length>0&&r?s:Object(k.jsx)("span",{className:"no_users",children:"No active users"})]})},fe=(a(135),a(81)),he=a.n(fe),ve=function(e){var t=e.query,a=e.onChange,c=Object(n.useRef)(),r=Object(n.useState)(!1),s=Object(v.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){i?c.current.classList.add("Searchbar_container_focused"):c.current.classList.remove("Searchbar_container_focused")}),[i]),Object(k.jsxs)("div",{className:"Searchbar_container card",ref:c,children:[Object(k.jsx)("div",{className:"Searchbar_icon_container",children:Object(k.jsx)(he.a,{className:"Searchbar_icon"})}),Object(k.jsx)("input",{type:"text",value:t,onChange:function(e){a(e.target.value)},placeholder:"Search for a project",onFocus:function(){return o(!0)},onBlur:function(){return o(!1)},className:"Searchbar_input"})]})},_e=(a(136),a(82)),Ne=a.n(_e),xe=(a(137),function(e){var t,a=e.collaboratorName,n=e.accept,c=e.decline,r=e.isNewProject,s=e.projectTitle,i=e.collaboratorAvatar;return Object(k.jsxs)("div",{className:"Notification_container",children:[Object(k.jsx)("div",{className:"user_icon",children:"0"!==i?Object(k.jsx)("img",{src:function(){switch(i){case"1":return F;case"2":return M;case"3":return W;case"4":return Y;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(k.jsx)(B.a,{style:{fontSize:40}})}),Object(k.jsxs)("div",{className:"Notification_side",children:[Object(k.jsx)("span",{className:"Notification_title",children:(t=r,t?"".concat(a," is inviting you to CREATE a new project"):"".concat(a," is inviting you to CONTINUE working on ").concat(s))}),Object(k.jsxs)("div",{className:"Notification_buttons",children:[Object(k.jsx)("button",{className:"Notification_button_decline",onClick:c,children:"DECLINE"}),Object(k.jsx)("button",{className:"Notification_button_accept",onClick:n,children:"ACCEPT"})]})]})]})}),ge=a.p+"static/media/banner.c68bbcc5.png",ye=function(e){var t=e.name,a=e.email,c=e.handleLogout,r=e.displayProfile,s=e.notifications,i=e.avatar,o=e.accept,l=e.decline,u=e.acceptCallBack,j=e.declineCallBack,d=e.displayAbout,b=e.isActive,m=Object(n.useState)(!1),p=Object(v.a)(m,2),O=p[0],f=p[1],h=Object(n.useState)(!1),_=Object(v.a)(h,2),N=_[0],x=_[1],g=Object(n.useRef)(),y=Object(n.useRef)(),C=Object(n.useRef)(),E=Object(n.useRef)(),S=function(e){f((function(e){return!e})),e()};return Object(n.useEffect)((function(){y.current.style.display=N?"flex":"none";var e=function(e){y.current&&!y.current.contains(e.target)&&E.current&&!E.current.contains(e.target)&&N&&x(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[N]),Object(n.useEffect)((function(){g.current.style.display=O?"flex":"none";var e=function(e){g.current&&!g.current.contains(e.target)&&C.current&&!C.current.contains(e.target)&&O&&f(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[O]),Object(k.jsxs)("div",{className:"Header_container",children:[Object(k.jsx)("div",{className:"Banner",children:Object(k.jsx)("img",{src:ge,alt:"Banner",className:"main_icon"})}),Object(k.jsxs)("div",{className:"Header_user",children:[Object(k.jsxs)("div",{className:"Header_notifications_icon ".concat(s.length>0&&!N?"notification_animation":""),ref:E,children:[Object(k.jsx)(Ne.a,{style:{fontSize:40},onClick:function(){return x((function(e){return!e}))}}),s.length>0&&Object(k.jsx)("div",{className:"Notifications_count_container",children:Object(k.jsx)("span",{className:"Notifications_count",children:s.length})})]}),Object(k.jsxs)("div",{className:"Header_user_icon",ref:C,onClick:function(){return f((function(e){return!e}))},children:["0"!==i?Object(k.jsx)("img",{src:function(){switch(i){case"1":return F;case"2":return M;case"3":return W;case"4":return Y;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(k.jsx)(B.a,{style:{fontSize:40}}),Object(k.jsx)("div",{className:"activity",children:b?Object(k.jsx)("div",{className:"active_user"}):Object(k.jsx)("div",{className:"inactive_user"})})]}),Object(k.jsx)("div",{className:"Header_notifications menu",ref:y,children:s.length>0?Object(k.jsxs)("div",{className:"Notification_main",children:[Object(k.jsx)("span",{className:"Notifications_title",children:"Notifications"}),s.map((function(e){return Object(k.jsx)(xe,{collaboratorName:e.collaboratorName,accept:function(){return o(e,(function(){return u(e.type,e.proj)}))},decline:function(){return l(e,(function(){return j(e.collaborator,e.type)}))},isNewProject:e.isNewProject,projectTitle:e.projectTitle,collaboratorAvatar:e.collaboratorAvatar},"Notification_".concat(s.indexOf(e)))}))]}):Object(k.jsx)("span",{className:"no_notifications",children:"You do not have any notifications"})}),Object(k.jsxs)("div",{className:"Header_menu menu",ref:g,children:[Object(k.jsxs)("div",{className:"Header_user_details",children:[Object(k.jsx)("span",{className:"Header_user_name",children:t}),Object(k.jsx)("span",{className:"Header_user_email",children:a})]}),Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{onClick:function(){return S(r)},children:[Object(k.jsx)(B.a,{className:"Header_menu_icon"}),Object(k.jsx)("span",{children:"Profile"})]}),Object(k.jsxs)("li",{onClick:function(){return S(d)},children:[Object(k.jsx)(re.a,{className:"Header_menu_icon"}),Object(k.jsx)("span",{children:"About"})]}),Object(k.jsxs)("li",{onClick:function(){return S(c)},children:[Object(k.jsx)(H.a,{className:"Header_menu_icon"}),Object(k.jsx)("span",{children:"Logout"})]})]})]})]})]})},Ce=(a(138),a(139),function(e){return Object(k.jsx)("div",{className:"AspectRatio",children:Object(k.jsx)("div",{className:"AspectRatio-innerWrapper",children:e})})}),Ee=a(83),Se=a.n(Ee),Ae=a(84),Pe=a.n(Ae),Re=function(e){var t=e.title,a=e.collaboratorName,n=e.downloadProject,c=e.continueProject,r=e.image;return Object(k.jsxs)("div",{className:"Project_container card",children:[Ce(Object(k.jsx)("div",{className:"Project_icon",children:Object(k.jsx)("img",{src:r,alt:"Project Icon",className:"Project_image"})})),Object(k.jsx)("span",{className:"Project_title",children:t}),Object(k.jsx)("span",{className:"Project_collaborator",children:"Collaborator: ".concat(a)}),Object(k.jsxs)("div",{className:"Project_options",children:[Object(k.jsxs)("button",{className:"download",onClick:n,children:[Object(k.jsx)(Se.a,{}),Object(k.jsx)("span",{className:"button_text",children:"Download"})]}),Object(k.jsxs)("button",{className:"continue",onClick:c,children:[Object(k.jsx)(Pe.a,{}),Object(k.jsx)("span",{className:"button_text",children:"Continue"})]})]})]})},we=(a(140),a(141),function(){return Object(k.jsxs)("div",{className:"Progress_container",children:[Object(k.jsx)("div",{className:"line-base"}),Object(k.jsx)("div",{className:"line"})]})}),Ie=a(50),Te=a.n(Ie),Le=function(e){var t=Object(s.b)(),a=e.collaboratorId,c=e.collaboratorName,r=e.isOpen,i=e.closeDialog,o=e.fromProject,l=e.message,u=e.socket,j=e.isActive,d=e.history,b=e.notifications,m=Object(n.useRef)(),p=Object(s.c)((function(e){return e.userReducer})),O=Object(s.c)((function(e){return e.projectReducer})),v=O.activeProject,_=O.title;u.onmessage=function(e){var n=JSON.parse(e.data),r=n.data.split("-"),s=r[0];switch(n.type){case"REC_CREATE_PING":"yes"===s?x():i();break;case"REC_CONTINUE_PING":"yes"===s?(t(P({username:a,name:c,avatar:r[1]})),d.push("/editor")):i()}};var x=function(){var e;t((e={username:p.username,collaborator:a,title:"New Project"},function(){var t=Object(h.a)(f.a.mark((function t(a){var n,c,r,s,i,o,l,u,j;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.collaborator,r=e.title,s="/create?username=".concat(n,"&partner=").concat(c,"&title=").concat(r),t.next=6,N.post(s);case 6:i=t.sent,o=i.data,l=g.getInstance(),u=JSON.stringify({id:o,type:y.LOAD_INIT_PROJECTS,data:""}),l.send(u),j=JSON.stringify({id:c,type:y.COLLAB_ADD_PROJECT,data:o}),l.send(j),a(T(n));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),i(),t(I(p.username))};return Object(k.jsx)(te.a,{open:r,children:Object(k.jsxs)(ae.a,{children:[Object(k.jsxs)("div",{className:"ConnectionDialog_container",children:[Object(k.jsx)("span",{className:"ConnectionDialog_header",children:"Connecting"}),Object(k.jsx)("span",{className:"ConnectionDialog_summary",children:"Waiting for ".concat(c," to connect...")}),Object(k.jsx)(we,{}),Object(k.jsx)("div",{className:"ConnectionDialog_button_container",children:Object(k.jsx)("button",{className:"ConnectionDialog_button",onClick:function(){var e,t="cancel=".concat(p.username,"=").concat(p.name,"=").concat(p.avatar,"=").concat(v,"=").concat(_);e=JSON.stringify({id:a,type:y.PING_USER,data:t}),u.send(e),i()},children:"CANCEL"})})]}),!j&&Object(k.jsxs)("div",{className:"ConnectionDialog_options",children:[Object(k.jsx)("div",{className:"Icon_container",children:Object(k.jsx)(Te.a,{style:{fontSize:40,color:"gray"}})}),Object(k.jsx)("span",{className:"AlertDialog_message",children:"You cannot collaborate with anyone when you are appearing offline."}),Object(k.jsx)("div",{className:"AlertDialog_button_container",children:Object(k.jsx)("button",{className:"AlertDialog_button",onClick:i,children:"CLOSE"})})]}),j&&Object(k.jsxs)("div",{className:"ConnectionDialog_options",ref:m,children:[Object(k.jsx)("span",{className:"ConnectionDialog_header",children:"Invite to collaborate?"}),Object(k.jsx)("div",{className:"Connection_Body"}),Object(k.jsx)("span",{className:"ConnectionDialog_alert",children:l}),Object(k.jsxs)("div",{className:"Connection_confirm_button_container",children:[Object(k.jsx)("button",{className:"Connection_confirm_button left",onClick:function(){if(m.current.classList.add("ConnectionDialog_hide_options"),o){console.log(v);var e,t=Object(de.a)(b);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(console.log(n),n.projectid===v){var c="yes-".concat(p.avatar),r=JSON.stringify({id:a,type:y.REC_CONTINUE_PING,data:c});return u.send(r),void d.push("/editor")}}}catch(O){t.e(O)}finally{t.f()}var s="continue=".concat(p.username,"=").concat(p.name,"=").concat(p.avatar,"=").concat(v,"=").concat(_),i=JSON.stringify({id:a,type:y.PING_USER,data:s});u.send(i)}else{var l="create=".concat(p.username,"=").concat(p.name,"=").concat(p.avatar),j=JSON.stringify({id:a,type:y.PING_USER,data:l});u.send(j)}},children:"YES"}),Object(k.jsx)("button",{className:"Connection_confirm_button right",onClick:i,children:"NO"})]})]})]})})},ke=(a(142),function(e){var t=e.isOpen,a=e.closeDialog,n=e.message;return Object(k.jsx)(te.a,{open:t,children:Object(k.jsx)(ae.a,{children:Object(k.jsxs)("div",{className:"AlertDialog_container",children:[Object(k.jsx)("div",{className:"AlertIcon_container",children:Object(k.jsx)(Te.a,{style:{fontSize:40,color:"gray"}})}),Object(k.jsx)("span",{className:"AlertDialog_message",children:n}),Object(k.jsx)("div",{className:"AlertDialog_button_container",children:Object(k.jsx)("button",{className:"AlertDialog_button",onClick:a,children:"CLOSE"})})]})})})});a(143);var Ue=function(e){var t=e.isOpen,a=e.closeDialog;return Object(k.jsx)(te.a,{open:t,children:Object(k.jsx)(ae.a,{children:Object(k.jsxs)("div",{className:"About_container",children:[Object(k.jsx)("div",{className:"fixed",children:Object(k.jsx)("span",{className:"About_header",children:"About"})}),Object(k.jsxs)("div",{className:"About_content",children:[Object(k.jsx)("span",{className:"About_message",children:"COLLABCODE is a platform that allows users to learn the basics of web development collaboratively. Any two online users can connect by creating a collaborative project to live code basic HTML, CSS and Javascript code while getting immediate feedback."}),Object(k.jsx)("span",{className:"About_message below",children:"To use CODECOLLAB, you have to select any user who is online to send a request to create a new project. Once the project has been created, you can then send an invitation to your partner to start collaborating on the new project by clicking continue on the project tile."}),Object(k.jsx)("span",{className:"About_message below",children:"To encourage collaboration amongst students, you can only work on a project while you and your partner are both online and editing together. However, you also have an option to download the project files and continue working offline."}),Object(k.jsx)("span",{className:"About_message below",children:"If you do not want to receive invitations to collaborate from other users while using the application, you can hide your online status by updating your profile settings. However, while your online status is hidden, you will not be able to collaborate with other users or to see other online users."})]}),Object(k.jsx)("div",{className:"About_button_container",children:Object(k.jsx)("button",{className:"About_button",onClick:a,children:"CLOSE"})})]})})})},De=(a(144),function(e){var t=e.isOpen,a=e.name,c=e.currentOnlineStatus,r=e.closeDialog,s=e.saveProfile,i=e.avatar,o=Object(n.useState)(a),l=Object(v.a)(o,2),u=l[0],j=l[1],d=Object(n.useState)(""),b=Object(v.a)(d,2),m=b[0],p=b[1],O=Object(n.useState)(c),f=Object(v.a)(O,2),h=f[0],_=f[1],N=Object(n.useState)(i),x=Object(v.a)(N,2),g=x[0],y=x[1];return Object(k.jsx)(te.a,{open:t,children:Object(k.jsx)(ae.a,{children:Object(k.jsxs)("div",{className:"ProfileDialog_container",children:[Object(k.jsx)("span",{className:"ProfileDialog_header",children:"Profile information"}),Object(k.jsxs)("div",{className:"Update_profile_pic",children:[Object(k.jsx)("div",{className:"Profile_current",children:"0"!==g?Object(k.jsx)("img",{src:function(e){switch(e){case"1":return F;case"2":return M;case"3":return W;case"4":return Y;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(g),className:"current_icon",alt:"Current avatar"}):Object(k.jsx)(B.a,{style:{fontSize:90}})}),Object(k.jsxs)("div",{className:"Profile_new",children:[Object(k.jsx)("span",{children:"Select new avatar"}),Object(k.jsxs)("div",{className:"profile_icons",children:[Object(k.jsx)("img",{src:F,className:"new_icon",alt:"Icon Option 1",onClick:function(){return y("1")}}),Object(k.jsx)("img",{src:M,className:"new_icon",alt:"Icon Option 2",onClick:function(){return y("2")}}),Object(k.jsx)("img",{src:W,className:"new_icon",alt:"Icon Option 3",onClick:function(){return y("3")}}),Object(k.jsx)("img",{src:Y,className:"new_icon",alt:"Icon Option 4",onClick:function(){return y("4")}}),Object(k.jsx)("img",{src:K,className:"new_icon",alt:"Icon Option 5",onClick:function(){return y("5")}}),Object(k.jsx)("img",{src:Z,className:"new_icon",alt:"Icon Option 6",onClick:function(){return y("6")}}),Object(k.jsx)("img",{src:$,className:"new_icon",alt:"Icon Option 7",onClick:function(){return y("7")}}),Object(k.jsx)("img",{src:Q,className:"new_icon",alt:"Icon Option 8",onClick:function(){return y("8")}})]})]})]}),Object(k.jsxs)("div",{className:"ProfileDialog_inputs",children:[Object(k.jsxs)("label",{htmlFor:"name_input",className:"input_container input_left",children:[Object(k.jsx)("span",{className:"Profile_input_label",children:"Name"}),Object(k.jsx)("input",{type:"text",name:"name_input",value:u,onChange:function(e){j(e.target.value)},className:"Profile_input"})]}),Object(k.jsxs)("label",{htmlFor:"username_input",className:"input_container input_right",children:[Object(k.jsx)("span",{className:"Profile_input_label",children:"Password"}),Object(k.jsx)("input",{type:"password",name:"username_input",onChange:function(e){p(e.target.value)},className:"Profile_input"})]})]}),Object(k.jsxs)("div",{className:"ProfileDialog_toggle_container",children:[Object(k.jsxs)("label",{htmlFor:"status_toggle",className:"Profile_toggle",children:[Object(k.jsx)("input",{type:"checkbox",id:"status_toggle",name:"status_toggle",checked:h,onChange:function(){return _((function(e){return!e}))},className:"Profile_toggle_input"}),Object(k.jsx)("div",{className:"Profile_toggle_fill"}),Object(k.jsx)("span",{className:"Toggle_label",children:"Display online status"})]}),Object(k.jsx)("span",{className:"online_status_message",children:"If you do not display your online status, you will not be able to see other users who are online"})]}),Object(k.jsxs)("div",{className:"ProfileDialog_button_container",children:[Object(k.jsx)("button",{className:"ProfileDialog_button left",onClick:r,children:"CLOSE"}),Object(k.jsx)("button",{className:"ProfileDialog_button right",onClick:function(){return s(u,m,h,g)},children:"SAVE"})]})]})})})}),Je=function(e){var t=e.history,c=Object(s.c)((function(e){return e.userReducer})),r=Object(s.b)(),i=Object(s.c)((function(e){return e.projectReducer})),o=i.activeUsers,l=i.contacts,u=i.onlineProjects,j=i.offlineProjects,d=Object(n.useState)(""),b=Object(v.a)(d,2),m=b[0],p=b[1],O=Object(n.useState)(!1),_=Object(v.a)(O,2),x=_[0],C=_[1],E=Object(n.useState)({}),S=Object(v.a)(E,2),L=S[0],U=S[1],D=Object(n.useState)([]),J=Object(v.a)(D,2),G=J[0],H=J[1],V=Object(n.useState)(u.concat(j)),B=Object(v.a)(V,2),q=B[0],z=B[1],F=Object(n.useState)(""),M=Object(v.a)(F,2),W=M[0],Y=M[1],K=Object(n.useState)(!1),Z=Object(v.a)(K,2),$=Z[0],Q=Z[1],X=Object(n.useState)([]),ee=Object(v.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),ce=Object(v.a)(ne,2),re=ce[0],se=ce[1],ie=Object(n.useState)(""),oe=Object(v.a)(ie,2),le=oe[0],ue=oe[1],je=Object(n.useState)(!0),pe=Object(v.a)(je,2),fe=pe[0],he=pe[1],_e=Object(n.useState)(!1),Ne=Object(v.a)(_e,2),xe=Ne[0],ge=Ne[1],Ce=Object(n.useState)([]),Ee=Object(v.a)(Ce,2),Se=Ee[0],Ae=Ee[1],Pe=Object(n.useState)(!1),we=Object(v.a)(Pe,2),Ie=we[0],Te=we[1],Je=g.getInstance();Je.onopen=function(){var e=JSON.stringify({id:c.username,type:y.SIGN_IN,data:""});Je.send(e);var t=[];q.forEach((function(e){var a=e.projectid;t.push(a)})),t.forEach((function(e){var t=JSON.stringify({id:e,type:y.LOAD_INIT_PROJECTS,data:""});Je.send(t)}))},Je.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case y.PING_USER:var a=t.data.split("="),n=a[0],c=a[1],r=a[2],s=a[3];if("cancel"===n){var i=Se.filter((function(e){return e.collaboratorId===c}));Ae(i)}else if("create"===n)Ae([].concat(Object(be.a)(Se),[{collaboratorName:r,collaborator:c,projectid:"",isNewProject:!0,projectTitle:"New Project",type:n,proj:c,collaboratorAvatar:s}]));else{for(var o=a[4],j="",d="",b="",m=0;m<u.length;m++)if(u[m].projectid===o){j=u[m].html,d=u[m].css,b=u[m].js;break}for(var p="0";0<l.length;m++)if(l[0].username===c){p=l[0].avatar;break}var O=a[5],f={collaborator:c,collaboratorName:r,title:O,projectid:o,html:j,css:d,js:b,avatar:p};Ae([].concat(Object(be.a)(Se),[{collaboratorName:r,projectid:o,collaborator:c,isNewProject:!1,projectTitle:f.title,type:n,proj:f,collaboratorAvatar:s}]))}}},window.onbeforeunload=function(){Je.onclose=function(){}},Object(n.useEffect)((function(){if(c.isVisible){var e=setInterval((function(){var e;r((e={username:c.username,isVisible:c.isVisible,isProjectsPage:!0},function(){var t=Object(h.a)(f.a.mark((function t(a){var n,c,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.username,c=e.isVisible,r=e.isProjectsPage,!c){t.next=7;break}return s="/update-active?username=".concat(n),t.next=7,N.get(s);case 7:r&&(a(T(n)),a(I(n)));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),2e3);return function(){clearInterval(e)}}}),[c.username,c.isVisible,r]);var Ge=function(e,t,a){ge(!1),C(!0),U({name:e,username:t,avatar:a,isActive:!0}),r(P({name:e,username:t,avatar:a})),ue("This will CREATE a new project with ".concat(e,"."))},He=function(e){var t=e.split(/[\s,]+/);return t=t.filter((function(e){return""!==e})).map((function(e){return e.toLowerCase()})).join("_")},Ve=function(e){var t,a=Object(de.a)(te);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.username===e)return n.isActive}}catch(c){a.e(c)}finally{a.f()}return!1};return Object(n.useEffect)((function(){var e;window.addEventListener("resize",(function(){document.body.classList.add("resize-animation-stopper"),clearTimeout(e),e=setTimeout((function(){document.body.classList.remove("resize-animation-stopper")}),400)}))}),[]),Object(n.useEffect)((function(){ae([]),z([]);var e=l.concat(o),t=u.concat(j),a=[];t.forEach((function(e){var t=e.projectid;a.push(t)})),a.forEach((function(e){var t=JSON.stringify({id:e,type:y.LOAD_INIT_PROJECTS,data:""});Je.send(t)})),ae(e),z(t)}),[l,u,j,o,Je]),Object(n.useEffect)((function(){var e=q.filter((function(e){return e.title.includes(m)||e.title.includes(m.toUpperCase())}));return H(e),function(){fe&&he(!1)}}),[m,q,fe]),Object(k.jsxs)("div",{className:"Projects_container",children:[Object(k.jsx)(ye,{name:c.name,email:c.email,handleLogout:function(){r({type:y.SIGN_OUT,payload:null}),r({type:y.CLEAR_REDUCER,payload:null}),t.push("/")},displayProfile:function(){se(!0)},notifications:Se,avatar:c.avatar,accept:function(e,t){var a=Se.filter((function(t){return t!==e}));Ae(a),t()},acceptCallBack:function(e,a){if("create"===e){var n=JSON.stringify({id:a,type:y.REC_CREATE_PING,data:"yes"});Je.send(n),r(T(c.username))}else{var s="yes-".concat(c.avatar),i=JSON.stringify({id:a.collaborator,type:y.REC_CONTINUE_PING,data:s});Je.send(i),r(A({projectid:a.projectid,collaborator:a.collaborator,collaboratorName:a.collaboratorName,html:a.html,css:a.css,js:a.js,title:a.title,collaboratorAvatar:a.avatar})),t.push("/editor")}},declineCallBack:function(e,t){if("create"===t){var a=JSON.stringify({id:e,type:y.REC_CREATE_PING,data:"no"});Je.send(a)}else{var n=JSON.stringify({id:e,type:y.REC_CONTINUE_PING,data:"no"});Je.send(n)}},decline:function(e,t){var a=Se.filter((function(t){return t!==e}));Ae(a),t()},history:t,isActive:c.isVisible,displayAbout:function(){return Te(!0)}}),Object(k.jsxs)("div",{className:"Projects_main",children:[Object(k.jsxs)("div",{className:"Projects_content",children:[Object(k.jsx)(ve,{query:m,onChange:p}),Object(k.jsx)("span",{className:"Projects_label",children:"Recent Projects"}),!fe&&0===q.length&&Object(k.jsxs)("div",{className:"card Projects_no_result",children:[Object(k.jsx)("span",{className:"no_result_summary",children:"No projects"}),Object(k.jsx)("span",{className:"no_result_message",children:"You have not collaborated on any projects with anyone. Please select any active user to start collaborating on your first project."})]}),!fe&&0!==q.length&&0===G.length&&Object(k.jsxs)("div",{className:"card Projects_no_result",children:[Object(k.jsx)("span",{className:"no_result_summary",children:"No results found"}),Object(k.jsx)("span",{className:"no_result_message",children:"You do not have any project that matches the given name."})]}),!fe&&G.length>0&&Object(k.jsx)("div",{className:"Projects_recent",children:G.map((function(e){return Object(k.jsx)(Re,{title:e.title,image:e.image,collaboratorName:e.collaboratorName,downloadProject:function(){return function(e,t,n,c){var r=He(e),s=a(145)(),i=s.folder(r);i.file("index.js",c),i.file("style.css",n),i.file("index.html",t),s.generateAsync({type:"blob"}).then((function(e){Object(me.saveAs)(e,"".concat(r,".zip"))}))}(e.projectid,e.html,e.css,e.js)},continueProject:function(){return function(e,t,a,n,c,s,i){if(Ve(a)){ge(!0),C(!0);for(var o="0",u=!0,j=0;j<l.length;j++)if(l[j].username===a){o=l[j].avatar,u=l[j].isActive;break}U({name:n,username:a,avatar:o,isActive:u}),r(P({name:n,username:a,avatar:o})),r(A({projectid:e,collaborator:a,collaboratorName:n,html:c,css:s,js:i,title:t,collaboratorAvatar:o})),ue("This will send an invitation to ".concat(n," to continue working on ").concat(t))}else Q(!0),Y("".concat(n," is currently offline. You can only edit \n\t      this project when you are both online."))}(e.projectid,e.title,e.collaborator,e.collaboratorName,e.html,e.css,e.js)}},e.projectid)}))})]}),Object(k.jsx)("div",{className:"Projects_sidebar",children:Object(k.jsx)(Oe,{activeUsers:o,contacts:l,onActiveUserClick:Ge,onRecentUserClick:function(e,t,a,n){a?Ge(t,e,n):(Q(!0),Y("".concat(t," is currently offline. You can only CREATE new projects with ACTIVE users.")))},isVisible:c.isVisible})})]}),x&&Object(k.jsx)(Le,{collaboratorName:L.name,collaboratorId:L.username,isActive:c.isVisible,isOpen:x,fromProject:xe,closeDialog:function(){return function(e){C(!1),e&&r(R()),ue(""),U({})}(xe)},message:le,socket:Je,history:t,notifications:Se}),$&&Object(k.jsx)(ke,{isOpen:$,closeDialog:function(){Y(""),Q(!1)},message:W}),re&&Object(k.jsx)(De,{isOpen:re,name:c.name,currentOnlineStatus:c.isVisible,closeDialog:function(){return se(!1)},saveProfile:function(e,t,a,n){var s,i;c.name!==e&&r((s={username:c.username,name:e},function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.username,n=s.name,c="/change-name?username=".concat(a,"&name=").concat(n),e.next=5,N.get(c);case 5:t({type:y.CHANGE_NAME,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c.avatar!==n&&r(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n,c,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.avatar,r="/change-avatar?username=".concat(n,"&avatar=").concat(c),t.next=5,N.get(r);case 5:a({type:y.CHANGE_AVATAR,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,avatar:n})),c.isVisible!==a&&r((i={username:c.username,visibility:a},function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.username,n=i.visibility,c="/change-vis?username=".concat(a,"&visibility=").concat(n),e.next=5,N.get(c);case 5:t(w(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.length>=8&&t.length<=60&&r(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n,c,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.password,r="/change-pass?username=".concat(n,"&password=").concat(c),t.next=5,N.get(r);case 5:a({type:y.CHANGE_PASSWORD,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,password:t})),se(!1)},avatar:c.avatar}),Ie&&Object(k.jsx)(Ue,{isOpen:Ie,closeDialog:function(){return Te(!1)}})]})},Ge=Object(p.a)(),He=Object(b.a)({palette:{type:"light",primary:{main:"#6E4AB1"},secondary:{main:"#000000"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:400,fontWeightRegular:500,fontWeightMedium:600}});var Ve=function(){var e=Object(s.c)((function(e){return e.userReducer})),t=function(t){var a=t.component,n=Object(u.a)(t,["component"]);return Object(k.jsx)(j.b,Object(l.a)(Object(l.a)({},n),{},{render:function(t){return e.isSignedIn?Object(k.jsx)(a,Object(l.a)({},t)):Object(k.jsx)(j.a,{to:"/"})}}))};return Object(k.jsx)(m.a,{theme:He,children:Object(k.jsxs)(d.a,{history:Ge,children:[Object(k.jsx)(j.b,{path:"/",exact:!0,component:U}),Object(k.jsx)(t,{path:"/editor",exact:!0,component:je}),Object(k.jsx)(t,{path:"/projects",exact:!0,component:Je})]})})},Be={activeProject:"",html:"",css:"",js:"",title:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0",onlineProjects:[],offlineProjects:[],activeUsers:[],contacts:[]},qe={isSignedIn:!1,username:"",email:"",name:"",isVisible:!0,avatar:"0"},ze=Object(i.c)({projectReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.CHOOSE_PROJECT:return Object(l.a)(Object(l.a)({},e),{},{activeProject:t.payload.projectid,html:t.payload.html,css:t.payload.css,js:t.payload.js,collaboratorName:t.payload.collaboratorName,title:t.payload.title,collaboratorId:t.payload.collaborator,collaboratorAvatar:t.payload.collaboratorAvatar});case y.CLEAR_PROJECT:return Object(l.a)(Object(l.a)({},e),{},{html:"",css:"",js:"",collaboratorName:"",title:"",activeProject:"",collaboratorId:"",collaboratorAvatar:"0"});case y.CHOOSE_USER:return Object(l.a)(Object(l.a)({},e),{},{collaboratorId:t.payload});case y.SELECT_COLLAB:return Object(l.a)(Object(l.a)({},e),{},{collaboratorId:t.payload.username,collaboratorName:t.payload.name,collaboratorAvatar:t.payload.avatar});case y.LOAD_INIT_PROJECTS:case y.UPDATE_PROJECTS:return Object(l.a)(Object(l.a)({},e),{},{onlineProjects:t.payload.onlineProjects,offlineProjects:t.payload.offlineProjects});case y.UPDATE_USERS:return Object(l.a)(Object(l.a)({},e),{},{contacts:t.payload.contacts,activeUsers:t.payload.activeUsers});case y.CLEAR_REDUCER:return Object(l.a)(Object(l.a)({},e),{},{activeProject:"",onlineProjects:[],title:"",offlineProjects:[],activeUsers:[],contacts:[],html:"",css:"",js:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0"});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.SIGN_IN:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!0,username:t.payload.username,email:t.payload.email,name:t.payload.name,avatar:t.payload.avatar,isVisible:t.payload.isVisible});case y.SIGN_OUT:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!1,username:"",email:"",activeProject:"",avatar:"0"});case y.CHANGE_VISIBILITY:return Object(l.a)(Object(l.a)({},e),{},{isVisible:t.payload});case y.CHANGE_NAME:return Object(l.a)(Object(l.a)({},e),{},{name:t.payload});case y.CHANGE_AVATAR:return Object(l.a)(Object(l.a)({},e),{},{avatar:t.payload});default:return e}}}),Fe=Object(i.d)(ze,Object(i.a)(o.a));r.a.render(Object(k.jsx)(s.a,{store:Fe,children:Object(k.jsx)(Ve,{})}),document.getElementById("root"))},99:function(e,t,a){}},[[155,1,2]]]);
//# sourceMappingURL=main.391de755.chunk.js.map