(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{118:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(12),r=a.n(c),s=a(9),i=a(33),o=a(69),l=(a(99),a(87)),u=a(8),j=a(86),d=a(179),b=a(85),m=a(6),p=a.n(m),f=a(15),O=a(3),h=a(72),v=a.n(h).a.create({baseURL:"https://spring21-sps-18.appspot.com"}),_="ws://",N="https://spring21-sps-18.appspot.com",x=":9000/",g=function(){var e;return{getInstance:function(){return e||(e=new WebSocket(_+N+x)),e}}}(),C={SIGN_IN:"SIGN_IN",SIGN_OUT:"SIGN_OUT",CAN_EDIT:"CAN_EDIT",CHANGE_PASSWORD:"CHANGE_PASSWORD",CHANGE_VISIBILITY:"CHANGE_VISIBILITY",CHANGE_AVATAR:"CHANGE_AVATAR",CHANGE_NAME:"CHANGE_NAME",CHOOSE_PROJECT:"CHANGE_PROJECT",CHOOSE_USER:"CHOOSE_USER",UPDATE_PROJECTS:"UPDATE_PROJECTS",UPDATE_USERS:"UPDATE_USERS",CLEAR_REDUCER:"CLEAR_REDUCER",CLEAR_PROJECT:"CLEAR_PROJECT",LOAD_INIT_PROJECTS:"LOAD_INIT_PROJECTS",CREATE_PROJECT:"CREATE_PROJECT",SEND_HTML:"SEND_HTML",SEND_CSS:"SEND_CSS",SEND_JS:"SEND_JS",SEND_TITLE:"SEND_TITLE",REC_HTML:"REC_HTML",REC_CSS:"REC_CSS",REC_JS:"REC_JS",REC_TITLE:"REC_TITLE",PING_USER:"PING_USER",REC_CREATE_PING:"REC_CREATE_PING",REC_CONTINUE_PING:"REC_CONTINUE_PING",SEND_LEFT:"SEND_LEFT",REC_LEFT:"REC_LEFT",SELECT_COLLAB:"SELECT_COLLAB"},y=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.bothActive===e){var r={collaborator:c.collaborator,collaboratorName:c.collaboratorName,projectid:c.projectid,title:c.title,html:c.html,css:c.css,js:c.js,collaboratorAvatar:c.collaboratorAvatar,image:c.image};a.push(r)}}return a},E=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.isContact===e){var r={username:c.username,name:c.name,isActive:c.isActive,avatar:c.avatar};a.push(r)}}return a},S=function(e){return{type:C.SIGN_IN,payload:e}},P=function(e){return{type:C.CHOOSE_PROJECT,payload:e}},A=function(e){return{type:C.SELECT_COLLAB,payload:e}},R=function(){return{type:C.CLEAR_PROJECT,payload:null}},I=function(e){return{type:C.CHANGE_VISIBILITY,payload:e}},w=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/get-users?username=".concat(e),t.next=4,v.get(n);case 4:c=t.sent,a({type:C.UPDATE_USERS,payload:{contacts:E(!0,c.data),activeUsers:E(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/load?username=".concat(e),t.next=4,v.get(n);case 4:c=t.sent,a({type:C.UPDATE_PROJECTS,payload:{onlineProjects:y(!0,c.data),offlineProjects:y(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/load?username=".concat(e),t.next=4,v.get(n);case 4:c=t.sent,a({type:C.LOAD_INIT_PROJECTS,payload:{onlineProjects:y(!0,c.data),offlineProjects:y(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=(a(118),a(1)),U=function(e){var t=e.history,a=Object(s.b)(),c=Object(n.useState)(""),r=Object(O.a)(c,2),i=r[0],o=r[1],l=Object(n.useState)(!1),u=Object(O.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(""),m=Object(O.a)(b,2),h=m[0],_=m[1],N=Object(n.useState)(""),x=Object(O.a)(N,2),g=x[0],C=x[1],y=Object(n.useState)(!1),E=Object(O.a)(y,2),P=E[0],A=E[1],R=Object(n.useState)(""),I=Object(O.a)(R,2),T=I[0],U=I[1],D=Object(n.useState)(""),J=Object(O.a)(D,2),G=J[0],H=J[1],V=Object(n.useState)(!1),B=Object(O.a)(V,2),q=B[0],z=B[1],F=Object(n.useState)(""),W=Object(O.a)(F,2),Y=W[0],M=W[1],K=Object(n.useState)(""),Z=Object(O.a)(K,2),$=Z[0],Q=Z[1],X=Object(n.useState)(!1),ee=Object(O.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(O.a)(ne,2),re=ce[0],se=ce[1],ie=Object(n.useState)(!0),oe=Object(O.a)(ie,2),le=oe[0],ue=oe[1],je=Object(n.useState)(!1),de=Object(O.a)(je,2),be=de[0],me=de[1],pe=Object(n.useRef)(),fe=Object(n.useRef)(),Oe=function(){le||(ue(!0),me(!1),z(!1),ae(!1),A(!1),d(!1),pe.current.classList.add("visible_sign_in"),pe.current.classList.remove("hidden_sign_in"),fe.current.classList.remove("visible_sign_up"),fe.current.classList.add("hidden_sign_up"))},he=function(){be||(ue(!1),me(!0),z(!1),ae(!1),A(!1),d(!1),pe.current.classList.remove("visible_sign_in"),pe.current.classList.add("hidden_sign_in"),fe.current.classList.add("visible_sign_up"),fe.current.classList.remove("hidden_sign_up"))},ve=function(e,t){"Enter"===e.key&&t()},_e=function(e,t,a,n,c){var r=!1;""===e?(d(!0),_("Username cannot be empty"),r=!0):(d(!1),_("")),t.length<8||t.length>60?(A(!0),U("Password must be greater than 8 characters and less than 60 characters"),r=!0):(A(!1),U("")),""!==a&&function(e){return new RegExp(['^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s','@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]',"{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"]).test(String(e).toLowerCase())}(a)?(z(!1),M("")):(z(!0),M("Please enter a valid email address format"),r=!0),""===n?(ae(!0),se("Name cannot be empty"),r=!0):(ae(!1),se("")),r||c()},Ne=function(e,t,a){var n=!1;""===e?(d(!0),_("Username cannot be empty"),n=!0):(d(!1),_("")),""===t?(A(!0),U("Password cannot be empty"),n=!0):(A(!1),U("")),n||a()},xe=function(){var e=Object(f.a)(p.a.mark((function e(n,c,r,s){var i,o,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=encodeURIComponent(n),c=encodeURIComponent(c),r=encodeURIComponent(r),s=encodeURIComponent(s),e.next=7,v.post("/sign-up?username=".concat(n,"\n              &password=").concat(c,"&email=").concat(r,"&name=").concat(s));case 7:if(200===(i=e.sent).status){e.next=18;break}return d(!0),_("Unable to sign up at this time please try again"),A(!0),U("Unable to sign up at this time please try again"),z(!0),M("Unable to sign up at this time please try again"),ae(!0),se("Unable to sign up at this time please try again"),e.abrupt("return");case 18:if(o=i.data,l=o[0],u=o[1],l&&(d(!0),_("Username is already taken")),u&&(z(!0),M("Email address has already been used")),!l&&!u){e.next=25;break}return e.abrupt("return");case 25:a(S({username:n,email:r,name:s,avatar:"0"})),a(w(n)),a(k(n)),t.push("/projects"),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(0),e.t0&&(d(!0),_(e.t0.message),A(!0),U(e.t0.message));case 35:case 36:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,a,n,c){return e.apply(this,arguments)}}(),ge=function(){var e=Object(f.a)(p.a.mark((function e(n,c){var r,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(n),c=encodeURIComponent(c),e.prev=2,e.next=5,v.post("/sign-in?username=".concat(n,"\n              &password=").concat(c));case 5:200===(r=e.sent).status?(s=r.data,"true"===s[0]?(i="true"===s[3],a(S({username:n,email:s[1],name:s[2],isVisible:i,avatar:s[4]})),a(w(n)),a(k(n)),t.push("/projects")):(d(!0),_("Username or password entered incorrectly"),A(!0),U("Username or password entered incorrectly"))):(d(!0),_("Unable to sign in at this time please try again"),A(!0),U("Unable to sign in at this time please try again")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0&&(d(!0),_(e.t0.message),A(!0),U(e.t0.message));case 13:case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(L.jsxs)("div",{className:"Auth_container",children:[Object(L.jsx)("div",{className:"Auth_header",children:Object(L.jsx)("div",{className:"nine",children:Object(L.jsxs)("h1",{children:["COLLABCODE",Object(L.jsx)("span",{children:" code, create, and collaborate"})]})})}),Object(L.jsx)("div",{className:"Auth_main",children:Object(L.jsxs)("div",{className:"Auth_content card",children:[Object(L.jsx)("div",{className:"Auth_buttons_container",children:le?Object(L.jsx)("button",{className:"Auth_button left_button",onClick:Oe,children:"SIGN IN"}):Object(L.jsx)("button",{className:"Auth_button left_button ",onClick:he,children:"SIGN UP"})}),Object(L.jsxs)("div",{className:"Signin_signup",children:[Object(L.jsx)("div",{className:"dummy_sign_in visible_sign_in",ref:pe,children:Object(L.jsxs)("div",{className:"user_details",children:[Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)("input",{type:"text",name:"username_input",className:"Auth_input",required:"required",onChange:function(e){return o(e.target.value)},value:i,autoComplete:"off",onKeyPress:function(e){return ve(e,(function(){return Ne(i,g,(function(){return ge(i,g)}))}))}}),Object(L.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(L.jsx)("span",{className:"error",children:h}),Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)("input",{type:"password",required:"required",name:"password_input",className:"Auth_input",onChange:function(e){return C(e.target.value)},value:g,autoComplete:"off",onKeyPress:function(e){return ve(e,(function(){return Ne(i,g,(function(){return ge(i,g)}))}))}}),Object(L.jsx)("span",{className:"placeholder",children:"Password"})]}),P&&Object(L.jsx)("span",{className:"error",children:T}),Object(L.jsx)("div",{className:"Sign_in_button_container",children:Object(L.jsx)("button",{className:"Sign_up_button",onClick:function(){return Ne(i,g,(function(){return ge(i,g)}))},children:"Log In"})})]})}),Object(L.jsx)("div",{className:"dummy_sign_up hidden_sign_up",ref:fe,children:Object(L.jsxs)("div",{className:"user_details",children:[Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)("input",{type:"text",id:"name_input",required:"required",label:"name_input",className:"Auth_input",onChange:function(e){return Q(e.target.value)},value:$,autoComplete:"off",onKeyPress:function(e){return ve(e,(function(){return _e(i,g,G,$,(function(){return xe(i,g,G,$)}))}))}}),Object(L.jsx)("span",{className:"placeholder",children:"Name"})]}),te&&Object(L.jsx)("span",{className:"error",children:re}),Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)("input",{type:"text",label:"username_input",required:"required",className:"Auth_input",value:i,onChange:function(e){return o(e.target.value)},autoComplete:"off",onKeyPress:function(e){return ve(e,(function(){return Ne(i,g,(function(){return ge(i,g)}))}))}}),Object(L.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(L.jsx)("span",{className:"error",children:h}),Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)("input",{type:"password",required:"required",label:"password_input",className:"Auth_input",value:g,onChange:function(e){return C(e.target.value)},autoComplete:"off",onKeyPress:function(e){return ve(e,(function(){return Ne(i,g,(function(){return ge(i,g)}))}))}}),Object(L.jsx)("span",{className:"placeholder",children:"Password"})]}),P&&Object(L.jsx)("span",{className:"error",children:T}),Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)("input",{type:"text",required:"required",label:"email_input",className:"Auth_input",value:G,onChange:function(e){return H(e.target.value)},autoComplete:"off",onKeyPress:function(e){return ve(e,(function(){return _e(i,g,G,$,(function(){return xe(i,g,G,$)}))}))}}),Object(L.jsx)("span",{className:"placeholder",children:"Email"})]}),q&&Object(L.jsx)("span",{className:"error",children:Y}),Object(L.jsx)("div",{className:"Sign_up_button_container",children:Object(L.jsx)("button",{className:"Sign_up_button",onClick:function(){return _e(i,g,G,$,(function(){return xe(i,g,G,$)}))},children:"Sign Up"})})]})})]}),le?Object(L.jsx)("h5",{children:Object(L.jsx)("span",{children:"New to CollabCode?"})}):Object(L.jsx)("h5",{children:Object(L.jsx)("span",{children:"Already have an account?"})}),le?Object(L.jsx)("button",{className:"Auth_button right_button ",onClick:he,children:"SIGN UP"}):Object(L.jsx)("button",{className:"Auth_button right_button",onClick:Oe,children:"SIGN IN"})]})})]})},D=a(73),J=(a(120),a(121),a(122),a(123),a(124),a(125),function(e){var t=e.language,a=e.displayName,n=e.value,c=e.socket,r=e.projectid;return Object(L.jsxs)("div",{className:"Pane_container",children:[Object(L.jsx)("div",{className:"Pane_title",children:a}),Object(L.jsx)(D.Controlled,{onBeforeChange:function(e,t,n){var s="SEND_"+a,i=JSON.stringify({id:r,type:s,data:n});c.send(i)},value:n,className:"Pane_code_mirror_wrapper",options:{lineWrapping:!0,lint:!0,mode:t,lineNumbers:!0,theme:"material"}})]})}),G=(a(126),a(46)),H=a.n(G),V=a(21),B=a.n(V),q=a(75),z=a.n(q),F=(a(127),a.p+"static/media/avatar-1.206df2ea.png"),W=a.p+"static/media/avatar-2.ce1e904e.png",Y=a.p+"static/media/avatar-3.ba79463c.png",M=a.p+"static/media/avatar-4.607dde39.png",K=a.p+"static/media/avatar-5.1cc5e5b8.png",Z=a.p+"static/media/avatar-6.af51b5dd.png",$=a.p+"static/media/avatar-7.61998959.png",Q=a.p+"static/media/avatar-8.d272d87a.png",X=function(e){var t=e.name,a=e.avatar,c=e.email,r=e.side,s=e.active,i=e.isUser,o=e.handleSave,l=e.handleReturn,u=Object(n.useState)(!1),j=Object(O.a)(u,2),d=j[0],b=j[1],m=Object(n.useRef)(),p=Object(n.useRef)(),f=function(e){b((function(e){return!e})),e()};return Object(n.useEffect)((function(){m.current.style.display=d?"flex":"none";var e=function(e){m.current&&!m.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&d&&b((function(e){return!e}))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[d]),Object(L.jsxs)("div",{className:"Profile_container ".concat("R"===r?"Profile_flipped":""),children:[Object(L.jsxs)("div",{className:"Profile_image ".concat(i?"":"other_user"),ref:p,onClick:function(){return b((function(e){return!e}))},children:["0"!==a?Object(L.jsx)("img",{src:function(){switch(a){case"1":return F;case"2":return W;case"3":return Y;case"4":return M;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"Profile_icon",alt:"avatar"}):Object(L.jsx)(B.a,{style:{fontSize:40}}),Object(L.jsx)("div",{className:"Profile_activity ".concat(s?"active_user":"inactive_user"," ").concat("R"===r?"right":"left")}),"      "]}),Object(L.jsxs)("div",{className:"Profile_details  ".concat("R"===r?"details_right":"details_left"),children:[Object(L.jsx)("span",{className:"Profile_name",children:t}),Object(L.jsx)("span",{className:"Profile_email",children:c})]}),i?Object(L.jsxs)("div",{className:"Editor_profile_menu",ref:m,children:[Object(L.jsx)("span",{className:"Editor_options",children:"Options"}),Object(L.jsxs)("ul",{children:[Object(L.jsxs)("li",{onClick:function(){return f(o)},children:[Object(L.jsx)(z.a,{className:"Editor_profile_menu_icon"}),Object(L.jsx)("span",{children:"Save project"})]}),Object(L.jsxs)("li",{onClick:function(){return f(l)},children:[Object(L.jsx)(H.a,{className:"Editor_profile_menu_icon"}),Object(L.jsx)("span",{children:"Return to projects page"})]})]})]}):Object(L.jsx)("div",{ref:m})]})},ee=function(e){var t=e.title,a=e.projectName,n=e.handleSave,c=e.history,r=e.socket,i=e.projectid,o=e.collaborator,l=e.collaboratorName,u=e.collaboratorAvatar,j=Object(s.c)((function(e){return e.userReducer})),d=Object(s.b)(),b=function(){d(R());var e=JSON.stringify({id:o,type:C.SEND_LEFT,data:l});r.send(e),c.push("/projects")};return Object(L.jsxs)("div",{className:"Navbar_container",children:[Object(L.jsx)(X,{name:l,avatar:u,email:"",side:"L",active:!0,isUser:!1,handleReturn:b,handleSave:n}),Object(L.jsx)("div",{className:"Navbar_title_container",children:Object(L.jsx)("input",{type:"text",className:"Navbar_title",placeholder:t,name:"title_input",autoComplete:"off",id:"title_input",value:a,onChange:function(e){var t=JSON.stringify({type:C.SEND_TITLE,id:i,data:e.target.value});r.send(t)}})}),Object(L.jsx)(X,{name:j.name,avatar:j.avatar,side:"R",active:!0,isUser:!0,handleReturn:b,handleSave:n})]})},te=(a(129),a(180)),ae=a(178);a(130),a(131);var ne=function(){return Object(L.jsx)("div",{className:"StaticProgress_container",children:Object(L.jsx)("div",{className:"static_line"})})},ce=a(76),re=a.n(ce);var se=function(e){var t=e.collaboratorName,a=e.open;return Object(L.jsx)(te.a,{open:a,children:Object(L.jsx)(ae.a,{children:Object(L.jsxs)("div",{className:"StopCollab_container",children:[Object(L.jsx)("div",{className:"dialog_icon",children:Object(L.jsx)(re.a,{style:{fontSize:40}})}),Object(L.jsxs)("span",{className:"StopCollab_header",children:[t," has stopped  editing. Your work is being saved now..."]}),Object(L.jsx)(ne,{})]})})})},ie=a(77),oe=a.n(ie),le=a(78),ue=a.n(le),je=function(e){var t=e.history,a=Object(s.b)(),c=Object(s.c)((function(e){return e.projectReducer})),r=c.html,i=c.css,o=c.js,l=c.title,u=c.activeProject,j=c.collaboratorId,d=c.collaboratorName,b=c.collaboratorAvatar,m=Object(n.useState)(r),h=Object(O.a)(m,2),_=h[0],N=h[1],x=Object(n.useState)(i),y=Object(O.a)(x,2),E=y[0],S=y[1],P=Object(n.useState)(o),A=Object(O.a)(P,2),I=A[0],w=A[1],T=Object(n.useState)(""),k=Object(O.a)(T,2),U=k[0],D=k[1],G=Object(n.useState)(l),H=Object(O.a)(G,2),V=H[0],B=H[1],q=g.getInstance(),z=Object(n.useState)(!1),F=Object(O.a)(z,2),W=F[0],Y=F[1];window.onpopstate=function(e){console.log("Out"),a(R());var n=JSON.stringify({id:j,type:C.SEND_LEFT,data:d});q.send(n),t.push("/projects")},q.onmessage=function(e){var a=JSON.parse(e.data);switch(a.type){case C.SEND_HTML:N(a.data);break;case C.SEND_CSS:S(a.data);break;case C.SEND_JS:w(a.data);break;case C.SEND_TITLE:B(a.data);break;case C.SEND_LEFT:Y(!0),M();var n=setTimeout((function(){t.push("/projects")}),4e3);return function(){return clearTimeout(n)}}};var M=function(){oe()(document.querySelector("#render_pane")).then((function(e){e.toBlob((function(e){var t,n=new ue.a;n.append("image",e),a((t={html:_,css:E,js:I,projectid:u,title:V,image:n},function(){var e=Object(f.a)(p.a.mark((function e(a){var n,c,r,s,i,o,l,u,j,d,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(t.html),c=encodeURIComponent(t.css),r=encodeURIComponent(t.js),s=encodeURIComponent(t.title),i=t.projectid,o=t.image,l="/save-html?projectid=".concat(i,"&html=").concat(n),u="/save-css?projectid=".concat(i,"&css=").concat(c),j="/save-js?projectid=".concat(i,"&js=").concat(r),d="/update-title?projectid=".concat(i,"&title=").concat(s),b="/save-image?projectid=".concat(i),e.next=13,v.get(l);case 13:return e.next=15,v.get(u);case 15:return e.next=17,v.get(j);case 17:return e.next=19,v.get(d);case 19:return e.next=21,v.post(b,o,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data"}});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}))}))};return Object(n.useEffect)((function(){var e=setTimeout((function(){D("\n      <html>\n        <body>".concat(_,"</body>\n        <style>").concat(E,"</style>\n        <script>").concat(I,"<\/script>\n      </html>\n      "))}),250);return function(){return clearTimeout(e)}}),[_,E,I]),Object(L.jsxs)("div",{className:"Editor_container",children:[Object(L.jsx)(ee,{history:t,projectName:V,socket:q,title:l,collaborator:j,collaboratorName:d,collaboratorAvatar:b,projectid:u,handleSave:M}),Object(L.jsxs)("div",{className:"Editor_pane Editor_top_pane",id:"render_pane",children:[Object(L.jsx)(J,{language:"xml",displayName:"HTML",value:_,socket:q,projectid:u}),Object(L.jsx)(J,{language:"css",displayName:"CSS",value:E,socket:q,projectid:u}),Object(L.jsx)(J,{language:"javascript",displayName:"JS",value:I,socket:q,projectid:u})]}),Object(L.jsx)("div",{id:"render_pane",className:"Editor_pane Editor_bottom_pane",children:Object(L.jsx)("iframe",{title:"output",srcDoc:U,sandbox:"allow-scripts allow-same-origin",width:"100%",height:"100%"})}),Object(L.jsx)(se,{collaboratorName:d,open:W})]})},de=a(79),be=a(28),me=a(80),pe=(a(132),a(133),a(134),function(e){var t=e.name,a=e.isActive,c=e.onClick,r=e.avatar,s=Object(n.useRef)();Object(n.useEffect)((function(){var e;(e=s.current).offsetWidth<e.scrollWidth&&s.current.classList.add("marquee")}));return Object(L.jsxs)("div",{className:"User_container",onClick:c,children:[Object(L.jsx)("div",{className:"User_image_container",children:Object(L.jsxs)("div",{className:"User_image",children:["0"!==r?Object(L.jsx)("img",{src:function(){switch(r){case"1":return F;case"2":return W;case"3":return Y;case"4":return M;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(L.jsx)(B.a,{style:{fontSize:40}}),Object(L.jsx)("div",{className:"User_activity",children:a?Object(L.jsx)("div",{className:"active"}):Object(L.jsx)("div",{className:"inactive"})})]})}),Object(L.jsx)("span",{className:"User_name",ref:s,children:t})]})}),fe=function(e){var t=e.activeUsers,a=e.contacts,n=e.onActiveUserClick,c=e.onRecentUserClick,r=e.isVisible,s=t.map((function(e){return Object(L.jsx)(pe,{name:e.name,isActive:e.isActive,onClick:function(){return n(e.name,e.username,e.avatar)},avatar:e.avatar},e.username)})),i=a.map((function(e){return Object(L.jsx)(pe,{name:e.name,isActive:e.isActive,onClick:function(){return c(e.username,e.name,e.isActive,e.avatar)},avatar:e.avatar},e.username)}));return Object(L.jsxs)("div",{className:"ConnectedUsers_container card",children:[Object(L.jsx)("span",{className:"ConnectedUsers_label",children:"Recent contacts"}),i.length>0&&r?i:Object(L.jsx)("span",{className:"no_users",children:"No recent contacts"}),Object(L.jsx)("span",{className:"ConnectedUsers_label top",children:"Active users"}),s.length>0&&r?s:Object(L.jsx)("span",{className:"no_users",children:"No active users"})]})},Oe=(a(135),a(81)),he=a.n(Oe),ve=function(e){var t=e.query,a=e.onChange,c=Object(n.useRef)(),r=Object(n.useState)(!1),s=Object(O.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){i?c.current.classList.add("Searchbar_container_focused"):c.current.classList.remove("Searchbar_container_focused")}),[i]),Object(L.jsxs)("div",{className:"Searchbar_container card",ref:c,children:[Object(L.jsx)("div",{className:"Searchbar_icon_container",children:Object(L.jsx)(he.a,{className:"Searchbar_icon"})}),Object(L.jsx)("input",{type:"text",value:t,onChange:function(e){a(e.target.value)},placeholder:"Search for a project",onFocus:function(){return o(!0)},onBlur:function(){return o(!1)},className:"Searchbar_input"})]})},_e=(a(136),a(82)),Ne=a.n(_e),xe=(a(137),function(e){var t,a=e.collaboratorName,n=e.accept,c=e.decline,r=e.isNewProject,s=e.projectTitle,i=e.collaboratorAvatar;return Object(L.jsxs)("div",{className:"Notification_container",children:[Object(L.jsx)("div",{className:"user_icon",children:"0"!==i?Object(L.jsx)("img",{src:function(){switch(i){case"1":return F;case"2":return W;case"3":return Y;case"4":return M;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(L.jsx)(B.a,{style:{fontSize:40}})}),Object(L.jsxs)("div",{className:"Notification_side",children:[Object(L.jsx)("span",{className:"Notification_title",children:(t=r,t?"".concat(a," is inviting you to CREATE a new project"):"".concat(a," is inviting you to CONTINUE working on ").concat(s))}),Object(L.jsxs)("div",{className:"Notification_buttons",children:[Object(L.jsx)("button",{className:"Notification_button_decline",onClick:c,children:"DECLINE"}),Object(L.jsx)("button",{className:"Notification_button_accept",onClick:n,children:"ACCEPT"})]})]})]})}),ge=a.p+"static/media/banner.c68bbcc5.png",Ce=function(e){var t=e.name,a=e.email,c=e.handleLogout,r=e.displayProfile,s=e.notifications,i=e.avatar,o=e.accept,l=e.decline,u=e.acceptCallBack,j=e.declineCallBack,d=e.history,b=Object(n.useState)(!1),m=Object(O.a)(b,2),p=m[0],f=m[1],h=Object(n.useState)(!1),v=Object(O.a)(h,2),_=v[0],N=v[1],x=Object(n.useRef)(),g=Object(n.useRef)(),C=Object(n.useRef)(),y=Object(n.useRef)(),E=function(e){f((function(e){return!e})),e()};Object(n.useEffect)((function(){g.current.style.display=_?"flex":"none";var e=function(e){g.current&&!g.current.contains(e.target)&&y.current&&!y.current.contains(e.target)&&_&&N(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[_]),Object(n.useEffect)((function(){x.current.style.display=p?"flex":"none";var e=function(e){x.current&&!x.current.contains(e.target)&&C.current&&!C.current.contains(e.target)&&p&&f(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[p]);return Object(L.jsxs)("div",{className:"Header_container",children:[Object(L.jsx)("div",{className:"Banner",children:Object(L.jsx)("img",{src:ge,alt:"Banner",className:"main_icon",onClick:function(){d.push("/projects")}})}),Object(L.jsxs)("div",{className:"Header_user",children:[Object(L.jsxs)("div",{className:"Header_notifications_icon ".concat(s.length>0&&!_?"notification_animation":""),ref:y,children:[Object(L.jsx)(Ne.a,{style:{fontSize:40},onClick:function(){return N((function(e){return!e}))}}),s.length>0&&Object(L.jsx)("div",{className:"Notifications_count_container",children:Object(L.jsx)("span",{className:"Notifications_count",children:s.length})})]}),Object(L.jsx)("div",{className:"Header_user_icon",ref:C,onClick:function(){return f((function(e){return!e}))},children:"0"!==i?Object(L.jsx)("img",{src:function(){switch(i){case"1":return F;case"2":return W;case"3":return Y;case"4":return M;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(L.jsx)(B.a,{style:{fontSize:40}})}),Object(L.jsx)("div",{className:"Header_notifications menu",ref:g,children:s.length>0?Object(L.jsxs)("div",{className:"Notification_main",children:[Object(L.jsx)("span",{className:"Notifications_title",children:"Notifications"}),s.map((function(e){return Object(L.jsx)(xe,{collaboratorName:e.collaboratorName,accept:function(){return o(e,(function(){return u(e.type,e.proj)}))},decline:function(){return l(e,(function(){return j(e.collaborator,e.type)}))},isNewProject:e.isNewProject,projectTitle:e.projectTitle,collaboratorAvatar:e.collaboratorAvatar},"Notification_".concat(s.indexOf(e)))}))]}):Object(L.jsx)("span",{className:"no_notifications",children:"You do not have any notifications"})}),Object(L.jsxs)("div",{className:"Header_menu menu",ref:x,children:[Object(L.jsxs)("div",{className:"Header_user_details",children:[Object(L.jsx)("span",{className:"Header_user_name",children:t}),Object(L.jsx)("span",{className:"Header_user_email",children:a})]}),Object(L.jsxs)("ul",{children:[Object(L.jsxs)("li",{onClick:function(){return E(r)},children:[Object(L.jsx)(B.a,{className:"Header_menu_icon"}),Object(L.jsx)("span",{children:"Profile"})]}),Object(L.jsxs)("li",{onClick:function(){return E(c)},children:[Object(L.jsx)(H.a,{className:"Header_menu_icon"}),Object(L.jsx)("span",{children:"Logout"})]})]})]})]})]})},ye=(a(138),a(139),function(e){return Object(L.jsx)("div",{className:"AspectRatio",children:Object(L.jsx)("div",{className:"AspectRatio-innerWrapper",children:e})})}),Ee=a(83),Se=a.n(Ee),Pe=a(84),Ae=a.n(Pe),Re=function(e){var t=e.title,a=e.collaboratorName,n=e.downloadProject,c=e.continueProject,r=e.image;return Object(L.jsxs)("div",{className:"Project_container card",children:[ye(Object(L.jsx)("div",{className:"Project_icon",children:Object(L.jsx)("img",{src:r,alt:"Project Icon",className:"Project_image"})})),Object(L.jsx)("span",{className:"Project_title",children:t}),Object(L.jsx)("span",{className:"Project_collaborator",children:"Collaborator: ".concat(a)}),Object(L.jsxs)("div",{className:"Project_options",children:[Object(L.jsxs)("button",{className:"download",onClick:n,children:[Object(L.jsx)(Se.a,{}),Object(L.jsx)("span",{className:"button_text",children:"Download"})]}),Object(L.jsxs)("button",{className:"continue",onClick:c,children:[Object(L.jsx)(Ae.a,{}),Object(L.jsx)("span",{className:"button_text",children:"Continue"})]})]})]})},Ie=(a(140),a(141),function(){return Object(L.jsxs)("div",{className:"Progress_container",children:[Object(L.jsx)("div",{className:"line-base"}),Object(L.jsx)("div",{className:"line"})]})}),we=a(47),Te=a.n(we),ke=function(e){var t=Object(s.b)(),a=e.collaboratorId,c=e.collaboratorName,r=e.isOpen,i=e.closeDialog,o=e.fromProject,l=e.message,u=e.socket,j=e.isActive,d=e.history,b=Object(n.useRef)(),m=Object(s.c)((function(e){return e.userReducer})),O=Object(s.c)((function(e){return e.projectReducer})),h=O.activeProject,_=O.title;u.onmessage=function(e){var n=JSON.parse(e.data),r=n.data.split("-"),s=r[0];switch(n.type){case"REC_CREATE_PING":"yes"===s?N():i();break;case"REC_CONTINUE_PING":"yes"===s?(t(A({username:a,name:c,avatar:r[1]})),d.push("/editor")):i()}};var N=function(){var e;t((e={username:m.username,collaborator:a,title:"New Project",image:"https://storage.googleapis.com/spring21-sps-18.appspot.com/css.jpg"},function(){var t=Object(f.a)(p.a.mark((function t(a){var n,c,r,s,i,o,l,u,j;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.collaborator,r=e.title,s="/create?username=".concat(n,"&partner=").concat(c,"&title=").concat(r),t.next=6,v.post(s);case 6:i=t.sent,o=i.data,l=g.getInstance(),u=JSON.stringify({id:o,type:C.LOAD_INIT_PROJECTS,data:""}),l.send(u),j=JSON.stringify({id:c,type:C.COLLAB_ADD_PROJECT,data:o}),l.send(j),a(T(n));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),i(),t(w(m.username))};return Object(L.jsx)(te.a,{open:r,children:Object(L.jsxs)(ae.a,{children:[Object(L.jsxs)("div",{className:"ConnectionDialog_container",children:[Object(L.jsx)("span",{className:"ConnectionDialog_header",children:"Connecting"}),Object(L.jsx)("span",{className:"ConnectionDialog_summary",children:"Waiting for ".concat(c," to connect...")}),Object(L.jsx)(Ie,{}),Object(L.jsx)("div",{className:"ConnectionDialog_button_container",children:Object(L.jsx)("button",{className:"ConnectionDialog_button",onClick:function(){var e,t="cancel=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar,"=").concat(h,"=").concat(_);e=JSON.stringify({id:a,type:C.PING_USER,data:t}),u.send(e),i()},children:"CANCEL"})})]}),!j&&Object(L.jsxs)("div",{className:"ConnectionDialog_options",children:[Object(L.jsx)("div",{className:"Icon_container",children:Object(L.jsx)(Te.a,{style:{fontSize:40,color:"gray"}})}),Object(L.jsx)("span",{className:"AlertDialog_message",children:"You cannot collaborate with anyone when you are appearing offline."}),Object(L.jsx)("div",{className:"AlertDialog_button_container",children:Object(L.jsx)("button",{className:"AlertDialog_button",onClick:i,children:"CLOSE"})})]}),j&&Object(L.jsxs)("div",{className:"ConnectionDialog_options",ref:b,children:[Object(L.jsx)("span",{className:"ConnectionDialog_header",children:"Invite to collaborate?"}),Object(L.jsx)("div",{className:"Connection_Body"}),Object(L.jsx)("span",{className:"ConnectionDialog_alert",children:l}),Object(L.jsxs)("div",{className:"Connection_confirm_button_container",children:[Object(L.jsx)("button",{className:"Connection_confirm_button left",onClick:function(){if(j)if(b.current.classList.add("ConnectionDialog_hide_options"),o){var e="continue=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar,"=").concat(h,"=").concat(_),t=JSON.stringify({id:a,type:C.PING_USER,data:e});u.send(t)}else{var n="create=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar),c=JSON.stringify({id:a,type:C.PING_USER,data:n});u.send(c)}},children:"YES"}),Object(L.jsx)("button",{className:"Connection_confirm_button right",onClick:i,children:"NO"})]})]})]})})},Le=(a(142),function(e){var t=e.isOpen,a=e.closeDialog,n=e.message;return Object(L.jsx)(te.a,{open:t,children:Object(L.jsx)(ae.a,{children:Object(L.jsxs)("div",{className:"AlertDialog_container",children:[Object(L.jsx)("div",{className:"AlertIcon_container",children:Object(L.jsx)(Te.a,{style:{fontSize:40,color:"gray"}})}),Object(L.jsx)("span",{className:"AlertDialog_message",children:n}),Object(L.jsx)("div",{className:"AlertDialog_button_container",children:Object(L.jsx)("button",{className:"AlertDialog_button",onClick:a,children:"CLOSE"})})]})})})}),Ue=(a(143),function(e){var t=e.isOpen,a=e.name,c=e.currentOnlineStatus,r=e.closeDialog,i=e.saveProfile,o=e.avatar,l=Object(n.useState)(a),u=Object(O.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(""),m=Object(O.a)(b,2),p=m[0],f=m[1],h=Object(n.useState)(c),v=Object(O.a)(h,2),_=v[0],N=v[1],x=Object(n.useState)(o),g=Object(O.a)(x,2),C=g[0],y=g[1];Object(s.c)((function(e){return e.userReducer})),Object(s.b)();return Object(L.jsx)(te.a,{open:t,children:Object(L.jsx)(ae.a,{children:Object(L.jsxs)("div",{className:"ProfileDialog_container",children:[Object(L.jsx)("span",{className:"ProfileDialog_header",children:"Profile information"}),Object(L.jsxs)("div",{className:"Update_profile_pic",children:[Object(L.jsx)("div",{className:"Profile_current",children:"0"!==C?Object(L.jsx)("img",{src:function(e){switch(e){case"1":return F;case"2":return W;case"3":return Y;case"4":return M;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(C),className:"current_icon",alt:"Current avatar"}):Object(L.jsx)(B.a,{style:{fontSize:90}})}),Object(L.jsxs)("div",{className:"Profile_new",children:[Object(L.jsx)("span",{children:"Select new avatar"}),Object(L.jsxs)("div",{className:"profile_icons",children:[Object(L.jsx)("img",{src:F,className:"new_icon",alt:"Icon Option 1",onClick:function(){return y("1")}}),Object(L.jsx)("img",{src:W,className:"new_icon",alt:"Icon Option 2",onClick:function(){return y("2")}}),Object(L.jsx)("img",{src:Y,className:"new_icon",alt:"Icon Option 3",onClick:function(){return y("3")}}),Object(L.jsx)("img",{src:M,className:"new_icon",alt:"Icon Option 4",onClick:function(){return y("4")}}),Object(L.jsx)("img",{src:K,className:"new_icon",alt:"Icon Option 5",onClick:function(){return y("5")}}),Object(L.jsx)("img",{src:Z,className:"new_icon",alt:"Icon Option 6",onClick:function(){return y("6")}}),Object(L.jsx)("img",{src:$,className:"new_icon",alt:"Icon Option 7",onClick:function(){return y("7")}}),Object(L.jsx)("img",{src:Q,className:"new_icon",alt:"Icon Option 8",onClick:function(){return y("8")}})]})]})]}),Object(L.jsxs)("div",{className:"ProfileDialog_inputs",children:[Object(L.jsxs)("label",{htmlFor:"name_input",className:"input_container input_left",children:[Object(L.jsx)("span",{className:"Profile_input_label",children:"Name"}),Object(L.jsx)("input",{type:"text",name:"name_input",value:j,onChange:function(e){d(e.target.value)},className:"Profile_input"})]}),Object(L.jsxs)("label",{htmlFor:"username_input",className:"input_container input_right",children:[Object(L.jsx)("span",{className:"Profile_input_label",children:"Password"}),Object(L.jsx)("input",{type:"password",name:"username_input",onChange:function(e){f(e.target.value)},className:"Profile_input"})]})]}),Object(L.jsxs)("div",{className:"ProfileDialog_toggle_container",children:[Object(L.jsxs)("label",{htmlFor:"status_toggle",className:"Profile_toggle",children:[Object(L.jsx)("input",{type:"checkbox",id:"status_toggle",name:"status_toggle",checked:_,onChange:function(){return N((function(e){return!e}))},className:"Profile_toggle_input"}),Object(L.jsx)("div",{className:"Profile_toggle_fill"}),Object(L.jsx)("span",{className:"Toggle_label",children:"Display online status"})]}),Object(L.jsx)("span",{className:"online_status_message",children:"If you do not display your online status, you will not be able to see other users who are online"})]}),Object(L.jsxs)("div",{className:"ProfileDialog_button_container",children:[Object(L.jsx)("button",{className:"ProfileDialog_button left",onClick:r,children:"CLOSE"}),Object(L.jsx)("button",{className:"ProfileDialog_button right",onClick:function(){return i(j,p,_,C)},children:"SAVE"})]})]})})})}),De=function(e){var t=e.history,c=Object(s.c)((function(e){return e.userReducer})),r=Object(s.b)(),i=Object(s.c)((function(e){return e.projectReducer})),o=i.activeUsers,l=i.contacts,u=i.onlineProjects,j=i.offlineProjects,d=Object(n.useState)(""),b=Object(O.a)(d,2),m=b[0],h=b[1],_=Object(n.useState)(!1),N=Object(O.a)(_,2),x=N[0],y=N[1],E=Object(n.useState)({}),S=Object(O.a)(E,2),k=S[0],U=S[1],D=Object(n.useState)([]),J=Object(O.a)(D,2),G=J[0],H=J[1],V=Object(n.useState)(u.concat(j)),B=Object(O.a)(V,2),q=B[0],z=B[1],F=Object(n.useState)(""),W=Object(O.a)(F,2),Y=W[0],M=W[1],K=Object(n.useState)(!1),Z=Object(O.a)(K,2),$=Z[0],Q=Z[1],X=Object(n.useState)([]),ee=Object(O.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),ce=Object(O.a)(ne,2),re=ce[0],se=ce[1],ie=Object(n.useState)(""),oe=Object(O.a)(ie,2),le=oe[0],ue=oe[1],je=Object(n.useState)(!0),pe=Object(O.a)(je,2),Oe=pe[0],he=pe[1],_e=Object(n.useState)(!1),Ne=Object(O.a)(_e,2),xe=Ne[0],ge=Ne[1],ye=Object(n.useState)([]),Ee=Object(O.a)(ye,2),Se=Ee[0],Pe=Ee[1],Ae=g.getInstance();Ae.onopen=function(){var e=JSON.stringify({id:c.username,type:C.SIGN_IN,data:""});Ae.send(e);var t=[];q.forEach((function(e){var a=e.projectid;t.push(a)})),t.forEach((function(e){var t=JSON.stringify({id:e,type:C.LOAD_INIT_PROJECTS,data:""});Ae.send(t)}))},Ae.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case C.PING_USER:var a=t.data.split("="),n=a[0],c=a[1],r=a[2],s=a[3];if("cancel"===n){var i=Se.filter((function(e){return e.collaboratorId===c}));Pe(i)}else if("create"===n)Pe([].concat(Object(be.a)(Se),[{collaboratorName:r,collaborator:c,isNewProject:!0,projectTitle:"New Project",type:n,proj:c,collaboratorAvatar:s}]));else{for(var o=a[4],j="",d="",b="",m=0;m<u.length;m++)if(u[m].projectid===o){j=u[m].html,d=u[m].css,b=u[m].js;break}for(var p="0";0<l.length;m++)if(l[0].username===c){p=l[0].avatar;break}var f=a[5],O={collaborator:c,collaboratorName:r,title:f,projectid:o,html:j,css:d,js:b,avatar:p};Pe([].concat(Object(be.a)(Se),[{collaboratorName:r,collaborator:c,isNewProject:!1,projectTitle:O.title,type:n,proj:O,collaboratorAvatar:s}]))}}},window.onbeforeunload=function(){Ae.onclose=function(){}},Object(n.useEffect)((function(){if(c.isVisible){var e=setInterval((function(){var e;r((e={username:c.username,isVisible:c.isVisible,isProjectsPage:!0},function(){var t=Object(f.a)(p.a.mark((function t(a){var n,c,r,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.username,c=e.isVisible,r=e.isProjectsPage,!c){t.next=7;break}return s="/update-active?username=".concat(n),t.next=7,v.get(s);case 7:r&&(a(T(n)),a(w(n)));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),2e3);return function(){clearInterval(e)}}}),[c.username,c.isVisible,r]);var Ie=function(e,t,a){ge(!1),y(!0),U({name:e,username:t,avatar:a,isActive:!0}),r(A({name:e,username:t,avatar:a})),ue("This will CREATE a new project with ".concat(e,"."))},we=function(e){var t=e.split(/[\s,]+/);return t=t.filter((function(e){return""!==e})).map((function(e){return e.toLowerCase()})).join("_")},Te=function(e){var t,a=Object(de.a)(te);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.username===e)return n.isActive}}catch(c){a.e(c)}finally{a.f()}return!1};return Object(n.useEffect)((function(){var e;window.addEventListener("resize",(function(){document.body.classList.add("resize-animation-stopper"),clearTimeout(e),e=setTimeout((function(){document.body.classList.remove("resize-animation-stopper")}),400)}))}),[]),Object(n.useEffect)((function(){ae([]),z([]);var e=l.concat(o),t=u.concat(j),a=[];t.forEach((function(e){var t=e.projectid;a.push(t)})),a.forEach((function(e){var t=JSON.stringify({id:e,type:C.LOAD_INIT_PROJECTS,data:""});Ae.send(t)})),ae(e),z(t)}),[l,u,j,o,Ae]),Object(n.useEffect)((function(){var e=q.filter((function(e){return e.title.includes(m)||e.title.includes(m.toUpperCase())}));return H(e),function(){Oe&&he(!1)}}),[m,q,Oe]),Object(L.jsxs)("div",{className:"Projects_container",children:[Object(L.jsx)(Ce,{name:c.name,email:c.email,handleLogout:function(){r({type:C.SIGN_OUT,payload:null}),r({type:C.CLEAR_REDUCER,payload:null}),t.push("/")},displayProfile:function(){se(!0)},notifications:Se,avatar:c.avatar,accept:function(e,t){var a=Se.filter((function(t){return t!==e}));Pe(a),t()},acceptCallBack:function(e,a){if("create"===e){var n=JSON.stringify({id:a,type:C.REC_CREATE_PING,data:"yes"});Ae.send(n),r(T(c.username))}else{var s="yes-".concat(c.avatar),i=JSON.stringify({id:a.collaborator,type:C.REC_CONTINUE_PING,data:s});Ae.send(i),r(P({projectid:a.projectid,collaborator:a.collaborator,collaboratorName:a.collaboratorName,html:a.html,css:a.css,js:a.js,title:a.title,collaboratorAvatar:a.avatar})),t.push("/editor")}},declineCallBack:function(e,t){if("create"===t){var a=JSON.stringify({id:e,type:C.REC_CREATE_PING,data:"no"});Ae.send(a)}else{var n=JSON.stringify({id:e,type:C.REC_CONTINUE_PING,data:"no"});Ae.send(n)}},decline:function(e,t){var a=Se.filter((function(t){return t!==e}));Pe(a),t()},history:t}),Object(L.jsxs)("div",{className:"Projects_main",children:[Object(L.jsxs)("div",{className:"Projects_content",children:[Object(L.jsx)(ve,{query:m,onChange:h}),Object(L.jsx)("span",{className:"Projects_label",children:"Recent Projects"}),!Oe&&0===q.length&&Object(L.jsxs)("div",{className:"card Projects_no_result",children:[Object(L.jsx)("span",{className:"no_result_summary",children:"No projects"}),Object(L.jsx)("span",{className:"no_result_message",children:"You have not collaborated on any projects with anyone. Please select any active user to start collaborating on your first project."})]}),!Oe&&0!==q.length&&0===G.length&&Object(L.jsxs)("div",{className:"card Projects_no_result",children:[Object(L.jsx)("span",{className:"no_result_summary",children:"No results found"}),Object(L.jsx)("span",{className:"no_result_message",children:"You do not have any project that matches the given name."})]}),!Oe&&G.length>0&&Object(L.jsx)("div",{className:"Projects_recent",children:G.map((function(e){return Object(L.jsx)(Re,{title:e.title,image:e.image,collaboratorName:e.collaboratorName,downloadProject:function(){return function(e,t,n,c){var r=we(e),s=a(144)(),i=s.folder(r);i.file("index.js",c),i.file("style.css",n),i.file("index.html",t),s.generateAsync({type:"blob"}).then((function(e){Object(me.saveAs)(e,"".concat(r,".zip"))}))}(e.projectid,e.html,e.css,e.js)},continueProject:function(){return function(e,t,a,n,c,s,i){if(Te(a)){ge(!0),y(!0);for(var o="0",u=!0,j=0;j<l.length;j++)if(l[j].username===a){o=l[j].avatar,u=l[j].isActive;break}U({name:n,username:a,avatar:o,isActive:u}),r(A({name:n,username:a,avatar:o})),r(P({projectid:e,collaborator:a,collaboratorName:n,html:c,css:s,js:i,title:t,collaboratorAvatar:o})),ue("This will send an invitation to ".concat(n," to continue working on ").concat(t))}else Q(!0),M("".concat(n," is currently offline. You can only edit \n\t      this project when you are both online."))}(e.projectid,e.title,e.collaborator,e.collaboratorName,e.html,e.css,e.js)}},e.projectid)}))})]}),Object(L.jsx)("div",{className:"Projects_sidebar",children:Object(L.jsx)(fe,{activeUsers:o,contacts:l,onActiveUserClick:Ie,onRecentUserClick:function(e,t,a,n){a?Ie(t,e,n):(Q(!0),M("".concat(t," is currently offline. You can only CREATE new projects with ACTIVE users.")))},isVisible:c.isVisible})})]}),x&&Object(L.jsx)(ke,{collaboratorName:k.name,collaboratorId:k.username,isActive:c.isVisible,isOpen:x,fromProject:xe,closeDialog:function(){return function(e){y(!1),e&&r(R()),ue(""),U({})}(xe)},message:le,socket:Ae,history:t}),$&&Object(L.jsx)(Le,{isOpen:$,closeDialog:function(){M(""),Q(!1)},message:Y}),re&&Object(L.jsx)(Ue,{isOpen:re,name:c.name,currentOnlineStatus:c.isVisible,closeDialog:function(){return se(!1)},saveProfile:function(e,t,a,n){var s,i;c.name!==e&&r((s={username:c.username,name:e},function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.username,n=s.name,c="/change-name?username=".concat(a,"&name=").concat(n),e.next=5,v.get(c);case 5:t({type:C.CHANGE_NAME,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c.avatar!==n&&r(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.avatar,r="/change-avatar?username=".concat(n,"&avatar=").concat(c),t.next=5,v.get(r);case 5:a({type:C.CHANGE_AVATAR,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,avatar:n})),c.isVisible!==a&&r((i={username:c.username,visibility:a},function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.username,n=i.visibility,c="/change-vis?username=".concat(a,"&visibility=").concat(n),e.next=5,v.get(c);case 5:t(I(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.length>=8&&t.length<=60&&r(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.password,r="/change-pass?username=".concat(n,"&password=").concat(c),t.next=5,v.get(r);case 5:a({type:C.CHANGE_PASSWORD,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,password:t})),se(!1)},avatar:c.avatar})]})},Je=Object(b.a)(),Ge=Object(j.a)({palette:{type:"light",primary:{main:"#6E4AB1"},secondary:{main:"#000000"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:400,fontWeightRegular:500,fontWeightMedium:600}});var He=function(){return Object(L.jsx)(d.a,{theme:Ge,children:Object(L.jsxs)(l.a,{history:Je,children:[Object(L.jsx)(u.a,{path:"/",exact:!0,component:U}),Object(L.jsx)(u.a,{path:"/editor",exact:!0,component:je}),Object(L.jsx)(u.a,{path:"/projects",exact:!0,component:De})]})})},Ve=a(5),Be={activeProject:"",html:"",css:"",js:"",title:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0",onlineProjects:[],offlineProjects:[],activeUsers:[],contacts:[]},qe={isSignedIn:!1,username:"",email:"",name:"",isVisible:!0,avatar:"0"},ze=Object(i.c)({projectReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.CHOOSE_PROJECT:return Object(Ve.a)(Object(Ve.a)({},e),{},{activeProject:t.payload.projectid,html:t.payload.html,css:t.payload.css,js:t.payload.js,collaboratorName:t.payload.collaboratorName,title:t.payload.title,collaboratorId:t.payload.collaborator,collaboratorAvatar:t.payload.collaboratorAvatar});case C.CLEAR_PROJECT:return Object(Ve.a)(Object(Ve.a)({},e),{},{html:"",css:"",js:"",collaboratorName:"",title:"",activeProject:"",collaboratorId:"",collaboratorAvatar:"0"});case C.CHOOSE_USER:return Object(Ve.a)(Object(Ve.a)({},e),{},{collaboratorId:t.payload});case C.SELECT_COLLAB:return Object(Ve.a)(Object(Ve.a)({},e),{},{collaboratorId:t.payload.username,collaboratorName:t.payload.name,collaboratorAvatar:t.payload.avatar});case C.LOAD_INIT_PROJECTS:case C.UPDATE_PROJECTS:return Object(Ve.a)(Object(Ve.a)({},e),{},{onlineProjects:t.payload.onlineProjects,offlineProjects:t.payload.offlineProjects});case C.UPDATE_USERS:return Object(Ve.a)(Object(Ve.a)({},e),{},{contacts:t.payload.contacts,activeUsers:t.payload.activeUsers});case C.CLEAR_REDUCER:return Object(Ve.a)(Object(Ve.a)({},e),{},{activeProject:"",onlineProjects:[],title:"",offlineProjects:[],activeUsers:[],contacts:[],html:"",css:"",js:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0"});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.SIGN_IN:return Object(Ve.a)(Object(Ve.a)({},e),{},{isSignedIn:!0,username:t.payload.username,email:t.payload.email,name:t.payload.name,avatar:t.payload.avatar,isVisible:t.payload.isVisible});case C.SIGN_OUT:return Object(Ve.a)(Object(Ve.a)({},e),{},{isSignedIn:!1,username:"",email:"",activeProject:"",avatar:"0"});case C.CHANGE_VISIBILITY:return Object(Ve.a)(Object(Ve.a)({},e),{},{isVisible:t.payload});case C.CHANGE_NAME:return Object(Ve.a)(Object(Ve.a)({},e),{},{name:t.payload});case C.CHANGE_AVATAR:return Object(Ve.a)(Object(Ve.a)({},e),{},{avatar:t.payload});default:return e}}}),Fe=Object(i.d)(ze,Object(i.a)(o.a));r.a.render(Object(L.jsx)(s.a,{store:Fe,children:Object(L.jsx)(He,{})}),document.getElementById("root"))},99:function(e,t,a){}},[[154,1,2]]]);
//# sourceMappingURL=main.bf5c2056.chunk.js.map