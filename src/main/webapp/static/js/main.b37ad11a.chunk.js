(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{118:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(12),r=a.n(c),s=a(10),i=a(33),o=a(70),l=(a(99),a(87)),u=a(8),j=a(86),d=a(180),b=a(85),m=a(6),p=a.n(m),O=a(17),f=a(3),h=a(73),v="https://spring21-sps-18.appspot.com",_=a.n(h).a.create({baseURL:v}),N={SOCKET:"wss://spring21-sps-18.appspot.com/"};console.log(v);var x=function(){var e;return{getInstance:function(){return e||(e=new WebSocket(N.SOCKET)),e}}}(),g={SIGN_IN:"SIGN_IN",SIGN_OUT:"SIGN_OUT",UPDATE_EDIT:"UPDATE_EDIT",UPDATE_LOCATION:"UPDATE_LOCATION",COLLAB:"COLLAB_ADD_PROJECT",CHANGE_PASSWORD:"CHANGE_PASSWORD",CHANGE_VISIBILITY:"CHANGE_VISIBILITY",CHANGE_AVATAR:"CHANGE_AVATAR",CHANGE_NAME:"CHANGE_NAME",CHOOSE_PROJECT:"CHANGE_PROJECT",CHOOSE_USER:"CHOOSE_USER",UPDATE_PROJECTS:"UPDATE_PROJECTS",UPDATE_USERS:"UPDATE_USERS",CLEAR_REDUCER:"CLEAR_REDUCER",CLEAR_PROJECT:"CLEAR_PROJECT",LOAD_INIT_PROJECTS:"LOAD_INIT_PROJECTS",CREATE_PROJECT:"CREATE_PROJECT",SEND_HTML:"SEND_HTML",SEND_CSS:"SEND_CSS",SEND_JS:"SEND_JS",SEND_TITLE:"SEND_TITLE",REC_HTML:"REC_HTML",REC_CSS:"REC_CSS",REC_JS:"REC_JS",REC_TITLE:"REC_TITLE",PING_USER:"PING_USER",REC_CREATE_PING:"REC_CREATE_PING",REC_CONTINUE_PING:"REC_CONTINUE_PING",SEND_LEFT:"SEND_LEFT",REC_LEFT:"REC_LEFT",SELECT_COLLAB:"SELECT_COLLAB"},y=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.bothActive===e){var r={collaborator:c.collaborator,collaboratorName:c.collaboratorName,projectid:c.projectid,title:c.title,html:c.html,css:c.css,js:c.js,collaboratorAvatar:c.collaboratorAvatar,image:c.image};a.push(r)}}return a},C=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.isContact===e){var r={username:c.username,name:c.name,isActive:c.isActive,avatar:c.avatar};a.push(r)}}return a},E=function(e){return{type:g.SIGN_IN,payload:e}},S=function(e){return{type:g.CHOOSE_PROJECT,payload:e}},A=function(e){return{type:g.UPDATE_LOCATION,payload:e}},P=function(e){return{type:g.SELECT_COLLAB,payload:e}},R=function(e){return{type:g.UPDATE_EDIT,payload:e}},I=function(){return{type:g.CLEAR_PROJECT,payload:null}},w=function(e){return{type:g.CHANGE_VISIBILITY,payload:e}},T=function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/get-users?username=".concat(e),t.next=4,_.get(n);case 4:c=t.sent,a({type:g.UPDATE_USERS,payload:{contacts:C(!0,c.data),activeUsers:C(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/load?username=".concat(e),t.next=4,_.get(n);case 4:c=t.sent,a({type:g.UPDATE_PROJECTS,payload:{onlineProjects:y(!0,c.data),offlineProjects:y(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=(a(118),a(0)),k=function(e){var t=e.history,a=Object(s.b)(),c=Object(n.useState)(""),r=Object(f.a)(c,2),i=r[0],o=r[1],l=Object(n.useState)(!1),u=Object(f.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(""),m=Object(f.a)(b,2),h=m[0],v=m[1],N=Object(n.useState)(""),g=Object(f.a)(N,2),y=g[0],C=g[1],S=Object(n.useState)(!1),A=Object(f.a)(S,2),P=A[0],R=A[1],I=Object(n.useState)(""),w=Object(f.a)(I,2),k=w[0],D=w[1],J=Object(n.useState)(""),G=Object(f.a)(J,2),H=G[0],B=G[1],V=Object(n.useState)(!1),q=Object(f.a)(V,2),z=q[0],M=q[1],W=Object(n.useState)(""),Y=Object(f.a)(W,2),F=Y[0],K=Y[1],Z=Object(n.useState)(""),$=Object(f.a)(Z,2),Q=$[0],X=$[1],ee=Object(n.useState)(!1),te=Object(f.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(""),re=Object(f.a)(ce,2),se=re[0],ie=re[1],oe=Object(n.useState)(!0),le=Object(f.a)(oe,2),ue=le[0],je=le[1],de=Object(n.useState)(!1),be=Object(f.a)(de,2),me=be[0],pe=be[1],Oe=Object(n.useRef)(),fe=Object(n.useRef)();x.getInstance().onopen=function(){console.log("connection successful")};var he=function(){ue||(je(!0),pe(!1),M(!1),ne(!1),R(!1),d(!1),Oe.current.classList.add("visible_sign_in"),Oe.current.classList.remove("hidden_sign_in"),fe.current.classList.remove("visible_sign_up"),fe.current.classList.add("hidden_sign_up"))},ve=function(){me||(je(!1),pe(!0),M(!1),ne(!1),R(!1),d(!1),Oe.current.classList.remove("visible_sign_in"),Oe.current.classList.add("hidden_sign_in"),fe.current.classList.add("visible_sign_up"),fe.current.classList.remove("hidden_sign_up"))},_e=function(e,t){"Enter"===e.key&&t()},Ne=function(e,t,a,n,c){var r=!1;""===e?(d(!0),v("Username cannot be empty"),r=!0):(d(!1),v("")),t.length<8||t.length>60?(R(!0),D("Password must be greater than 8 characters and less than 60 characters"),r=!0):(R(!1),D("")),""!==a&&function(e){return new RegExp(['^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s','@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]',"{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"]).test(String(e).toLowerCase())}(a)?(M(!1),K("")):(M(!0),K("Please enter a valid email address format"),r=!0),""===n?(ne(!0),ie("Name cannot be empty"),r=!0):(ne(!1),ie("")),r||c()},xe=function(e,t,a){var n=!1;""===e?(d(!0),v("Username cannot be empty"),n=!0):(d(!1),v("")),""===t?(R(!0),D("Password cannot be empty"),n=!0):(R(!1),D("")),n||a()},ge=function(){var e=Object(O.a)(p.a.mark((function e(n,c,r,s){var i,o,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=encodeURIComponent(n),c=encodeURIComponent(c),s=encodeURIComponent(s),e.next=6,_.get("/sign-up?username=".concat(n,"\n              &password=").concat(c,"&email=").concat(r,"&name=").concat(s));case 6:if(200===(i=e.sent).status){e.next=17;break}return d(!0),v("Unable to sign up at this time please try again"),R(!0),D("Unable to sign up at this time please try again"),M(!0),K("Unable to sign up at this time please try again"),ne(!0),ie("Unable to sign up at this time please try again"),e.abrupt("return");case 17:if(o=i.data,l=o[0],u=o[1],l&&(d(!0),v("Username is already taken")),u&&(M(!0),K("Email address has already been used")),!l&&!u){e.next=24;break}return e.abrupt("return");case 24:a(E({username:n,email:r,name:s,avatar:"0",isVisible:!0})),a(T(n)),a(L(n)),t.push("/projects"),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),e.t0&&(d(!0),v(e.t0.message),R(!0),D(e.t0.message));case 34:case 35:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,a,n,c){return e.apply(this,arguments)}}(),ye=function(){var e=Object(O.a)(p.a.mark((function e(n,c){var r,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(n),c=encodeURIComponent(c),e.prev=2,e.next=5,_.get("/sign-in?username=".concat(n,"\n              &password=").concat(c));case 5:200===(r=e.sent).status?(s=r.data,"true"===s[0]?(i="true"===s[3],a(E({username:n,email:s[1],name:s[2],isVisible:i,avatar:s[4]})),a(T(n)),a(L(n)),t.push("/projects")):(d(!0),v("Username or password entered incorrectly"),R(!0),D("Username or password entered incorrectly"))):(d(!0),v("Unable to sign in at this time please try again"),R(!0),D("Unable to sign in at this time please try again")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0&&(d(!0),v(e.t0.message),R(!0),D(e.t0.message));case 13:case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"Auth_container",children:[Object(U.jsx)("div",{className:"Auth_header",children:Object(U.jsx)("div",{className:"nine",children:Object(U.jsxs)("h1",{children:["COLLABCODE",Object(U.jsx)("span",{children:" code, create, and collaborate"})]})})}),Object(U.jsx)("div",{className:"Auth_main",children:Object(U.jsxs)("div",{className:"Auth_content card",children:[Object(U.jsx)("div",{className:"Auth_buttons_container",children:ue?Object(U.jsx)("button",{className:"Auth_button left_button",onClick:he,children:"SIGN IN"}):Object(U.jsx)("button",{className:"Auth_button left_button ",onClick:ve,children:"SIGN UP"})}),Object(U.jsxs)("div",{className:"Signin_signup",children:[Object(U.jsx)("div",{className:"dummy_sign_in visible_sign_in",ref:Oe,children:Object(U.jsxs)("div",{className:"user_details",children:[Object(U.jsxs)("div",{className:"input",children:[Object(U.jsx)("input",{type:"text",name:"username_input",className:"Auth_input",required:"required",onChange:function(e){return o(e.target.value)},value:i,autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(i,y,(function(){return ye(i,y)}))}))}}),Object(U.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(U.jsx)("span",{className:"error",children:h}),Object(U.jsxs)("div",{className:"input",children:[Object(U.jsx)("input",{type:"password",required:"required",name:"password_input",className:"Auth_input",onChange:function(e){return C(e.target.value)},value:y,autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(i,y,(function(){return ye(i,y)}))}))}}),Object(U.jsx)("span",{className:"placeholder",children:"Password"})]}),P&&Object(U.jsx)("span",{className:"error",children:k}),Object(U.jsx)("div",{className:"Sign_in_button_container",children:Object(U.jsx)("button",{className:"Sign_up_button",onClick:function(){return xe(i,y,(function(){return ye(i,y)}))},children:"Log In"})})]})}),Object(U.jsx)("div",{className:"dummy_sign_up hidden_sign_up",ref:fe,children:Object(U.jsxs)("div",{className:"user_details",children:[Object(U.jsxs)("div",{className:"input",children:[Object(U.jsx)("input",{type:"text",id:"name_input",required:"required",label:"name_input",className:"Auth_input",onChange:function(e){return X(e.target.value)},value:Q,autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return Ne(i,y,H,Q,(function(){return ge(i,y,H,Q)}))}))}}),Object(U.jsx)("span",{className:"placeholder",children:"Name"})]}),ae&&Object(U.jsx)("span",{className:"error",children:se}),Object(U.jsxs)("div",{className:"input",children:[Object(U.jsx)("input",{type:"text",label:"username_input",required:"required",className:"Auth_input",value:i,onChange:function(e){return o(e.target.value)},autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(i,y,(function(){return ye(i,y)}))}))}}),Object(U.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(U.jsx)("span",{className:"error",children:h}),Object(U.jsxs)("div",{className:"input",children:[Object(U.jsx)("input",{type:"password",required:"required",label:"password_input",className:"Auth_input",value:y,onChange:function(e){return C(e.target.value)},autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(i,y,(function(){return ye(i,y)}))}))}}),Object(U.jsx)("span",{className:"placeholder",children:"Password"})]}),P&&Object(U.jsx)("span",{className:"error",children:k}),Object(U.jsxs)("div",{className:"input",children:[Object(U.jsx)("input",{type:"text",required:"required",label:"email_input",className:"Auth_input",value:H,onChange:function(e){return B(e.target.value)},autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return Ne(i,y,H,Q,(function(){return ge(i,y,H,Q)}))}))}}),Object(U.jsx)("span",{className:"placeholder",children:"Email"})]}),z&&Object(U.jsx)("span",{className:"error",children:F}),Object(U.jsx)("div",{className:"Sign_up_button_container",children:Object(U.jsx)("button",{className:"Sign_up_button",onClick:function(){return Ne(i,y,H,Q,(function(){return ge(i,y,H,Q)}))},children:"Sign Up"})})]})})]}),ue?Object(U.jsx)("h5",{children:Object(U.jsx)("span",{children:"New to CollabCode?"})}):Object(U.jsx)("h5",{children:Object(U.jsx)("span",{children:"Already have an account?"})}),ue?Object(U.jsx)("button",{className:"Auth_button right_button ",onClick:ve,children:"SIGN UP"}):Object(U.jsx)("button",{className:"Auth_button right_button",onClick:he,children:"SIGN IN"})]})})]})},D=a(74),J=(a(120),a(121),a(122),a(123),a(124),a(125),function(e){var t=e.language,a=e.displayName,n=e.value,c=e.socket,r=e.projectid;return Object(U.jsxs)("div",{className:"Pane_container",children:[Object(U.jsx)("div",{className:"Pane_title",children:a}),Object(U.jsx)(D.Controlled,{onBeforeChange:function(e,t,n){var s="SEND_"+a,i=JSON.stringify({id:r,type:s,data:n});c.send(i)},value:n,className:"Pane_code_mirror_wrapper",options:{lineWrapping:!0,lint:!0,mode:t,lineNumbers:!0,theme:"material"}})]})}),G=(a(126),a(47)),H=a.n(G),B=a(22),V=a.n(B),q=a(76),z=a.n(q),M=(a(127),a.p+"static/media/avatar-1.206df2ea.png"),W=a.p+"static/media/avatar-2.ce1e904e.png",Y=a.p+"static/media/avatar-3.ba79463c.png",F=a.p+"static/media/avatar-4.607dde39.png",K=a.p+"static/media/avatar-5.1cc5e5b8.png",Z=a.p+"static/media/avatar-6.af51b5dd.png",$=a.p+"static/media/avatar-7.61998959.png",Q=a.p+"static/media/avatar-8.d272d87a.png",X=function(e){var t=e.name,a=e.avatar,c=e.email,r=e.side,s=e.active,i=e.isUser,o=e.handleSave,l=e.handleReturn,u=Object(n.useState)(!1),j=Object(f.a)(u,2),d=j[0],b=j[1],m=Object(n.useRef)(),p=Object(n.useRef)(),O=function(e){b((function(e){return!e})),e()};return Object(n.useEffect)((function(){m.current.style.display=d?"flex":"none";var e=function(e){m.current&&!m.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&d&&b((function(e){return!e}))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[d]),Object(U.jsxs)("div",{className:"Profile_container ".concat("R"===r?"Profile_flipped":""),children:[Object(U.jsxs)("div",{className:"Profile_image ".concat(i?"":"other_user"),ref:p,onClick:function(){return b((function(e){return!e}))},children:["0"!==a?Object(U.jsx)("img",{src:function(){switch(a){case"1":return M;case"2":return W;case"3":return Y;case"4":return F;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"Profile_icon",alt:"avatar"}):Object(U.jsx)(V.a,{style:{fontSize:40}}),Object(U.jsx)("div",{className:"Profile_activity ".concat(s?"active_user":"inactive_user"," ").concat("R"===r?"right":"left")}),"      "]}),Object(U.jsxs)("div",{className:"Profile_details  ".concat("R"===r?"details_right":"details_left"),children:[Object(U.jsx)("span",{className:"Profile_name",children:t}),Object(U.jsx)("span",{className:"Profile_email",children:c})]}),i?Object(U.jsxs)("div",{className:"Editor_profile_menu",ref:m,children:[Object(U.jsx)("span",{className:"Editor_options",children:"Options"}),Object(U.jsxs)("ul",{children:[Object(U.jsxs)("li",{onClick:function(){return O(o)},children:[Object(U.jsx)(z.a,{className:"Editor_profile_menu_icon"}),Object(U.jsx)("span",{children:"Save project"})]}),Object(U.jsxs)("li",{onClick:function(){return O(l)},children:[Object(U.jsx)(H.a,{className:"Editor_profile_menu_icon"}),Object(U.jsx)("span",{children:"Return to projects page"})]})]})]}):Object(U.jsx)("div",{ref:m})]})},ee=function(e){var t=e.title,a=e.projectName,n=e.handleSave,c=e.history,r=e.socket,i=e.projectid,o=e.collaborator,l=e.collaboratorName,u=e.collaboratorAvatar,j=Object(s.c)((function(e){return e.userReducer})),d=Object(s.b)(),b=function(){n();var e=JSON.stringify({id:o,type:g.SEND_LEFT,data:l});r.send(e),d(R(!1)),c.push("/projects"),d(I())};return Object(U.jsxs)("div",{className:"Navbar_container",children:[Object(U.jsx)(X,{name:l,avatar:u,email:"",side:"L",active:!0,isUser:!1,handleReturn:b,handleSave:n}),Object(U.jsx)("div",{className:"Navbar_title_container",children:Object(U.jsx)("input",{type:"text",className:"Navbar_title",placeholder:t,name:"title_input",autoComplete:"off",id:"title_input",value:a,onChange:function(e){var t=JSON.stringify({type:g.SEND_TITLE,id:i,data:e.target.value});r.send(t)}})}),Object(U.jsx)(X,{name:j.name,avatar:j.avatar,side:"R",active:!0,isUser:!0,handleReturn:b,handleSave:n})]})},te=(a(129),a(181)),ae=a(179),ne=(a(130),a(131),function(){return Object(U.jsx)("div",{className:"StaticProgress_container",children:Object(U.jsx)("div",{className:"static_line"})})}),ce=a(48),re=a.n(ce),se=function(e){var t=e.collaboratorName,a=e.open;return Object(U.jsx)(te.a,{open:a,children:Object(U.jsx)(ae.a,{children:Object(U.jsxs)("div",{className:"StopCollab_container",children:[Object(U.jsx)("div",{className:"dialog_icon",children:Object(U.jsx)(re.a,{style:{fontSize:40}})}),Object(U.jsxs)("span",{className:"StopCollab_header",children:[t," has stopped  editing. Your work is being saved now..."]}),Object(U.jsx)(ne,{})]})})})},ie=a(77),oe=a.n(ie),le=a(78),ue=a.n(le),je=function(e){var t=e.history,a=Object(s.b)(),c=Object(s.c)((function(e){return e.projectReducer})),r=c.html,i=c.css,o=c.js,l=c.title,u=c.activeProject,j=c.collaboratorId,d=c.collaboratorName,b=c.collaboratorAvatar,m=Object(n.useState)(r),h=Object(f.a)(m,2),v=h[0],N=h[1],y=Object(n.useState)(i),C=Object(f.a)(y,2),E=C[0],S=C[1],A=Object(n.useState)(o),P=Object(f.a)(A,2),w=P[0],T=P[1],L=Object(n.useState)(u),k=Object(f.a)(L,2),D=k[0],G=(k[1],Object(n.useState)("")),H=Object(f.a)(G,2),B=H[0],V=H[1],q=Object(n.useState)(l),z=Object(f.a)(q,2),M=z[0],W=z[1],Y=Object(n.useState)(!1),F=Object(f.a)(Y,2),K=F[0],Z=F[1],$=x.getInstance();$.onmessage=function(e){var n=JSON.parse(e.data);switch(n.type){case g.SEND_HTML:N(n.data);break;case g.SEND_CSS:S(n.data);break;case g.SEND_JS:T(n.data);break;case g.SEND_TITLE:W(n.data);break;case g.SEND_LEFT:Q(),Z(!0),setTimeout((function(){a(R(!1)),a(I()),t.push("/projects")}),2e3)}};var Q=function(){oe()(document.querySelector("#render_pane")).then((function(e){e.toBlob((function(e){var t,n=new ue.a;n.append("image",e),a((t={html:v,css:E,js:w,projectid:D,title:M,image:n},function(){var e=Object(O.a)(p.a.mark((function e(a){var n,c,r,s,i,o,l,u,j,d,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(t.html),c=encodeURIComponent(t.css),r=encodeURIComponent(t.js),s=encodeURIComponent(t.title),i=t.projectid,o=t.image,l="/save-html?projectid=".concat(i,"&html=").concat(n),u="/save-css?projectid=".concat(i,"&css=").concat(c),j="/save-js?projectid=".concat(i,"&js=").concat(r),d="/update-title?projectid=".concat(i,"&title=").concat(s),b="/save-image?projectid=".concat(i),e.next=13,_.get(l);case 13:return e.next=15,_.get(u);case 15:return e.next=17,_.get(j);case 17:return e.next=19,_.get(d);case 19:return e.next=21,_.post(b,o,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data"}});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}))}))};return Object(n.useEffect)((function(){var e=setTimeout((function(){V("\n      <html>\n        <body>".concat(v,"</body>\n        <style>").concat(E,"</style>\n        <script>").concat(w,"<\/script>\n      </html>\n      "))}),250);return function(){return clearTimeout(e)}}),[v,E,w]),Object(U.jsxs)("div",{className:"Editor_container",children:[Object(U.jsx)(ee,{history:t,projectName:M,socket:$,title:l,collaborator:j,collaboratorName:d,collaboratorAvatar:b,projectid:u,handleSave:Q}),Object(U.jsxs)("div",{className:"Editor_pane Editor_top_pane",id:"render_pane",children:[Object(U.jsx)(J,{language:"xml",displayName:"HTML",value:v,socket:$,projectid:u}),Object(U.jsx)(J,{language:"css",displayName:"CSS",value:E,socket:$,projectid:u}),Object(U.jsx)(J,{language:"javascript",displayName:"JS",value:w,socket:$,projectid:u})]}),Object(U.jsx)("div",{id:"render_pane",className:"Editor_pane Editor_bottom_pane",children:Object(U.jsx)("iframe",{title:"output",srcDoc:B,sandbox:"allow-scripts allow-same-origin",width:"100%",height:"100%"})}),Object(U.jsx)(se,{collaboratorName:d,open:K})]})},de=a(28),be=a(79),me=(a(132),a(133),a(134),function(e){var t=e.name,a=e.isActive,c=e.onClick,r=e.avatar,s=Object(n.useRef)();Object(n.useEffect)((function(){var e;(e=s.current).offsetWidth<e.scrollWidth&&s.current.classList.add("marquee")}));return Object(U.jsxs)("div",{className:"User_container",onClick:c,children:[Object(U.jsx)("div",{className:"User_image_container",children:Object(U.jsxs)("div",{className:"User_image",children:["0"!==r?Object(U.jsx)("img",{src:function(){switch(r){case"1":return M;case"2":return W;case"3":return Y;case"4":return F;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(U.jsx)(V.a,{style:{fontSize:40}}),Object(U.jsx)("div",{className:"User_activity",children:a?Object(U.jsx)("div",{className:"active"}):Object(U.jsx)("div",{className:"inactive"})})]})}),Object(U.jsx)("span",{className:"User_name",ref:s,children:t})]})}),pe=function(e){var t=e.activeUsers,a=e.contacts,n=e.onActiveUserClick,c=e.onRecentUserClick,r=e.isVisible,s=t.map((function(e){return Object(U.jsx)(me,{name:e.name,isActive:e.isActive,onClick:function(){return n(e.name,e.username,e.avatar)},avatar:e.avatar},e.username)})),i=a.map((function(e){return Object(U.jsx)(me,{name:e.name,isActive:e.isActive,onClick:function(){return c(e.username,e.name,e.isActive,e.avatar)},avatar:e.avatar},e.username)}));return Object(U.jsxs)("div",{className:"ConnectedUsers_container card",children:[Object(U.jsx)("span",{className:"ConnectedUsers_label",children:"Recent contacts"}),i.length>0&&r?i:Object(U.jsx)("span",{className:"no_users",children:"No recent contacts"}),Object(U.jsx)("span",{className:"ConnectedUsers_label top",children:"Active users"}),s.length>0&&r?s:Object(U.jsx)("span",{className:"no_users",children:"No active users"})]})},Oe=(a(135),a(80)),fe=a.n(Oe),he=function(e){var t=e.query,a=e.onChange,c=Object(n.useRef)(),r=Object(n.useState)(!1),s=Object(f.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){i?c.current.classList.add("Searchbar_container_focused"):c.current.classList.remove("Searchbar_container_focused")}),[i]),Object(U.jsxs)("div",{className:"Searchbar_container card",ref:c,children:[Object(U.jsx)("div",{className:"Searchbar_icon_container",children:Object(U.jsx)(fe.a,{className:"Searchbar_icon"})}),Object(U.jsx)("input",{type:"text",value:t,onChange:function(e){a(e.target.value)},placeholder:"Search for a project",onFocus:function(){return o(!0)},onBlur:function(){return o(!1)},className:"Searchbar_input"})]})},ve=(a(136),a(81)),_e=a.n(ve),Ne=(a(137),function(e){var t,a=e.collaboratorName,n=e.accept,c=e.decline,r=e.isNewProject,s=e.projectTitle,i=e.collaboratorAvatar;return Object(U.jsxs)("div",{className:"Notification_container",children:[Object(U.jsx)("div",{className:"user_icon",children:"0"!==i?Object(U.jsx)("img",{src:function(){switch(i){case"1":return M;case"2":return W;case"3":return Y;case"4":return F;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(U.jsx)(V.a,{style:{fontSize:40}})}),Object(U.jsxs)("div",{className:"Notification_side",children:[Object(U.jsx)("span",{className:"Notification_title",children:(t=r,t?"".concat(a," is inviting you to CREATE a new project"):"".concat(a," is inviting you to CONTINUE working on ").concat(s))}),Object(U.jsxs)("div",{className:"Notification_buttons",children:[Object(U.jsx)("button",{className:"Notification_button_decline",onClick:c,children:"DECLINE"}),Object(U.jsx)("button",{className:"Notification_button_accept",onClick:n,children:"ACCEPT"})]})]})]})}),xe=a.p+"static/media/banner.c68bbcc5.png",ge=function(e){var t=e.name,a=e.email,c=e.handleLogout,r=e.displayProfile,s=e.notifications,i=e.avatar,o=e.accept,l=e.decline,u=e.acceptCallBack,j=e.declineCallBack,d=e.displayAbout,b=Object(n.useState)(!1),m=Object(f.a)(b,2),p=m[0],O=m[1],h=Object(n.useState)(!1),v=Object(f.a)(h,2),_=v[0],N=v[1],x=Object(n.useRef)(),g=Object(n.useRef)(),y=Object(n.useRef)(),C=Object(n.useRef)(),E=function(e){O((function(e){return!e})),e()};return Object(n.useEffect)((function(){g.current.style.display=_?"flex":"none";var e=function(e){g.current&&!g.current.contains(e.target)&&C.current&&!C.current.contains(e.target)&&_&&N(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[_]),Object(n.useEffect)((function(){0==s.length?document.title="COLLABCODE":document.title="(".concat(s.length,") COLLABCODE")}),[s]),Object(n.useEffect)((function(){x.current.style.display=p?"flex":"none";var e=function(e){x.current&&!x.current.contains(e.target)&&y.current&&!y.current.contains(e.target)&&p&&O(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[p]),Object(U.jsxs)("div",{className:"Header_container",children:[Object(U.jsx)("div",{className:"Banner",children:Object(U.jsx)("img",{src:xe,alt:"Banner",className:"main_icon",onClick:d})}),Object(U.jsxs)("div",{className:"Header_user",children:[Object(U.jsxs)("div",{className:"Header_notifications_icon ".concat(s.length>0&&!_?"notification_animation":""),ref:C,children:[Object(U.jsx)(_e.a,{style:{fontSize:40},onClick:function(){return N((function(e){return!e}))}}),s.length>0&&Object(U.jsx)("div",{className:"Notifications_count_container",children:Object(U.jsx)("span",{className:"Notifications_count",children:s.length})})]}),Object(U.jsx)("div",{className:"Header_user_icon",ref:y,onClick:function(){return O((function(e){return!e}))},children:"0"!==i?Object(U.jsx)("img",{src:function(){switch(i){case"1":return M;case"2":return W;case"3":return Y;case"4":return F;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(U.jsx)(V.a,{style:{fontSize:40}})}),Object(U.jsx)("div",{className:"Header_notifications menu",ref:g,children:s.length>0?Object(U.jsxs)("div",{className:"Notification_main",children:[Object(U.jsx)("span",{className:"Notifications_title",children:"Notifications"}),s.map((function(e){return Object(U.jsx)(Ne,{collaboratorName:e.collaboratorName,accept:function(){return o(e,(function(){return u(e.type,e.proj)}))},decline:function(){return l(e,(function(){return j(e.collaborator,e.type)}))},isNewProject:e.isNewProject,projectTitle:e.projectTitle,collaboratorAvatar:e.collaboratorAvatar},"Notification_".concat(s.indexOf(e)))}))]}):Object(U.jsx)("span",{className:"no_notifications",children:"You do not have any notifications"})}),Object(U.jsxs)("div",{className:"Header_menu menu",ref:x,children:[Object(U.jsxs)("div",{className:"Header_user_details",children:[Object(U.jsx)("span",{className:"Header_user_name",children:t}),Object(U.jsx)("span",{className:"Header_user_email",children:a})]}),Object(U.jsxs)("ul",{children:[Object(U.jsxs)("li",{onClick:function(){return E(r)},children:[Object(U.jsx)(re.a,{className:"Header_menu_icon"}),Object(U.jsx)("span",{children:"Profile"})]}),Object(U.jsxs)("li",{onClick:function(){return E(c)},children:[Object(U.jsx)(H.a,{className:"Header_menu_icon"}),Object(U.jsx)("span",{children:"Logout"})]})]})]})]})]})},ye=(a(138),function(e){var t=e.isOpen,a=e.closeDialog;return Object(U.jsx)(te.a,{open:t,children:Object(U.jsx)(ae.a,{children:Object(U.jsxs)("div",{className:"About_container",children:[Object(U.jsx)("div",{className:"fixed",children:Object(U.jsx)("span",{className:"About_header",children:"About"})}),Object(U.jsxs)("div",{className:"About_content",children:[Object(U.jsx)("span",{className:"About_message",children:"COLLABCODE is a platform that allows users to learn the basics of web development collaboratively. Any two online users can connect by creating a collaborative project to live code basic HTML, CSS and Javascript code while getting immediate feedback."}),Object(U.jsx)("span",{className:"About_message below",children:"To use CODECOLLAB, you have to select any user who is online to send a request to create a new project. Once the project has been created, you can then send an invitation to your partner to start collaborating on the new project by clicking continue on the project tile."}),Object(U.jsx)("span",{className:"About_message below",children:"To encourage collaboration amongst students, you can only work on a project while you and your partner are both online and editing together. However, you also have an option to download the project files and continue working offline."}),Object(U.jsx)("span",{className:"About_message below",children:"If you do not want to receive invitations to collaborate from other users while using the application, you can hide your online status by updating your profile settings. However, while your online status is hidden, you will not be able to collaborate with other users or to see other online users."})]}),Object(U.jsx)("div",{className:"About_button_container",children:Object(U.jsx)("button",{className:"About_button",onClick:a,children:"CLOSE"})})]})})})}),Ce=(a(139),a(140),function(e){return Object(U.jsx)("div",{className:"AspectRatio",children:Object(U.jsx)("div",{className:"AspectRatio-innerWrapper",children:e})})}),Ee=a(82),Se=a.n(Ee),Ae=a(83),Pe=a.n(Ae),Re=function(e){var t=e.title,a=e.collaboratorName,n=e.downloadProject,c=e.continueProject,r=e.image;return Object(U.jsxs)("div",{className:"Project_container card",children:[Ce(Object(U.jsx)("div",{className:"Project_icon",children:Object(U.jsx)("img",{src:r,alt:"Project Icon",className:"Project_image"})})),Object(U.jsx)("span",{className:"Project_title",children:t}),Object(U.jsx)("span",{className:"Project_collaborator",children:"Collaborator: ".concat(a)}),Object(U.jsxs)("div",{className:"Project_options",children:[Object(U.jsxs)("button",{className:"download",onClick:n,children:[Object(U.jsx)(Se.a,{}),Object(U.jsx)("span",{className:"button_text",children:"Download"})]}),Object(U.jsxs)("button",{className:"continue",onClick:c,children:[Object(U.jsx)(Pe.a,{}),Object(U.jsx)("span",{className:"button_text",children:"Continue"})]})]})]})},Ie=a(84),we=(a(141),a(142),function(){return Object(U.jsxs)("div",{className:"Progress_container",children:[Object(U.jsx)("div",{className:"line-base"}),Object(U.jsx)("div",{className:"line"})]})}),Te=a(49),Le=a.n(Te),Ue=function(e){var t=Object(s.b)(),a=e.collaboratorId,c=e.collaboratorName,r=e.isOpen,i=e.closeDialog,o=e.fromProject,l=e.message,u=e.socket,j=e.isActive,d=e.notifications,b=Object(n.useRef)(),m=Object(s.c)((function(e){return e.userReducer})),f=Object(s.c)((function(e){return e.projectReducer})),h=f.activeProject,v=f.title;u.onmessage=function(e){var n=JSON.parse(e.data),r=n.data.split("-"),s=r[0];switch(n.type){case g.REC_CREATE_PING:"yes"===s?N():i();break;case g.REC_CONTINUE_PING:"yes"===s?(t(P({username:a,name:c,avatar:r[1]})),t(R(!0))):i()}};var N=function(){var e;t((e={username:m.username,collaborator:a,title:"New Project"},function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r,s,i,o,l,u,j;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.collaborator,r=e.title,s="/create?username=".concat(n,"&partner=").concat(c,"&title=").concat(r),t.next=6,_.post(s);case 6:i=t.sent,o=i.data,l=x.getInstance(),u=JSON.stringify({id:o,type:g.LOAD_INIT_PROJECTS,data:""}),l.send(u),j=JSON.stringify({id:c,type:g.COLLAB,data:o}),l.send(j),a(L(n));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),i(),t(L(m.username))};return Object(U.jsx)(te.a,{open:r,children:Object(U.jsxs)(ae.a,{children:[Object(U.jsxs)("div",{className:"ConnectionDialog_container",children:[Object(U.jsx)("span",{className:"ConnectionDialog_header",children:"Connecting"}),Object(U.jsx)("span",{className:"ConnectionDialog_summary",children:"Waiting for ".concat(c," to connect...")}),Object(U.jsx)(we,{}),Object(U.jsx)("div",{className:"ConnectionDialog_button_container",children:Object(U.jsx)("button",{className:"ConnectionDialog_button",onClick:function(){var e,t="cancel=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar,"=").concat(h,"=").concat(v);e=JSON.stringify({id:a,type:g.PING_USER,data:t}),u.send(e),i()},children:"CANCEL"})})]}),!j&&Object(U.jsxs)("div",{className:"ConnectionDialog_options",children:[Object(U.jsx)("div",{className:"Icon_container",children:Object(U.jsx)(Le.a,{style:{fontSize:40,color:"gray"}})}),Object(U.jsx)("span",{className:"AlertDialog_message",children:"You cannot collaborate with anyone when you are appearing offline."}),Object(U.jsx)("div",{className:"AlertDialog_button_container",children:Object(U.jsx)("button",{className:"AlertDialog_button",onClick:i,children:"CLOSE"})})]}),j&&Object(U.jsxs)("div",{className:"ConnectionDialog_options",ref:b,children:[Object(U.jsx)("span",{className:"ConnectionDialog_header",children:"Invite to collaborate?"}),Object(U.jsx)("div",{className:"Connection_Body"}),Object(U.jsx)("span",{className:"ConnectionDialog_alert",children:l}),Object(U.jsxs)("div",{className:"Connection_confirm_button_container",children:[Object(U.jsx)("button",{className:"Connection_confirm_button left",onClick:function(){if(b.current.classList.add("ConnectionDialog_hide_options"),o){var e,n=Object(Ie.a)(d);try{for(n.s();!(e=n.n()).done;){if(e.value.projectid===h){var c="yes-".concat(m.avatar),r=JSON.stringify({id:a,type:g.REC_CONTINUE_PING,data:c});return u.send(r),void t(R(!0))}}}catch(p){n.e(p)}finally{n.f()}var s="continue=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar,"=").concat(h,"=").concat(v),i=JSON.stringify({id:a,type:g.PING_USER,data:s});u.send(i)}else{var l="create=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar),j=JSON.stringify({id:a,type:g.PING_USER,data:l});u.send(j)}},children:"YES"}),Object(U.jsx)("button",{className:"Connection_confirm_button right",onClick:i,children:"NO"})]})]})]})})},ke=(a(143),function(e){var t=e.isOpen,a=e.closeDialog,n=e.message;return Object(U.jsx)(te.a,{open:t,children:Object(U.jsx)(ae.a,{children:Object(U.jsxs)("div",{className:"AlertDialog_container",children:[Object(U.jsx)("div",{className:"AlertIcon_container",children:Object(U.jsx)(Le.a,{style:{fontSize:40,color:"gray"}})}),Object(U.jsx)("span",{className:"AlertDialog_message",children:n}),Object(U.jsx)("div",{className:"AlertDialog_button_container",children:Object(U.jsx)("button",{className:"AlertDialog_button",onClick:a,children:"CLOSE"})})]})})})}),De=(a(144),function(e){var t=e.isOpen,a=e.name,c=e.currentOnlineStatus,r=e.closeDialog,s=e.saveProfile,i=e.avatar,o=Object(n.useState)(a),l=Object(f.a)(o,2),u=l[0],j=l[1],d=Object(n.useState)(""),b=Object(f.a)(d,2),m=b[0],p=b[1],O=Object(n.useState)(c),h=Object(f.a)(O,2),v=h[0],_=h[1],N=Object(n.useState)(i),x=Object(f.a)(N,2),g=x[0],y=x[1];return Object(U.jsx)(te.a,{open:t,children:Object(U.jsx)(ae.a,{children:Object(U.jsxs)("div",{className:"ProfileDialog_container",children:[Object(U.jsx)("span",{className:"ProfileDialog_header",children:"Profile information"}),Object(U.jsxs)("div",{className:"Update_profile_pic",children:[Object(U.jsx)("div",{className:"Profile_current",children:"0"!==g?Object(U.jsx)("img",{src:function(e){switch(e){case"1":return M;case"2":return W;case"3":return Y;case"4":return F;case"5":return K;case"6":return Z;case"7":return $;case"8":return Q;default:return}}(g),className:"current_icon",alt:"Current avatar"}):Object(U.jsx)(V.a,{style:{fontSize:90}})}),Object(U.jsxs)("div",{className:"Profile_new",children:[Object(U.jsx)("span",{children:"Select new avatar"}),Object(U.jsxs)("div",{className:"profile_icons",children:[Object(U.jsx)("img",{src:M,className:"new_icon",alt:"Icon Option 1",onClick:function(){return y("1")}}),Object(U.jsx)("img",{src:W,className:"new_icon",alt:"Icon Option 2",onClick:function(){return y("2")}}),Object(U.jsx)("img",{src:Y,className:"new_icon",alt:"Icon Option 3",onClick:function(){return y("3")}}),Object(U.jsx)("img",{src:F,className:"new_icon",alt:"Icon Option 4",onClick:function(){return y("4")}}),Object(U.jsx)("img",{src:K,className:"new_icon",alt:"Icon Option 5",onClick:function(){return y("5")}}),Object(U.jsx)("img",{src:Z,className:"new_icon",alt:"Icon Option 6",onClick:function(){return y("6")}}),Object(U.jsx)("img",{src:$,className:"new_icon",alt:"Icon Option 7",onClick:function(){return y("7")}}),Object(U.jsx)("img",{src:Q,className:"new_icon",alt:"Icon Option 8",onClick:function(){return y("8")}})]})]})]}),Object(U.jsxs)("div",{className:"ProfileDialog_inputs",children:[Object(U.jsxs)("label",{htmlFor:"name_input",className:"input_container input_left",children:[Object(U.jsx)("span",{className:"Profile_input_label",children:"Name"}),Object(U.jsx)("input",{type:"text",name:"name_input",value:u,onChange:function(e){j(e.target.value)},className:"Profile_input"})]}),Object(U.jsxs)("label",{htmlFor:"username_input",className:"input_container input_right",children:[Object(U.jsx)("span",{className:"Profile_input_label",children:"Password"}),Object(U.jsx)("input",{type:"password",name:"username_input",onChange:function(e){p(e.target.value)},className:"Profile_input"})]})]}),Object(U.jsxs)("div",{className:"ProfileDialog_toggle_container",children:[Object(U.jsxs)("label",{htmlFor:"status_toggle",className:"Profile_toggle",children:[Object(U.jsx)("input",{type:"checkbox",id:"status_toggle",name:"status_toggle",checked:v,onChange:function(){return _((function(e){return!e}))},className:"Profile_toggle_input"}),Object(U.jsx)("div",{className:"Profile_toggle_fill"}),Object(U.jsx)("span",{className:"Toggle_label",children:"Display online status"})]}),Object(U.jsx)("span",{className:"online_status_message",children:"If you do not display your online status, you will not be able to see other users who are online"})]}),Object(U.jsxs)("div",{className:"ProfileDialog_button_container",children:[Object(U.jsx)("button",{className:"ProfileDialog_button left",onClick:r,children:"CLOSE"}),Object(U.jsx)("button",{className:"ProfileDialog_button right",onClick:function(){return s(u,m,v,g)},children:"SAVE"})]})]})})})}),Je=function(e){var t=e.history,c=Object(s.c)((function(e){return e.userReducer})),r=Object(s.b)(),i=Object(s.c)((function(e){return e.projectReducer})),o=i.activeUsers,l=i.contacts,u=i.onlineProjects,j=i.canEdit,d=i.offlineProjects,b=Object(n.useState)(""),m=Object(f.a)(b,2),h=m[0],v=m[1],N=Object(n.useState)(!1),y=Object(f.a)(N,2),C=y[0],E=y[1],k=Object(n.useState)({}),D=Object(f.a)(k,2),J=D[0],G=D[1],H=Object(n.useState)([]),B=Object(f.a)(H,2),V=B[0],q=B[1],z=Object(n.useState)(u.concat(d)),M=Object(f.a)(z,2),W=M[0],Y=M[1],F=Object(n.useState)(""),K=Object(f.a)(F,2),Z=K[0],$=K[1],Q=Object(n.useState)(!1),X=Object(f.a)(Q,2),ee=X[0],te=X[1],ae=Object(n.useState)([]),ne=Object(f.a)(ae,2),ce=(ne[0],ne[1]),re=Object(n.useState)(!1),se=Object(f.a)(re,2),ie=se[0],oe=se[1],le=Object(n.useState)(""),ue=Object(f.a)(le,2),je=ue[0],me=ue[1],Oe=Object(n.useState)(!0),fe=Object(f.a)(Oe,2),ve=fe[0],_e=fe[1],Ne=Object(n.useState)(!1),xe=Object(f.a)(Ne,2),Ce=xe[0],Ee=xe[1],Se=Object(n.useState)([]),Ae=Object(f.a)(Se,2),Pe=Ae[0],Ie=Ae[1],we=Object(n.useState)(!1),Te=Object(f.a)(we,2),Le=Te[0],Je=Te[1],Ge=x.getInstance();if(c.fromLogin){var He=JSON.stringify({id:c.username,type:g.SIGN_IN,data:""});Ge.send(He)}Ge.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case g.PING_USER:var a=t.data.split("="),n=a[0],r=a[1],s=a[2],i=a[3];if("cancel"===n){var o=Pe.filter((function(e){return e.collaboratorId===r}));Ie(o)}else if("create"===n){var j={collaboratorName:s,collaborator:r,projectid:"",isNewProject:!0,projectTitle:"New Project",type:n,proj:r,collaboratorAvatar:i};Ie([].concat(Object(de.a)(Pe),[j]))}else{for(var d=a[4],b="",m="",p="",O=0;O<u.length;O++)if(u[O].projectid===d){b=u[O].html,m=u[O].css,p=u[O].js;break}for(var f="0";0<l.length;O++)if(l[0].username===r){f=l[0].avatar;break}var h=a[5],v={collaborator:r,collaboratorName:s,title:h,projectid:d,html:b,css:m,js:p,avatar:f};Ie([].concat(Object(de.a)(Pe),[{collaboratorName:s,projectid:d,collaborator:r,isNewProject:!1,projectTitle:v.title,type:n,proj:v,collaboratorAvatar:i}]))}break;case g.COLLAB_ADD_PROJECT:L(c.username)}},window.onbeforeunload=function(){Ge.onclose=function(){}},Object(n.useEffect)((function(){j&&t.push("/editor")}),[j,t]),Object(n.useEffect)((function(){if(c.isVisible){var e=setInterval((function(){var e;r((e={username:c.username,isVisible:c.isVisible,isProjectsPage:!0},function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.username,c=e.isVisible,r=e.isProjectsPage,!c){t.next=7;break}return s="/update-active?username=".concat(n),t.next=7,_.get(s);case 7:r&&(a(L(n)),a(T(n)));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),2e3);return function(){return clearInterval(e)}}}),[c.username,c.isVisible,r]);var Be=function(e,t,a){Ee(!1),E(!0),G({name:e,username:t,avatar:a,isActive:!0}),r(P({name:e,username:t,avatar:a})),me("This will CREATE a new project with ".concat(e,"."))},Ve=function(e){var t=e.split(/[\s,]+/);return t=t.filter((function(e){return""!==e})).map((function(e){return e.toLowerCase()})).join("_")};return Object(n.useEffect)((function(){var e;window.addEventListener("resize",(function(){document.body.classList.add("resize-animation-stopper"),clearTimeout(e),e=setTimeout((function(){document.body.classList.remove("resize-animation-stopper")}),400)}))}),[]),Object(n.useEffect)((function(){ce([]),Y([]);var e=l.concat(o),t=u.concat(d);if(c.fromLogin&&t.length>0){var a=[];t.forEach((function(e){var t=e.projectid;a.push(t)})),a.forEach((function(e){var t=JSON.stringify({id:e,type:g.LOAD_INIT_PROJECTS,data:""});Ge.send(t)})),r(A(!1))}ce(e),Y(t)}),[l,r,u,d,o,Ge,c.fromLogin]),Object(n.useEffect)((function(){var e=W.filter((function(e){return e.title.includes(h)||e.title.includes(h.toUpperCase())}));return q(e),function(){ve&&_e(!1)}}),[h,W,ve]),Object(U.jsxs)("div",{className:"Projects_container",children:[Object(U.jsx)(ge,{name:c.name,email:c.email,handleLogout:function(){var e=JSON.stringify({id:"",type:g.SIGN_OUT,data:""});Ge.send(e),t.push("/"),r({type:g.SIGN_OUT,payload:null}),r({type:g.CLEAR_REDUCER,payload:null}),r(A(!0))},displayProfile:function(){oe(!0)},notifications:Pe,avatar:c.avatar,accept:function(e,t){var a=Pe.filter((function(t){return t!==e}));Ie(a),t()},acceptCallBack:function(e,t){if("create"===e){var a=JSON.stringify({id:t,type:g.REC_CREATE_PING,data:"yes"});Ge.send(a),r(L(c.username))}else if("continue"===e){var n="yes-".concat(c.avatar),s=JSON.stringify({id:t.collaborator,type:g.REC_CONTINUE_PING,data:n});Ge.send(s),r(S({projectid:t.projectid,collaborator:t.collaborator,collaboratorName:t.collaboratorName,html:t.html,css:t.css,js:t.js,title:t.title,collaboratorAvatar:t.avatar})),r(R(!0))}},declineCallBack:function(e,t){if("create"===t){var a=JSON.stringify({id:e,type:g.REC_CREATE_PING,data:"no"});Ge.send(a)}else{var n=JSON.stringify({id:e,type:g.REC_CONTINUE_PING,data:"no"});Ge.send(n)}},decline:function(e,t){var a=Pe.filter((function(t){return t!==e}));Ie(a),t()},isActive:c.isVisible,displayAbout:function(){return Je(!0)},history:t}),Object(U.jsxs)("div",{className:"Projects_main",children:[Object(U.jsxs)("div",{className:"Projects_content",children:[Object(U.jsx)(he,{query:h,onChange:v}),Object(U.jsx)("span",{className:"Projects_label",children:"Recent Projects"}),!ve&&0===W.length&&Object(U.jsxs)("div",{className:"card Projects_no_result",children:[Object(U.jsx)("span",{className:"no_result_summary",children:"No projects"}),Object(U.jsx)("span",{className:"no_result_message",children:"You have not collaborated on any projects with anyone. Please select any active user to start collaborating on your first project."})]}),!ve&&0!==W.length&&0===V.length&&Object(U.jsxs)("div",{className:"card Projects_no_result",children:[Object(U.jsx)("span",{className:"no_result_summary",children:"No results found"}),Object(U.jsx)("span",{className:"no_result_message",children:"You do not have any project that matches the given name."})]}),!ve&&V.length>0&&Object(U.jsx)("div",{className:"Projects_recent",children:V.map((function(e){return Object(U.jsx)(Re,{title:e.title,image:e.image,collaboratorName:e.collaboratorName,downloadProject:function(){return function(e,t,n,c){var r=Ve(e),s=a(145)(),i=s.folder(r);i.file("index.js",c),i.file("style.css",n),i.file("index.html",t),s.generateAsync({type:"blob"}).then((function(e){Object(be.saveAs)(e,"".concat(r,".zip"))}))}(e.projectid,e.html,e.css,e.js)},continueProject:function(){return function(e,t,a,n,c,s,i){for(var o="0",u=!0,j=0;j<l.length;j++)if(l[j].username===a){o=l[j].avatar,u=l[j].isActive;break}u?(Ee(!0),E(!0),G({name:n,username:a,avatar:o,isActive:u}),r(P({name:n,username:a,avatar:o})),r(S({projectid:e,collaborator:a,collaboratorName:n,html:c,css:s,js:i,title:t,collaboratorAvatar:o})),me("This will send an invitation to ".concat(n," to continue working on ").concat(t))):(te(!0),$("".concat(n," is currently offline. You can only edit \n\t      this project when you are both online.")))}(e.projectid,e.title,e.collaborator,e.collaboratorName,e.html,e.css,e.js)}},e.projectid)}))})]}),Object(U.jsx)("div",{className:"Projects_sidebar",children:Object(U.jsx)(pe,{activeUsers:o,contacts:l,onActiveUserClick:Be,onRecentUserClick:function(e,t,a,n){a?Be(t,e,n):(te(!0),$("".concat(t," is currently offline. You can only CREATE new projects with ACTIVE users.")))},isVisible:c.isVisible})})]}),C&&Object(U.jsx)(Ue,{collaboratorName:J.name,collaboratorId:J.username,isActive:c.isVisible,isOpen:C,fromProject:Ce,closeDialog:function(){return function(e){E(!1),e&&r(I()),me(""),G({})}(Ce)},message:je,socket:Ge,history:t,notifications:Pe}),ee&&Object(U.jsx)(ke,{isOpen:ee,closeDialog:function(){$(""),te(!1)},message:Z}),ie&&Object(U.jsx)(De,{isOpen:ie,name:c.name,currentOnlineStatus:c.isVisible,closeDialog:function(){return oe(!1)},saveProfile:function(e,t,a,n){var s,i;c.name!==e&&r((s={username:c.username,name:e},function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.username,n=s.name,c="/change-name?username=".concat(a,"&name=").concat(n),e.next=5,_.get(c);case 5:t({type:g.CHANGE_NAME,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c.isVisible!==a&&r((i={username:c.username,visibility:a},function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.username,n=i.visibility,c="/change-vis?username=".concat(a,"&visibility=").concat(n),e.next=5,_.get(c);case 5:t(w(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.length>=8&&t.length<=60&&r(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.password,r="/change-pass?username=".concat(n,"&password=").concat(c),t.next=5,_.get(r);case 5:a({type:g.CHANGE_PASSWORD,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,password:t})),r(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.avatar,r="/change-avatar?username=".concat(n,"&avatar=").concat(c),t.next=5,_.get(r);case 5:a({type:g.CHANGE_AVATAR,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,avatar:n})),oe(!1)},avatar:c.avatar}),Le&&Object(U.jsx)(ye,{isOpen:Le,closeDialog:function(){return Je(!1)}})]})},Ge=Object(b.a)(),He=Object(j.a)({palette:{type:"light",primary:{main:"#6E4AB1"},secondary:{main:"#000000"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:400,fontWeightRegular:500,fontWeightMedium:600}});var Be=function(){return Object(U.jsx)(d.a,{theme:He,children:Object(U.jsxs)(l.a,{history:Ge,children:[Object(U.jsx)(u.a,{path:"/",exact:!0,component:k}),Object(U.jsx)(u.a,{path:"/editor",exact:!0,component:je}),Object(U.jsx)(u.a,{path:"/projects",exact:!0,component:Je})]})})},Ve=a(5),qe={activeProject:"",html:"",css:"",js:"",title:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0",onlineProjects:[],offlineProjects:[],activeUsers:[],contacts:[],canEdit:!1},ze={isSignedIn:!1,username:"",email:"",name:"",isVisible:!0,avatar:"0",fromLogin:!0},Me=Object(i.c)({projectReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.CHOOSE_PROJECT:return Object(Ve.a)(Object(Ve.a)({},e),{},{activeProject:t.payload.projectid,html:t.payload.html,css:t.payload.css,js:t.payload.js,collaboratorName:t.payload.collaboratorName,title:t.payload.title,collaboratorId:t.payload.collaborator,collaboratorAvatar:t.payload.collaboratorAvatar});case g.CLEAR_PROJECT:return Object(Ve.a)(Object(Ve.a)({},e),{},{html:"",css:"",js:"",collaboratorName:"",title:"",activeProject:"",collaboratorId:"",collaboratorAvatar:"0"});case g.CHOOSE_USER:return Object(Ve.a)(Object(Ve.a)({},e),{},{collaboratorId:t.payload});case g.UPDATE_EDIT:return Object(Ve.a)(Object(Ve.a)({},e),{},{canEdit:t.payload});case g.SELECT_COLLAB:return Object(Ve.a)(Object(Ve.a)({},e),{},{collaboratorId:t.payload.username,collaboratorName:t.payload.name,collaboratorAvatar:t.payload.avatar});case g.LOAD_INIT_PROJECTS:case g.UPDATE_PROJECTS:return Object(Ve.a)(Object(Ve.a)({},e),{},{onlineProjects:t.payload.onlineProjects,offlineProjects:t.payload.offlineProjects});case g.UPDATE_USERS:return Object(Ve.a)(Object(Ve.a)({},e),{},{contacts:t.payload.contacts,activeUsers:t.payload.activeUsers});case g.CLEAR_REDUCER:return Object(Ve.a)(Object(Ve.a)({},e),{},{activeProject:"",onlineProjects:[],title:"",offlineProjects:[],activeUsers:[],contacts:[],html:"",css:"",js:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0"});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.SIGN_IN:return Object(Ve.a)(Object(Ve.a)({},e),{},{isSignedIn:!0,username:t.payload.username,email:t.payload.email,name:t.payload.name,avatar:t.payload.avatar,isVisible:t.payload.isVisible});case g.SIGN_OUT:return Object(Ve.a)(Object(Ve.a)({},e),{},{isSignedIn:!1,username:"",email:"",activeProject:"",avatar:"0"});case g.CHANGE_VISIBILITY:return Object(Ve.a)(Object(Ve.a)({},e),{},{isVisible:t.payload});case g.UPDATE_LOCATION:return Object(Ve.a)(Object(Ve.a)({},e),{},{fromLogin:t.payload});case g.CHANGE_NAME:return Object(Ve.a)(Object(Ve.a)({},e),{},{name:t.payload});case g.CHANGE_AVATAR:return Object(Ve.a)(Object(Ve.a)({},e),{},{avatar:t.payload});default:return e}}}),We=Object(i.d)(Me,Object(i.a)(o.a));r.a.render(Object(U.jsx)(s.a,{store:We,children:Object(U.jsx)(Be,{})}),document.getElementById("root"))},99:function(e,t,a){}},[[155,1,2]]]);
//# sourceMappingURL=main.b37ad11a.chunk.js.map