(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{118:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(12),r=a.n(c),s=a(10),o=a(33),i=a(69),l=(a(99),a(87)),u=a(8),j=a(86),d=a(180),b=a(85),m=a(6),p=a.n(m),O=a(15),f=a(3),h=a(72),v=a.n(h).a.create({baseURL:"https://spring21-sps-18.appspot.com"}),_="https:"===window.location.protocol?"wss://":"ws://",N="spring21-sps-18.appspot.com",x=":9000/",g=function(){var e;return{getInstance:function(){return e||(e=new WebSocket(_+N+x)),e}}}(),y={SIGN_IN:"SIGN_IN",SIGN_OUT:"SIGN_OUT",UPDATE_EDIT:"UPDATE_EDIT",UPDATE_LOCATION:"UPDATE_LOCATION",COLLAB:"COLLAB_ADD_PROJECT",CHANGE_PASSWORD:"CHANGE_PASSWORD",CHANGE_VISIBILITY:"CHANGE_VISIBILITY",CHANGE_AVATAR:"CHANGE_AVATAR",CHANGE_NAME:"CHANGE_NAME",CHOOSE_PROJECT:"CHANGE_PROJECT",CHOOSE_USER:"CHOOSE_USER",UPDATE_PROJECTS:"UPDATE_PROJECTS",UPDATE_USERS:"UPDATE_USERS",CLEAR_REDUCER:"CLEAR_REDUCER",CLEAR_PROJECT:"CLEAR_PROJECT",LOAD_INIT_PROJECTS:"LOAD_INIT_PROJECTS",CREATE_PROJECT:"CREATE_PROJECT",SEND_HTML:"SEND_HTML",SEND_CSS:"SEND_CSS",SEND_JS:"SEND_JS",SEND_TITLE:"SEND_TITLE",REC_HTML:"REC_HTML",REC_CSS:"REC_CSS",REC_JS:"REC_JS",REC_TITLE:"REC_TITLE",PING_USER:"PING_USER",REC_CREATE_PING:"REC_CREATE_PING",REC_CONTINUE_PING:"REC_CONTINUE_PING",SEND_LEFT:"SEND_LEFT",REC_LEFT:"REC_LEFT",SELECT_COLLAB:"SELECT_COLLAB"},C=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.bothActive===e){var r={collaborator:c.collaborator,collaboratorName:c.collaboratorName,projectid:c.projectid,title:c.title,html:c.html,css:c.css,js:c.js,collaboratorAvatar:c.collaboratorAvatar,image:c.image};a.push(r)}}return a},E=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n];if(c.isContact===e){var r={username:c.username,name:c.name,isActive:c.isActive,avatar:c.avatar};a.push(r)}}return a},S=function(e){return{type:y.SIGN_IN,payload:e}},A=function(e){return{type:y.CHOOSE_PROJECT,payload:e}},P=function(e){return{type:y.UPDATE_LOCATION,payload:e}},I=function(e){return{type:y.SELECT_COLLAB,payload:e}},w=function(e){return{type:y.UPDATE_EDIT,payload:e}},R=function(){return{type:y.CLEAR_PROJECT,payload:null}},T=function(e){return{type:y.CHANGE_VISIBILITY,payload:e}},L=function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/get-users?username=".concat(e),t.next=4,v.get(n);case 4:c=t.sent,a({type:y.UPDATE_USERS,payload:{contacts:E(!0,c.data),activeUsers:E(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/load?username=".concat(e),t.next=4,v.get(n);case 4:c=t.sent,a({type:y.UPDATE_PROJECTS,payload:{onlineProjects:C(!0,c.data),offlineProjects:C(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=6;break}return n="/load?username=".concat(e),t.next=4,v.get(n);case 4:c=t.sent,a({type:y.LOAD_INIT_PROJECTS,payload:{onlineProjects:C(!0,c.data),offlineProjects:C(!1,c.data)}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=(a(118),a(0)),J=function(e){var t=e.history,a=Object(s.b)(),c=Object(n.useState)(""),r=Object(f.a)(c,2),o=r[0],i=r[1],l=Object(n.useState)(!1),u=Object(f.a)(l,2),j=u[0],d=u[1],b=Object(n.useState)(""),m=Object(f.a)(b,2),h=m[0],_=m[1],N=Object(n.useState)(""),x=Object(f.a)(N,2),y=x[0],C=x[1],E=Object(n.useState)(!1),A=Object(f.a)(E,2),P=A[0],I=A[1],w=Object(n.useState)(""),R=Object(f.a)(w,2),T=R[0],U=R[1],J=Object(n.useState)(""),G=Object(f.a)(J,2),H=G[0],B=G[1],V=Object(n.useState)(!1),q=Object(f.a)(V,2),z=q[0],M=q[1],W=Object(n.useState)(""),Y=Object(f.a)(W,2),F=Y[0],K=Y[1],Z=Object(n.useState)(""),$=Object(f.a)(Z,2),Q=$[0],X=$[1],ee=Object(n.useState)(!1),te=Object(f.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(""),re=Object(f.a)(ce,2),se=re[0],oe=re[1],ie=Object(n.useState)(!0),le=Object(f.a)(ie,2),ue=le[0],je=le[1],de=Object(n.useState)(!1),be=Object(f.a)(de,2),me=be[0],pe=be[1],Oe=Object(n.useRef)(),fe=Object(n.useRef)();g.getInstance().onopen=function(){};var he=function(){ue||(je(!0),pe(!1),M(!1),ne(!1),I(!1),d(!1),Oe.current.classList.add("visible_sign_in"),Oe.current.classList.remove("hidden_sign_in"),fe.current.classList.remove("visible_sign_up"),fe.current.classList.add("hidden_sign_up"))},ve=function(){me||(je(!1),pe(!0),M(!1),ne(!1),I(!1),d(!1),Oe.current.classList.remove("visible_sign_in"),Oe.current.classList.add("hidden_sign_in"),fe.current.classList.add("visible_sign_up"),fe.current.classList.remove("hidden_sign_up"))},_e=function(e,t){"Enter"===e.key&&t()},Ne=function(e,t,a,n,c){var r=!1;""===e?(d(!0),_("Username cannot be empty"),r=!0):(d(!1),_("")),t.length<8||t.length>60?(I(!0),U("Password must be greater than 8 characters and less than 60 characters"),r=!0):(I(!1),U("")),""!==a&&function(e){return new RegExp(['^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s','@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]',"{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"]).test(String(e).toLowerCase())}(a)?(M(!1),K("")):(M(!0),K("Please enter a valid email address format"),r=!0),""===n?(ne(!0),oe("Name cannot be empty"),r=!0):(ne(!1),oe("")),r||c()},xe=function(e,t,a){var n=!1;""===e?(d(!0),_("Username cannot be empty"),n=!0):(d(!1),_("")),""===t?(I(!0),U("Password cannot be empty"),n=!0):(I(!1),U("")),n||a()},ge=function(){var e=Object(O.a)(p.a.mark((function e(n,c,r,s){var o,i,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=encodeURIComponent(n),c=encodeURIComponent(c),r=encodeURIComponent(r),s=encodeURIComponent(s),e.next=7,v.post("/sign-up?username=".concat(n,"\n              &password=").concat(c,"&email=").concat(r,"&name=").concat(s));case 7:if(200===(o=e.sent).status){e.next=18;break}return d(!0),_("Unable to sign up at this time please try again"),I(!0),U("Unable to sign up at this time please try again"),M(!0),K("Unable to sign up at this time please try again"),ne(!0),oe("Unable to sign up at this time please try again"),e.abrupt("return");case 18:if(i=o.data,l=i[0],u=i[1],l&&(d(!0),_("Username is already taken")),u&&(M(!0),K("Email address has already been used")),!l&&!u){e.next=25;break}return e.abrupt("return");case 25:a(S({username:n,email:r,name:s,avatar:"0"})),a(L(n)),a(k(n)),t.push("/projects"),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(0),e.t0&&(d(!0),_(e.t0.message),I(!0),U(e.t0.message));case 35:case 36:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,a,n,c){return e.apply(this,arguments)}}(),ye=function(){var e=Object(O.a)(p.a.mark((function e(n,c){var r,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(n),c=encodeURIComponent(c),e.prev=2,e.next=5,v.post("/sign-in?username=".concat(n,"\n              &password=").concat(c));case 5:200===(r=e.sent).status?(s=r.data,"true"===s[0]?(o="true"===s[3],a(S({username:n,email:s[1],name:s[2],isVisible:o,avatar:s[4]})),a(L(n)),a(k(n)),t.push("/projects")):(d(!0),_("Username or password entered incorrectly"),I(!0),U("Username or password entered incorrectly"))):(d(!0),_("Unable to sign in at this time please try again"),I(!0),U("Unable to sign in at this time please try again")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0&&(d(!0),_(e.t0.message),I(!0),U(e.t0.message));case 13:case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{className:"Auth_container",children:[Object(D.jsx)("div",{className:"Auth_header",children:Object(D.jsx)("div",{className:"nine",children:Object(D.jsxs)("h1",{children:["COLLABCODE",Object(D.jsx)("span",{children:" code, create, and collaborate"})]})})}),Object(D.jsx)("div",{className:"Auth_main",children:Object(D.jsxs)("div",{className:"Auth_content card",children:[Object(D.jsx)("div",{className:"Auth_buttons_container",children:ue?Object(D.jsx)("button",{className:"Auth_button left_button",onClick:he,children:"SIGN IN"}):Object(D.jsx)("button",{className:"Auth_button left_button ",onClick:ve,children:"SIGN UP"})}),Object(D.jsxs)("div",{className:"Signin_signup",children:[Object(D.jsx)("div",{className:"dummy_sign_in visible_sign_in",ref:Oe,children:Object(D.jsxs)("div",{className:"user_details",children:[Object(D.jsxs)("div",{className:"input",children:[Object(D.jsx)("input",{type:"text",name:"username_input",className:"Auth_input",required:"required",onChange:function(e){return i(e.target.value)},value:o,autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(o,y,(function(){return ye(o,y)}))}))}}),Object(D.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(D.jsx)("span",{className:"error",children:h}),Object(D.jsxs)("div",{className:"input",children:[Object(D.jsx)("input",{type:"password",required:"required",name:"password_input",className:"Auth_input",onChange:function(e){return C(e.target.value)},value:y,autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(o,y,(function(){return ye(o,y)}))}))}}),Object(D.jsx)("span",{className:"placeholder",children:"Password"})]}),P&&Object(D.jsx)("span",{className:"error",children:T}),Object(D.jsx)("div",{className:"Sign_in_button_container",children:Object(D.jsx)("button",{className:"Sign_up_button",onClick:function(){return xe(o,y,(function(){return ye(o,y)}))},children:"Log In"})})]})}),Object(D.jsx)("div",{className:"dummy_sign_up hidden_sign_up",ref:fe,children:Object(D.jsxs)("div",{className:"user_details",children:[Object(D.jsxs)("div",{className:"input",children:[Object(D.jsx)("input",{type:"text",id:"name_input",required:"required",label:"name_input",className:"Auth_input",onChange:function(e){return X(e.target.value)},value:Q,autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return Ne(o,y,H,Q,(function(){return ge(o,y,H,Q)}))}))}}),Object(D.jsx)("span",{className:"placeholder",children:"Name"})]}),ae&&Object(D.jsx)("span",{className:"error",children:se}),Object(D.jsxs)("div",{className:"input",children:[Object(D.jsx)("input",{type:"text",label:"username_input",required:"required",className:"Auth_input",value:o,onChange:function(e){return i(e.target.value)},autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(o,y,(function(){return ye(o,y)}))}))}}),Object(D.jsx)("span",{className:"placeholder",children:"Username"})]}),j&&Object(D.jsx)("span",{className:"error",children:h}),Object(D.jsxs)("div",{className:"input",children:[Object(D.jsx)("input",{type:"password",required:"required",label:"password_input",className:"Auth_input",value:y,onChange:function(e){return C(e.target.value)},autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return xe(o,y,(function(){return ye(o,y)}))}))}}),Object(D.jsx)("span",{className:"placeholder",children:"Password"})]}),P&&Object(D.jsx)("span",{className:"error",children:T}),Object(D.jsxs)("div",{className:"input",children:[Object(D.jsx)("input",{type:"text",required:"required",label:"email_input",className:"Auth_input",value:H,onChange:function(e){return B(e.target.value)},autoComplete:"off",onKeyPress:function(e){return _e(e,(function(){return Ne(o,y,H,Q,(function(){return ge(o,y,H,Q)}))}))}}),Object(D.jsx)("span",{className:"placeholder",children:"Email"})]}),z&&Object(D.jsx)("span",{className:"error",children:F}),Object(D.jsx)("div",{className:"Sign_up_button_container",children:Object(D.jsx)("button",{className:"Sign_up_button",onClick:function(){return Ne(o,y,H,Q,(function(){return ge(o,y,H,Q)}))},children:"Sign Up"})})]})})]}),ue?Object(D.jsx)("h5",{children:Object(D.jsx)("span",{children:"New to CollabCode?"})}):Object(D.jsx)("h5",{children:Object(D.jsx)("span",{children:"Already have an account?"})}),ue?Object(D.jsx)("button",{className:"Auth_button right_button ",onClick:ve,children:"SIGN UP"}):Object(D.jsx)("button",{className:"Auth_button right_button",onClick:he,children:"SIGN IN"})]})})]})},G=a(73),H=(a(120),a(121),a(122),a(123),a(124),a(125),function(e){var t=e.language,a=e.displayName,n=e.value,c=e.socket,r=e.projectid;return Object(D.jsxs)("div",{className:"Pane_container",children:[Object(D.jsx)("div",{className:"Pane_title",children:a}),Object(D.jsx)(G.Controlled,{onBeforeChange:function(e,t,n){var s="SEND_"+a,o=JSON.stringify({id:r,type:s,data:n});c.send(o)},value:n,className:"Pane_code_mirror_wrapper",options:{lineWrapping:!0,lint:!0,mode:t,lineNumbers:!0,theme:"material"}})]})}),B=(a(126),a(47)),V=a.n(B),q=a(21),z=a.n(q),M=a(75),W=a.n(M),Y=(a(127),a.p+"static/media/avatar-1.206df2ea.png"),F=a.p+"static/media/avatar-2.ce1e904e.png",K=a.p+"static/media/avatar-3.ba79463c.png",Z=a.p+"static/media/avatar-4.607dde39.png",$=a.p+"static/media/avatar-5.1cc5e5b8.png",Q=a.p+"static/media/avatar-6.af51b5dd.png",X=a.p+"static/media/avatar-7.61998959.png",ee=a.p+"static/media/avatar-8.d272d87a.png",te=function(e){var t=e.name,a=e.avatar,c=e.email,r=e.side,s=e.active,o=e.isUser,i=e.handleSave,l=e.handleReturn,u=Object(n.useState)(!1),j=Object(f.a)(u,2),d=j[0],b=j[1],m=Object(n.useRef)(),p=Object(n.useRef)(),O=function(e){b((function(e){return!e})),e()};return Object(n.useEffect)((function(){m.current.style.display=d?"flex":"none";var e=function(e){m.current&&!m.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&d&&b((function(e){return!e}))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[d]),Object(D.jsxs)("div",{className:"Profile_container ".concat("R"===r?"Profile_flipped":""),children:[Object(D.jsxs)("div",{className:"Profile_image ".concat(o?"":"other_user"),ref:p,onClick:function(){return b((function(e){return!e}))},children:["0"!==a?Object(D.jsx)("img",{src:function(){switch(a){case"1":return Y;case"2":return F;case"3":return K;case"4":return Z;case"5":return $;case"6":return Q;case"7":return X;case"8":return ee;default:return}}(),className:"Profile_icon",alt:"avatar"}):Object(D.jsx)(z.a,{style:{fontSize:40}}),Object(D.jsx)("div",{className:"Profile_activity ".concat(s?"active_user":"inactive_user"," ").concat("R"===r?"right":"left")}),"      "]}),Object(D.jsxs)("div",{className:"Profile_details  ".concat("R"===r?"details_right":"details_left"),children:[Object(D.jsx)("span",{className:"Profile_name",children:t}),Object(D.jsx)("span",{className:"Profile_email",children:c})]}),o?Object(D.jsxs)("div",{className:"Editor_profile_menu",ref:m,children:[Object(D.jsx)("span",{className:"Editor_options",children:"Options"}),Object(D.jsxs)("ul",{children:[Object(D.jsxs)("li",{onClick:function(){return O(i)},children:[Object(D.jsx)(W.a,{className:"Editor_profile_menu_icon"}),Object(D.jsx)("span",{children:"Save project"})]}),Object(D.jsxs)("li",{onClick:function(){return O(l)},children:[Object(D.jsx)(V.a,{className:"Editor_profile_menu_icon"}),Object(D.jsx)("span",{children:"Return to projects page"})]})]})]}):Object(D.jsx)("div",{ref:m})]})},ae=function(e){var t=e.title,a=e.projectName,n=e.handleSave,c=e.history,r=e.socket,o=e.projectid,i=e.collaborator,l=e.collaboratorName,u=e.collaboratorAvatar,j=Object(s.c)((function(e){return e.userReducer})),d=Object(s.b)(),b=function(){n();var e=JSON.stringify({id:i,type:y.SEND_LEFT,data:l});r.send(e),d(w(!1)),c.push("/projects"),d(R())};return Object(D.jsxs)("div",{className:"Navbar_container",children:[Object(D.jsx)(te,{name:l,avatar:u,email:"",side:"L",active:!0,isUser:!1,handleReturn:b,handleSave:n}),Object(D.jsx)("div",{className:"Navbar_title_container",children:Object(D.jsx)("input",{type:"text",className:"Navbar_title",placeholder:t,name:"title_input",autoComplete:"off",id:"title_input",value:a,onChange:function(e){var t=JSON.stringify({type:y.SEND_TITLE,id:o,data:e.target.value});r.send(t)}})}),Object(D.jsx)(te,{name:j.name,avatar:j.avatar,side:"R",active:!0,isUser:!0,handleReturn:b,handleSave:n})]})},ne=(a(129),a(181)),ce=a(179);a(130),a(131);var re=function(){return Object(D.jsx)("div",{className:"StaticProgress_container",children:Object(D.jsx)("div",{className:"static_line"})})},se=a(76),oe=a.n(se);var ie=function(e){var t=e.collaboratorName,a=e.open;return Object(D.jsx)(ne.a,{open:a,children:Object(D.jsx)(ce.a,{children:Object(D.jsxs)("div",{className:"StopCollab_container",children:[Object(D.jsx)("div",{className:"dialog_icon",children:Object(D.jsx)(oe.a,{style:{fontSize:40}})}),Object(D.jsxs)("span",{className:"StopCollab_header",children:[t," has stopped  editing. Your work is being saved now..."]}),Object(D.jsx)(re,{})]})})})},le=a(77),ue=a.n(le),je=a(78),de=a.n(je),be=function(e){var t=e.history,a=Object(s.b)(),c=Object(s.c)((function(e){return e.projectReducer})),r=c.html,o=c.css,i=c.js,l=c.title,u=c.activeProject,j=c.collaboratorId,d=c.collaboratorName,b=c.collaboratorAvatar,m=Object(n.useState)(r),h=Object(f.a)(m,2),_=h[0],N=h[1],x=Object(n.useState)(o),C=Object(f.a)(x,2),E=C[0],S=C[1],A=Object(n.useState)(i),P=Object(f.a)(A,2),I=P[0],R=P[1],T=Object(n.useState)(u),L=Object(f.a)(T,2),U=L[0],k=(L[1],Object(n.useState)("")),J=Object(f.a)(k,2),G=J[0],B=J[1],V=Object(n.useState)(l),q=Object(f.a)(V,2),z=q[0],M=q[1],W=g.getInstance(),Y=Object(n.useState)(!1),F=Object(f.a)(Y,2),K=F[0],Z=F[1];W.onmessage=function(e){var n=JSON.parse(e.data);switch(n.type){case y.SEND_HTML:N(n.data);break;case y.SEND_CSS:S(n.data);break;case y.SEND_JS:R(n.data);break;case y.SEND_TITLE:M(n.data);break;case y.SEND_LEFT:$(),Z(!0);var c=setTimeout((function(){a(w(!1)),t.push("/projects")}),2e3);return function(){return clearTimeout(c)}}};var $=function(){ue()(document.querySelector("#render_pane")).then((function(e){e.toBlob((function(e){var t,n=new de.a;n.append("image",e),a((t={html:_,css:E,js:I,projectid:U,title:z,image:n},function(){var e=Object(O.a)(p.a.mark((function e(a){var n,c,r,s,o,i,l,u,j,d,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(t.html),c=encodeURIComponent(t.css),r=encodeURIComponent(t.js),s=encodeURIComponent(t.title),o=t.projectid,i=t.image,l="/save-html?projectid=".concat(o,"&html=").concat(n),u="/save-css?projectid=".concat(o,"&css=").concat(c),j="/save-js?projectid=".concat(o,"&js=").concat(r),d="/update-title?projectid=".concat(o,"&title=").concat(s),b="/save-image?projectid=".concat(o),e.next=13,v.get(l);case 13:return e.next=15,v.get(u);case 15:return e.next=17,v.get(j);case 17:return e.next=19,v.get(d);case 19:return e.next=21,v.post(b,i,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data"}});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}))}))};return Object(n.useEffect)((function(){var e=setTimeout((function(){B("\n      <html>\n        <body>".concat(_,"</body>\n        <style>").concat(E,"</style>\n        <script>").concat(I,"<\/script>\n      </html>\n      "))}),250);return function(){return clearTimeout(e)}}),[_,E,I]),Object(D.jsxs)("div",{className:"Editor_container",children:[Object(D.jsx)(ae,{history:t,projectName:z,socket:W,title:l,collaborator:j,collaboratorName:d,collaboratorAvatar:b,projectid:u,handleSave:$}),Object(D.jsxs)("div",{className:"Editor_pane Editor_top_pane",id:"render_pane",children:[Object(D.jsx)(H,{language:"xml",displayName:"HTML",value:_,socket:W,projectid:u}),Object(D.jsx)(H,{language:"css",displayName:"CSS",value:E,socket:W,projectid:u}),Object(D.jsx)(H,{language:"javascript",displayName:"JS",value:I,socket:W,projectid:u})]}),Object(D.jsx)("div",{id:"render_pane",className:"Editor_pane Editor_bottom_pane",children:Object(D.jsx)("iframe",{title:"output",srcDoc:G,sandbox:"allow-scripts allow-same-origin",width:"100%",height:"100%"})}),Object(D.jsx)(ie,{collaboratorName:d,open:K})]})},me=a(28),pe=a(79),Oe=(a(132),a(133),a(134),function(e){var t=e.name,a=e.isActive,c=e.onClick,r=e.avatar,s=Object(n.useRef)();Object(n.useEffect)((function(){var e;(e=s.current).offsetWidth<e.scrollWidth&&s.current.classList.add("marquee")}));return Object(D.jsxs)("div",{className:"User_container",onClick:c,children:[Object(D.jsx)("div",{className:"User_image_container",children:Object(D.jsxs)("div",{className:"User_image",children:["0"!==r?Object(D.jsx)("img",{src:function(){switch(r){case"1":return Y;case"2":return F;case"3":return K;case"4":return Z;case"5":return $;case"6":return Q;case"7":return X;case"8":return ee;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(D.jsx)(z.a,{style:{fontSize:40}}),Object(D.jsx)("div",{className:"User_activity",children:a?Object(D.jsx)("div",{className:"active"}):Object(D.jsx)("div",{className:"inactive"})})]})}),Object(D.jsx)("span",{className:"User_name",ref:s,children:t})]})}),fe=function(e){var t=e.activeUsers,a=e.contacts,n=e.onActiveUserClick,c=e.onRecentUserClick,r=e.isVisible,s=t.map((function(e){return Object(D.jsx)(Oe,{name:e.name,isActive:e.isActive,onClick:function(){return n(e.name,e.username,e.avatar)},avatar:e.avatar},e.username)})),o=a.map((function(e){return Object(D.jsx)(Oe,{name:e.name,isActive:e.isActive,onClick:function(){return c(e.username,e.name,e.isActive,e.avatar)},avatar:e.avatar},e.username)}));return Object(D.jsxs)("div",{className:"ConnectedUsers_container card",children:[Object(D.jsx)("span",{className:"ConnectedUsers_label",children:"Recent contacts"}),o.length>0&&r?o:Object(D.jsx)("span",{className:"no_users",children:"No recent contacts"}),Object(D.jsx)("span",{className:"ConnectedUsers_label top",children:"Active users"}),s.length>0&&r?s:Object(D.jsx)("span",{className:"no_users",children:"No active users"})]})},he=(a(135),a(80)),ve=a.n(he),_e=function(e){var t=e.query,a=e.onChange,c=Object(n.useRef)(),r=Object(n.useState)(!1),s=Object(f.a)(r,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){o?c.current.classList.add("Searchbar_container_focused"):c.current.classList.remove("Searchbar_container_focused")}),[o]),Object(D.jsxs)("div",{className:"Searchbar_container card",ref:c,children:[Object(D.jsx)("div",{className:"Searchbar_icon_container",children:Object(D.jsx)(ve.a,{className:"Searchbar_icon"})}),Object(D.jsx)("input",{type:"text",value:t,onChange:function(e){a(e.target.value)},placeholder:"Search for a project",onFocus:function(){return i(!0)},onBlur:function(){return i(!1)},className:"Searchbar_input"})]})},Ne=(a(136),a(81)),xe=a.n(Ne),ge=(a(137),function(e){var t,a=e.collaboratorName,n=e.accept,c=e.decline,r=e.isNewProject,s=e.projectTitle,o=e.collaboratorAvatar;return Object(D.jsxs)("div",{className:"Notification_container",children:[Object(D.jsx)("div",{className:"user_icon",children:"0"!==o?Object(D.jsx)("img",{src:function(){switch(o){case"1":return Y;case"2":return F;case"3":return K;case"4":return Z;case"5":return $;case"6":return Q;case"7":return X;case"8":return ee;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(D.jsx)(z.a,{style:{fontSize:40}})}),Object(D.jsxs)("div",{className:"Notification_side",children:[Object(D.jsx)("span",{className:"Notification_title",children:(t=r,t?"".concat(a," is inviting you to CREATE a new project"):"".concat(a," is inviting you to CONTINUE working on ").concat(s))}),Object(D.jsxs)("div",{className:"Notification_buttons",children:[Object(D.jsx)("button",{className:"Notification_button_decline",onClick:c,children:"DECLINE"}),Object(D.jsx)("button",{className:"Notification_button_accept",onClick:n,children:"ACCEPT"})]})]})]})}),ye=a.p+"static/media/banner.c68bbcc5.png",Ce=function(e){var t=e.name,a=e.email,c=e.handleLogout,r=e.displayProfile,s=e.notifications,o=e.avatar,i=e.accept,l=e.decline,u=e.acceptCallBack,j=e.declineCallBack,d=Object(n.useState)(!1),b=Object(f.a)(d,2),m=b[0],p=b[1],O=Object(n.useState)(!1),h=Object(f.a)(O,2),v=h[0],_=h[1],N=Object(n.useRef)(),x=Object(n.useRef)(),g=Object(n.useRef)(),y=Object(n.useRef)(),C=function(e){p((function(e){return!e})),e()};return Object(n.useEffect)((function(){x.current.style.display=v?"flex":"none";var e=function(e){x.current&&!x.current.contains(e.target)&&y.current&&!y.current.contains(e.target)&&v&&_(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[v]),Object(n.useEffect)((function(){N.current.style.display=m?"flex":"none";var e=function(e){N.current&&!N.current.contains(e.target)&&g.current&&!g.current.contains(e.target)&&m&&p(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[m]),Object(D.jsxs)("div",{className:"Header_container",children:[Object(D.jsx)("div",{className:"Banner",children:Object(D.jsx)("img",{src:ye,alt:"Banner",className:"main_icon"})}),Object(D.jsxs)("div",{className:"Header_user",children:[Object(D.jsxs)("div",{className:"Header_notifications_icon ".concat(s.length>0&&!v?"notification_animation":""),ref:y,children:[Object(D.jsx)(xe.a,{style:{fontSize:40},onClick:function(){return _((function(e){return!e}))}}),s.length>0&&Object(D.jsx)("div",{className:"Notifications_count_container",children:Object(D.jsx)("span",{className:"Notifications_count",children:s.length})})]}),Object(D.jsx)("div",{className:"Header_user_icon",ref:g,onClick:function(){return p((function(e){return!e}))},children:"0"!==o?Object(D.jsx)("img",{src:function(){switch(o){case"1":return Y;case"2":return F;case"3":return K;case"4":return Z;case"5":return $;case"6":return Q;case"7":return X;case"8":return ee;default:return}}(),className:"current_icon",alt:"Current avatar"}):Object(D.jsx)(z.a,{style:{fontSize:40}})}),Object(D.jsx)("div",{className:"Header_notifications menu",ref:x,children:s.length>0?Object(D.jsxs)("div",{className:"Notification_main",children:[Object(D.jsx)("span",{className:"Notifications_title",children:"Notifications"}),s.map((function(e){return Object(D.jsx)(ge,{collaboratorName:e.collaboratorName,accept:function(){return i(e,(function(){return u(e.type,e.proj)}))},decline:function(){return l(e,(function(){return j(e.collaborator,e.type)}))},isNewProject:e.isNewProject,projectTitle:e.projectTitle,collaboratorAvatar:e.collaboratorAvatar},"Notification_".concat(s.indexOf(e)))}))]}):Object(D.jsx)("span",{className:"no_notifications",children:"You do not have any notifications"})}),Object(D.jsxs)("div",{className:"Header_menu menu",ref:N,children:[Object(D.jsxs)("div",{className:"Header_user_details",children:[Object(D.jsx)("span",{className:"Header_user_name",children:t}),Object(D.jsx)("span",{className:"Header_user_email",children:a})]}),Object(D.jsxs)("ul",{children:[Object(D.jsxs)("li",{onClick:function(){return C(r)},children:[Object(D.jsx)(z.a,{className:"Header_menu_icon"}),Object(D.jsx)("span",{children:"Profile"})]}),Object(D.jsxs)("li",{onClick:function(){return C(c)},children:[Object(D.jsx)(V.a,{className:"Header_menu_icon"}),Object(D.jsx)("span",{children:"Logout"})]})]})]})]})]})};a(138);var Ee=function(e){var t=e.isOpen,a=e.closeDialog;return Object(D.jsx)(ne.a,{open:t,children:Object(D.jsx)(ce.a,{children:Object(D.jsxs)("div",{className:"About_container",children:[Object(D.jsx)("div",{className:"fixed",children:Object(D.jsx)("span",{className:"About_header",children:"About"})}),Object(D.jsxs)("div",{className:"About_content",children:[Object(D.jsx)("span",{className:"About_message",children:"COLLABCODE is a platform that allows users to learn the basics of web development collaboratively. Any two online users can connect by creating a collaborative project to live code basic HTML, CSS and Javascript code while getting immediate feedback."}),Object(D.jsx)("span",{className:"About_message below",children:"To use CODECOLLAB, you have to select any user who is online to send a request to create a new project. Once the project has been created, you can then send an invitation to your partner to start collaborating on the new project by clicking continue on the project tile."}),Object(D.jsx)("span",{className:"About_message below",children:"To encourage collaboration amongst students, you can only work on a project while you and your partner are both online and editing together. However, you also have an option to download the project files and continue working offline."}),Object(D.jsx)("span",{className:"About_message below",children:"If you do not want to receive invitations to collaborate from other users while using the application, you can hide your online status by updating your profile settings. However, while your online status is hidden, you will not be able to collaborate with other users or to see other online users."})]}),Object(D.jsx)("div",{className:"About_button_container",children:Object(D.jsx)("button",{className:"About_button",onClick:a,children:"CLOSE"})})]})})})},Se=(a(139),a(140),function(e){return Object(D.jsx)("div",{className:"AspectRatio",children:Object(D.jsx)("div",{className:"AspectRatio-innerWrapper",children:e})})}),Ae=a(82),Pe=a.n(Ae),Ie=a(83),we=a.n(Ie),Re=function(e){var t=e.title,a=e.collaboratorName,n=e.downloadProject,c=e.continueProject,r=e.image;return Object(D.jsxs)("div",{className:"Project_container card",children:[Se(Object(D.jsx)("div",{className:"Project_icon",children:Object(D.jsx)("img",{src:r,alt:"Project Icon",className:"Project_image"})})),Object(D.jsx)("span",{className:"Project_title",children:t}),Object(D.jsx)("span",{className:"Project_collaborator",children:"Collaborator: ".concat(a)}),Object(D.jsxs)("div",{className:"Project_options",children:[Object(D.jsxs)("button",{className:"download",onClick:n,children:[Object(D.jsx)(Pe.a,{}),Object(D.jsx)("span",{className:"button_text",children:"Download"})]}),Object(D.jsxs)("button",{className:"continue",onClick:c,children:[Object(D.jsx)(we.a,{}),Object(D.jsx)("span",{className:"button_text",children:"Continue"})]})]})]})},Te=a(84),Le=(a(141),a(142),function(){return Object(D.jsxs)("div",{className:"Progress_container",children:[Object(D.jsx)("div",{className:"line-base"}),Object(D.jsx)("div",{className:"line"})]})}),Ue=a(48),ke=a.n(Ue),De=function(e){var t=Object(s.b)(),a=e.collaboratorId,c=e.collaboratorName,r=e.isOpen,o=e.closeDialog,i=e.fromProject,l=e.message,u=e.socket,j=e.isActive,d=e.notifications,b=Object(n.useRef)(),m=Object(s.c)((function(e){return e.userReducer})),f=Object(s.c)((function(e){return e.projectReducer})),h=f.activeProject,_=f.title;u.onmessage=function(e){var n=JSON.parse(e.data),r=n.data.split("-"),s=r[0];switch(n.type){case y.REC_CREATE_PING:"yes"===s?N():o();break;case y.REC_CONTINUE_PING:"yes"===s?(t(I({username:a,name:c,avatar:r[1]})),t(w(!0))):o()}};var N=function(){var e;t((e={username:m.username,collaborator:a,title:"New Project"},function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r,s,o,i,l,u,j;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.collaborator,r=e.title,s="/create?username=".concat(n,"&partner=").concat(c,"&title=").concat(r),t.next=6,v.post(s);case 6:o=t.sent,i=o.data,l=g.getInstance(),u=JSON.stringify({id:i,type:y.LOAD_INIT_PROJECTS,data:""}),console.log("Inside create project and printing:",u),l.send(u),j=JSON.stringify({id:c,type:y.COLLAB,data:i}),console.log("Inside create project and printing:",j),l.send(j),a(U(n));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),o(),t(U(m.username))};return Object(D.jsx)(ne.a,{open:r,children:Object(D.jsxs)(ce.a,{children:[Object(D.jsxs)("div",{className:"ConnectionDialog_container",children:[Object(D.jsx)("span",{className:"ConnectionDialog_header",children:"Connecting"}),Object(D.jsx)("span",{className:"ConnectionDialog_summary",children:"Waiting for ".concat(c," to connect...")}),Object(D.jsx)(Le,{}),Object(D.jsx)("div",{className:"ConnectionDialog_button_container",children:Object(D.jsx)("button",{className:"ConnectionDialog_button",onClick:function(){var e,t="cancel=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar,"=").concat(h,"=").concat(_);e=JSON.stringify({id:a,type:y.PING_USER,data:t}),u.send(e),o()},children:"CANCEL"})})]}),!j&&Object(D.jsxs)("div",{className:"ConnectionDialog_options",children:[Object(D.jsx)("div",{className:"Icon_container",children:Object(D.jsx)(ke.a,{style:{fontSize:40,color:"gray"}})}),Object(D.jsx)("span",{className:"AlertDialog_message",children:"You cannot collaborate with anyone when you are appearing offline."}),Object(D.jsx)("div",{className:"AlertDialog_button_container",children:Object(D.jsx)("button",{className:"AlertDialog_button",onClick:o,children:"CLOSE"})})]}),j&&Object(D.jsxs)("div",{className:"ConnectionDialog_options",ref:b,children:[Object(D.jsx)("span",{className:"ConnectionDialog_header",children:"Invite to collaborate?"}),Object(D.jsx)("div",{className:"Connection_Body"}),Object(D.jsx)("span",{className:"ConnectionDialog_alert",children:l}),Object(D.jsxs)("div",{className:"Connection_confirm_button_container",children:[Object(D.jsx)("button",{className:"Connection_confirm_button left",onClick:function(){if(b.current.classList.add("ConnectionDialog_hide_options"),i){var e,n=Object(Te.a)(d);try{for(n.s();!(e=n.n()).done;){if(e.value.projectid===h){var c="yes-".concat(m.avatar),r=JSON.stringify({id:a,type:y.REC_CONTINUE_PING,data:c});return u.send(r),void t(w(!0))}}}catch(p){n.e(p)}finally{n.f()}var s="continue=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar,"=").concat(h,"=").concat(_),o=JSON.stringify({id:a,type:y.PING_USER,data:s});u.send(o)}else{var l="create=".concat(m.username,"=").concat(m.name,"=").concat(m.avatar),j=JSON.stringify({id:a,type:y.PING_USER,data:l});u.send(j)}},children:"YES"}),Object(D.jsx)("button",{className:"Connection_confirm_button right",onClick:o,children:"NO"})]})]})]})})},Je=(a(143),function(e){var t=e.isOpen,a=e.closeDialog,n=e.message;return Object(D.jsx)(ne.a,{open:t,children:Object(D.jsx)(ce.a,{children:Object(D.jsxs)("div",{className:"AlertDialog_container",children:[Object(D.jsx)("div",{className:"AlertIcon_container",children:Object(D.jsx)(ke.a,{style:{fontSize:40,color:"gray"}})}),Object(D.jsx)("span",{className:"AlertDialog_message",children:n}),Object(D.jsx)("div",{className:"AlertDialog_button_container",children:Object(D.jsx)("button",{className:"AlertDialog_button",onClick:a,children:"CLOSE"})})]})})})}),Ge=(a(144),function(e){var t=e.isOpen,a=e.name,c=e.currentOnlineStatus,r=e.closeDialog,s=e.saveProfile,o=e.avatar,i=Object(n.useState)(a),l=Object(f.a)(i,2),u=l[0],j=l[1],d=Object(n.useState)(""),b=Object(f.a)(d,2),m=b[0],p=b[1],O=Object(n.useState)(c),h=Object(f.a)(O,2),v=h[0],_=h[1],N=Object(n.useState)(o),x=Object(f.a)(N,2),g=x[0],y=x[1];return Object(D.jsx)(ne.a,{open:t,children:Object(D.jsx)(ce.a,{children:Object(D.jsxs)("div",{className:"ProfileDialog_container",children:[Object(D.jsx)("span",{className:"ProfileDialog_header",children:"Profile information"}),Object(D.jsxs)("div",{className:"Update_profile_pic",children:[Object(D.jsx)("div",{className:"Profile_current",children:"0"!==g?Object(D.jsx)("img",{src:function(e){switch(e){case"1":return Y;case"2":return F;case"3":return K;case"4":return Z;case"5":return $;case"6":return Q;case"7":return X;case"8":return ee;default:return}}(g),className:"current_icon",alt:"Current avatar"}):Object(D.jsx)(z.a,{style:{fontSize:90}})}),Object(D.jsxs)("div",{className:"Profile_new",children:[Object(D.jsx)("span",{children:"Select new avatar"}),Object(D.jsxs)("div",{className:"profile_icons",children:[Object(D.jsx)("img",{src:Y,className:"new_icon",alt:"Icon Option 1",onClick:function(){return y("1")}}),Object(D.jsx)("img",{src:F,className:"new_icon",alt:"Icon Option 2",onClick:function(){return y("2")}}),Object(D.jsx)("img",{src:K,className:"new_icon",alt:"Icon Option 3",onClick:function(){return y("3")}}),Object(D.jsx)("img",{src:Z,className:"new_icon",alt:"Icon Option 4",onClick:function(){return y("4")}}),Object(D.jsx)("img",{src:$,className:"new_icon",alt:"Icon Option 5",onClick:function(){return y("5")}}),Object(D.jsx)("img",{src:Q,className:"new_icon",alt:"Icon Option 6",onClick:function(){return y("6")}}),Object(D.jsx)("img",{src:X,className:"new_icon",alt:"Icon Option 7",onClick:function(){return y("7")}}),Object(D.jsx)("img",{src:ee,className:"new_icon",alt:"Icon Option 8",onClick:function(){return y("8")}})]})]})]}),Object(D.jsxs)("div",{className:"ProfileDialog_inputs",children:[Object(D.jsxs)("label",{htmlFor:"name_input",className:"input_container input_left",children:[Object(D.jsx)("span",{className:"Profile_input_label",children:"Name"}),Object(D.jsx)("input",{type:"text",name:"name_input",value:u,onChange:function(e){j(e.target.value)},className:"Profile_input"})]}),Object(D.jsxs)("label",{htmlFor:"username_input",className:"input_container input_right",children:[Object(D.jsx)("span",{className:"Profile_input_label",children:"Password"}),Object(D.jsx)("input",{type:"password",name:"username_input",onChange:function(e){p(e.target.value)},className:"Profile_input"})]})]}),Object(D.jsxs)("div",{className:"ProfileDialog_toggle_container",children:[Object(D.jsxs)("label",{htmlFor:"status_toggle",className:"Profile_toggle",children:[Object(D.jsx)("input",{type:"checkbox",id:"status_toggle",name:"status_toggle",checked:v,onChange:function(){return _((function(e){return!e}))},className:"Profile_toggle_input"}),Object(D.jsx)("div",{className:"Profile_toggle_fill"}),Object(D.jsx)("span",{className:"Toggle_label",children:"Display online status"})]}),Object(D.jsx)("span",{className:"online_status_message",children:"If you do not display your online status, you will not be able to see other users who are online"})]}),Object(D.jsxs)("div",{className:"ProfileDialog_button_container",children:[Object(D.jsx)("button",{className:"ProfileDialog_button left",onClick:r,children:"CLOSE"}),Object(D.jsx)("button",{className:"ProfileDialog_button right",onClick:function(){return s(u,m,v,g)},children:"SAVE"})]})]})})})}),He=function(e){var t=e.history,c=Object(s.c)((function(e){return e.userReducer})),r=Object(s.b)(),o=Object(s.c)((function(e){return e.projectReducer})),i=o.activeUsers,l=o.contacts,u=o.onlineProjects,j=o.canEdit,d=o.offlineProjects,b=Object(n.useState)(""),m=Object(f.a)(b,2),h=m[0],_=m[1],N=Object(n.useState)(!1),x=Object(f.a)(N,2),C=x[0],E=x[1],S=Object(n.useState)({}),k=Object(f.a)(S,2),J=k[0],G=k[1],H=Object(n.useState)([]),B=Object(f.a)(H,2),V=B[0],q=B[1],z=Object(n.useState)(u.concat(d)),M=Object(f.a)(z,2),W=M[0],Y=M[1],F=Object(n.useState)(""),K=Object(f.a)(F,2),Z=K[0],$=K[1],Q=Object(n.useState)(!1),X=Object(f.a)(Q,2),ee=X[0],te=X[1],ae=Object(n.useState)([]),ne=Object(f.a)(ae,2),ce=(ne[0],ne[1]),re=Object(n.useState)(!1),se=Object(f.a)(re,2),oe=se[0],ie=se[1],le=Object(n.useState)(""),ue=Object(f.a)(le,2),je=ue[0],de=ue[1],be=Object(n.useState)(!0),Oe=Object(f.a)(be,2),he=Oe[0],ve=Oe[1],Ne=Object(n.useState)(!1),xe=Object(f.a)(Ne,2),ge=xe[0],ye=xe[1],Se=Object(n.useState)([]),Ae=Object(f.a)(Se,2),Pe=Ae[0],Ie=Ae[1],we=Object(n.useState)(!1),Te=Object(f.a)(we,2),Le=Te[0],Ue=Te[1],ke=g.getInstance();if(c.fromLogin){var He=JSON.stringify({id:c.username,type:y.SIGN_IN,data:""});ke.send(He)}ke.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case y.PING_USER:var a=t.data.split("="),n=a[0],r=a[1],s=a[2],o=a[3];if("cancel"===n){var i=Pe.filter((function(e){return e.collaboratorId===r}));Ie(i)}else if("create"===n){var j={collaboratorName:s,collaborator:r,projectid:"",isNewProject:!0,projectTitle:"New Project",type:n,proj:r,collaboratorAvatar:o};Ie([].concat(Object(me.a)(Pe),[j]))}else{for(var d=a[4],b="",m="",p="",O=0;O<u.length;O++)if(u[O].projectid===d){b=u[O].html,m=u[O].css,p=u[O].js;break}for(var f="0";0<l.length;O++)if(l[0].username===r){f=l[0].avatar;break}var h=a[5],v={collaborator:r,collaboratorName:s,title:h,projectid:d,html:b,css:m,js:p,avatar:f};Ie([].concat(Object(me.a)(Pe),[{collaboratorName:s,projectid:d,collaborator:r,isNewProject:!1,projectTitle:v.title,type:n,proj:v,collaboratorAvatar:o}]))}break;case y.COLLAB_ADD_PROJECT:U(c.username)}},window.onbeforeunload=function(){ke.onclose=function(){}},Object(n.useEffect)((function(){j&&t.push("/editor")}),[j,t]),Object(n.useEffect)((function(){if(c.isVisible){var e=setInterval((function(){var e;r((e={username:c.username,isVisible:c.isVisible,isProjectsPage:!0},function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.username,c=e.isVisible,r=e.isProjectsPage,!c){t.next=7;break}return s="/update-active?username=".concat(n),t.next=7,v.get(s);case 7:r&&(a(U(n)),a(L(n)));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),2e3);return function(){return clearInterval(e)}}}),[c.username,c.isVisible,r]);var Be=function(e,t,a){ye(!1),E(!0),G({name:e,username:t,avatar:a,isActive:!0}),r(I({name:e,username:t,avatar:a})),de("This will CREATE a new project with ".concat(e,"."))},Ve=function(e){var t=e.split(/[\s,]+/);return t=t.filter((function(e){return""!==e})).map((function(e){return e.toLowerCase()})).join("_")};return Object(n.useEffect)((function(){var e;window.addEventListener("resize",(function(){document.body.classList.add("resize-animation-stopper"),clearTimeout(e),e=setTimeout((function(){document.body.classList.remove("resize-animation-stopper")}),400)}))}),[]),Object(n.useEffect)((function(){ce([]),Y([]);var e=l.concat(i),t=u.concat(d);if(c.fromLogin&&t.length>0){var a=[];t.forEach((function(e){var t=e.projectid;a.push(t)})),a.forEach((function(e){var t=JSON.stringify({id:e,type:y.LOAD_INIT_PROJECTS,data:""});ke.send(t)})),r(P(!1))}ce(e),Y(t)}),[l,r,u,d,i,ke,c.fromLogin]),Object(n.useEffect)((function(){var e=W.filter((function(e){return e.title.includes(h)||e.title.includes(h.toUpperCase())}));return q(e),function(){he&&ve(!1)}}),[h,W,he]),Object(D.jsxs)("div",{className:"Projects_container",children:[Object(D.jsx)(Ce,{name:c.name,email:c.email,handleLogout:function(){var e=JSON.stringify({id:"",type:y.SIGN_OUT,data:""});ke.send(e),t.push("/"),r({type:y.SIGN_OUT,payload:null}),r({type:y.CLEAR_REDUCER,payload:null}),r(P(!0))},displayProfile:function(){ie(!0)},notifications:Pe,avatar:c.avatar,accept:function(e,t){var a=Pe.filter((function(t){return t!==e}));Ie(a),t()},acceptCallBack:function(e,t){if("create"===e){var a=JSON.stringify({id:t,type:y.REC_CREATE_PING,data:"yes"});ke.send(a),r(U(c.username))}else if("continue"===e){var n="yes-".concat(c.avatar),s=JSON.stringify({id:t.collaborator,type:y.REC_CONTINUE_PING,data:n});ke.send(s),r(A({projectid:t.projectid,collaborator:t.collaborator,collaboratorName:t.collaboratorName,html:t.html,css:t.css,js:t.js,title:t.title,collaboratorAvatar:t.avatar})),r(w(!0))}},declineCallBack:function(e,t){if("create"===t){var a=JSON.stringify({id:e,type:y.REC_CREATE_PING,data:"no"});ke.send(a)}else{var n=JSON.stringify({id:e,type:y.REC_CONTINUE_PING,data:"no"});ke.send(n)}},decline:function(e,t){var a=Pe.filter((function(t){return t!==e}));Ie(a),t()},isActive:c.isVisible,displayAbout:function(){return Ue(!0)},history:t}),Object(D.jsxs)("div",{className:"Projects_main",children:[Object(D.jsxs)("div",{className:"Projects_content",children:[Object(D.jsx)(_e,{query:h,onChange:_}),Object(D.jsx)("span",{className:"Projects_label",children:"Recent Projects"}),!he&&0===W.length&&Object(D.jsxs)("div",{className:"card Projects_no_result",children:[Object(D.jsx)("span",{className:"no_result_summary",children:"No projects"}),Object(D.jsx)("span",{className:"no_result_message",children:"You have not collaborated on any projects with anyone. Please select any active user to start collaborating on your first project."})]}),!he&&0!==W.length&&0===V.length&&Object(D.jsxs)("div",{className:"card Projects_no_result",children:[Object(D.jsx)("span",{className:"no_result_summary",children:"No results found"}),Object(D.jsx)("span",{className:"no_result_message",children:"You do not have any project that matches the given name."})]}),!he&&V.length>0&&Object(D.jsx)("div",{className:"Projects_recent",children:V.map((function(e){return Object(D.jsx)(Re,{title:e.title,image:e.image,collaboratorName:e.collaboratorName,downloadProject:function(){return function(e,t,n,c){var r=Ve(e),s=a(145)(),o=s.folder(r);o.file("index.js",c),o.file("style.css",n),o.file("index.html",t),s.generateAsync({type:"blob"}).then((function(e){Object(pe.saveAs)(e,"".concat(r,".zip"))}))}(e.projectid,e.html,e.css,e.js)},continueProject:function(){return function(e,t,a,n,c,s,o){for(var i="0",u=!0,j=0;j<l.length;j++)if(l[j].username===a){i=l[j].avatar,u=l[j].isActive;break}u?(ye(!0),E(!0),G({name:n,username:a,avatar:i,isActive:u}),r(I({name:n,username:a,avatar:i})),r(A({projectid:e,collaborator:a,collaboratorName:n,html:c,css:s,js:o,title:t,collaboratorAvatar:i})),de("This will send an invitation to ".concat(n," to continue working on ").concat(t))):(te(!0),$("".concat(n," is currently offline. You can only edit \n\t      this project when you are both online.")))}(e.projectid,e.title,e.collaborator,e.collaboratorName,e.html,e.css,e.js)}},e.projectid)}))})]}),Object(D.jsx)("div",{className:"Projects_sidebar",children:Object(D.jsx)(fe,{activeUsers:i,contacts:l,onActiveUserClick:Be,onRecentUserClick:function(e,t,a,n){a?Be(t,e,n):(te(!0),$("".concat(t," is currently offline. You can only CREATE new projects with ACTIVE users.")))},isVisible:c.isVisible})})]}),C&&Object(D.jsx)(De,{collaboratorName:J.name,collaboratorId:J.username,isActive:c.isVisible,isOpen:C,fromProject:ge,closeDialog:function(){return function(e){E(!1),e&&r(R()),de(""),G({})}(ge)},message:je,socket:ke,history:t,notifications:Pe}),ee&&Object(D.jsx)(Je,{isOpen:ee,closeDialog:function(){$(""),te(!1)},message:Z}),oe&&Object(D.jsx)(Ge,{isOpen:oe,name:c.name,currentOnlineStatus:c.isVisible,closeDialog:function(){return ie(!1)},saveProfile:function(e,t,a,n){var s,o;c.name!==e&&r((s={username:c.username,name:e},function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.username,n=s.name,c="/change-name?username=".concat(a,"&name=").concat(n),e.next=5,v.get(c);case 5:t({type:y.CHANGE_NAME,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c.avatar!==n&&r(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.avatar,r="/change-avatar?username=".concat(n,"&avatar=").concat(c),t.next=5,v.get(r);case 5:a({type:y.CHANGE_AVATAR,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,avatar:n})),c.isVisible!==a&&r((o={username:c.username,visibility:a},function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.username,n=o.visibility,c="/change-vis?username=".concat(a,"&visibility=").concat(n),e.next=5,v.get(c);case 5:t(T(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.length>=8&&t.length<=60&&r(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var n,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,c=e.password,r="/change-pass?username=".concat(n,"&password=").concat(c),t.next=5,v.get(r);case 5:a({type:y.CHANGE_PASSWORD,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({username:c.username,password:t})),ie(!1)},avatar:c.avatar}),Le&&Object(D.jsx)(Ee,{isOpen:Le,closeDialog:function(){return Ue(!1)}})]})},Be=Object(b.a)(),Ve=Object(j.a)({palette:{type:"light",primary:{main:"#6E4AB1"},secondary:{main:"#000000"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:400,fontWeightRegular:500,fontWeightMedium:600}});var qe=function(){return Object(D.jsx)(d.a,{theme:Ve,children:Object(D.jsxs)(l.a,{history:Be,children:[Object(D.jsx)(u.a,{path:"/",exact:!0,component:J}),Object(D.jsx)(u.a,{path:"/editor",exact:!0,component:be}),Object(D.jsx)(u.a,{path:"/projects",exact:!0,component:He})]})})},ze=a(5),Me={activeProject:"",html:"",css:"",js:"",title:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0",onlineProjects:[],offlineProjects:[],activeUsers:[],contacts:[],canEdit:!1},We={isSignedIn:!1,username:"",email:"",name:"",isVisible:!0,avatar:"0",fromLogin:!0},Ye=Object(o.c)({projectReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.CHOOSE_PROJECT:return Object(ze.a)(Object(ze.a)({},e),{},{activeProject:t.payload.projectid,html:t.payload.html,css:t.payload.css,js:t.payload.js,collaboratorName:t.payload.collaboratorName,title:t.payload.title,collaboratorId:t.payload.collaborator,collaboratorAvatar:t.payload.collaboratorAvatar});case y.CLEAR_PROJECT:return Object(ze.a)(Object(ze.a)({},e),{},{html:"",css:"",js:"",collaboratorName:"",title:"",activeProject:"",collaboratorId:"",collaboratorAvatar:"0"});case y.CHOOSE_USER:return Object(ze.a)(Object(ze.a)({},e),{},{collaboratorId:t.payload});case y.UPDATE_EDIT:return Object(ze.a)(Object(ze.a)({},e),{},{canEdit:t.payload});case y.SELECT_COLLAB:return Object(ze.a)(Object(ze.a)({},e),{},{collaboratorId:t.payload.username,collaboratorName:t.payload.name,collaboratorAvatar:t.payload.avatar});case y.LOAD_INIT_PROJECTS:case y.UPDATE_PROJECTS:return Object(ze.a)(Object(ze.a)({},e),{},{onlineProjects:t.payload.onlineProjects,offlineProjects:t.payload.offlineProjects});case y.UPDATE_USERS:return Object(ze.a)(Object(ze.a)({},e),{},{contacts:t.payload.contacts,activeUsers:t.payload.activeUsers});case y.CLEAR_REDUCER:return Object(ze.a)(Object(ze.a)({},e),{},{activeProject:"",onlineProjects:[],title:"",offlineProjects:[],activeUsers:[],contacts:[],html:"",css:"",js:"",collaboratorId:"",collaboratorName:"",collaboratorAvatar:"0"});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.SIGN_IN:return Object(ze.a)(Object(ze.a)({},e),{},{isSignedIn:!0,username:t.payload.username,email:t.payload.email,name:t.payload.name,avatar:t.payload.avatar,isVisible:t.payload.isVisible});case y.SIGN_OUT:return Object(ze.a)(Object(ze.a)({},e),{},{isSignedIn:!1,username:"",email:"",activeProject:"",avatar:"0"});case y.CHANGE_VISIBILITY:return Object(ze.a)(Object(ze.a)({},e),{},{isVisible:t.payload});case y.UPDATE_LOCATION:return Object(ze.a)(Object(ze.a)({},e),{},{fromLogin:t.payload});case y.CHANGE_NAME:return Object(ze.a)(Object(ze.a)({},e),{},{name:t.payload});case y.CHANGE_AVATAR:return Object(ze.a)(Object(ze.a)({},e),{},{avatar:t.payload});default:return e}}}),Fe=Object(o.d)(Ye,Object(o.a)(i.a));r.a.render(Object(D.jsx)(s.a,{store:Fe,children:Object(D.jsx)(qe,{})}),document.getElementById("root"))},99:function(e,t,a){}},[[155,1,2]]]);
//# sourceMappingURL=main.015b611d.chunk.js.map